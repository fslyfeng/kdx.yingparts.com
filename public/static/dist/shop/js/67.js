(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[67],{"0400":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAtUExURUdwTP89Uf9PS/9fRf9PS/9FTP9LTP9NS/9LS/9JTv9cRv9CT/9USf86Uv9KTPMIMM0AAAAKdFJOUwCfn59fYC3Fj9+CDZDpAAAAl0lEQVQoz2NgoAVgMzY2NlICAUEQSGBgXrVq1ZkzZ96927179927dwXAAqvOnDsHEoELgFW8RhJYc+YNQgBsKMhUIaihWABIyxEGhmiQFojAGnQBmIq9qALeu4EiUIFTYBWv96JrIUUFUIDNAVnFqTOH6l5Ko6gAex/ZDJj3oQKQ8HgNE6iCaAGpuA4WyIAEMig82hhoAwBHu6I0/aMNlQAAAABJRU5ErkJggg=="},"07cb":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAzUExURUdwTP9HTv9JTf9HTv9JTf9LTP9SSv9iQ/89Uf82U/9fRf9XSP9PSv9ITf9BT/88Uf82U9Jr5qkAAAAKdFJOUwB92mi/MZZeml1KaJYxAAAApklEQVQ4y82SSwKDIAxEQUj4JdD7n7aKYCsKuGtnOy9hGBDiJwInreqZZjWz3M0gKES0uAP2NGaMRN1IOQdlcvG7QghExMwxpdempcwXM9vZX5Uy4z6A/wL4Dgh+AhxnjAB6miGOMnAmdCkLOhlkU3/dUDOwMIQtcOpBIKUesPkMgO7uiLoiarhmeNbDqMkweyw/e6z5fxhsgKOGS8hyXez9KCv+Q2+K5BqcdO0TngAAAABJRU5ErkJggg=="},"0be0":function(t,e,a){"use strict";a.r(e);var i=a("31a3e"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},1915:function(t,e,a){"use strict";var i=a("940a");a.o(i,"render")&&a.d(e,"render",(function(){return i["render"]})),a.o(i,"staticRenderFns")&&a.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]}))},"31a3e":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(a("5530"));a("d3b7"),a("159b");var n=i(a("a467")),r=i(a("1f14")),o=i(a("c5e4")),d=i(a("91d9")),c=i(a("f0d4")),l=i(a("e780")),u=i(a("7f48")),p=i(a("b091")),f=i(a("7cc5")),_={name:"OrderStatus",components:{EditReceivingGoods:n.default,SendGoods:r.default,ChangePrice:o.default,CloseOrder:d.default,CancelSendGoods:c.default,InvoiceInfo:l.default,PaymentTag:u.default,RefundModal:p.default,DeliveryContent:f.default},props:{data:{type:Object,required:!0}},data:function(){return{modal:{cancelSendGoodsModal:0,editExpress:0,changePrice:0,closeOrder:0,packageExpress:0,invoiceInfo:0,title:"",id:"",dispatch_type:""},image:{payment:a("07cb"),put:a("b506"),send:a("0400")},invoiceInfo:{data:{},price:"",status:!0},printerList:[],templateList:[],printerModal:!1,printerModelData:{printer_id:"",template_id:"",order_id:""},rules:{printer_id:[{required:!0,message:"请输入打印机名称"}],template_id:[{required:!0,message:"请选择打印模板"}]},remark:"",is_refund_front:"1",virtual:[],deliverModal:!1,virtual_setting:{to_mailer:"",use_address:"0",use_address_address:"",use_address_title:"使用地址",use_description:"0",use_description_remark:"",use_description_title:"使用说明"}}},watch:{data:{handler:function(){this.isCheck()}}},computed:{is_Seckill:function(){return 2==this.data.activity_type},isInvoiceInfo:function(){var t,e,a=null===(t=this.data)||void 0===t||null===(e=t.invoice_info)||void 0===e?void 0:e.is_company;return a&&("1"==a||"2"==a)},addressDetail:function(){return this.data.address_state+this.data.address_city+this.data.address_area+this.data.address_detail},auto_deliver:function(){var t,e;return null===(t=this.data.goods_info)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.auto_deliver},auto_deliver_content:function(){var t,e;return null===(t=this.data.goods_info)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.auto_deliver_content},goods_type:function(){var t,e;return null===(t=this.data.goods_info)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.type},permMap:function(){var t={};return this.$getPermMap("order.op.view")&&(t.view=!0,t.send=this.$getPermMap("order.op.send"),t.edit_address=this.$getPermMap("order.op.edit_address"),t.close_refund=this.$getPermMap("order.op.close_refund"),t.cancel_send=this.$getPermMap("order.op.cancel_send"),t.pay=this.$getPermMap("order.op.pay"),t.change_price=this.$getPermMap("order.op.change_price"),t.close=this.$getPermMap("order.op.close"),t.finish=this.$getPermMap("order.op.finish")),this.$getPermMap("printer.index.view")&&(t.printer=!0),t},noManagePerm:function(){return!this.$getPermMap("expressHelper.print.manage")},showPrintText:function(){var t,e;return 1===+(null===(t=this.data)||void 0===t||null===(e=t.icon)||void 0===e?void 0:e.electronic_sheet)||this.permMap.printer},getDispatch:function(){var t={10:"快递",30:"同城配送"};return t[this.data.dispatch_type]||"快递"},getDeliveryImg:function(){var t={10:"order/delivery_map.png",0:"order/delivery_auto.png",30:"order/delivery_samecity.png"},e=t[this.data.dispatch_type]||"order/delivery_map.png";return e?this.$utils.staticImg(e):""},getDeliverName:function(){var t={30:"配送时间"};return t[this.data.dispatch_type]},getDeliverTime:function(){var t,e,a,i,s,n;return null!==(t=this.data)&&void 0!==t&&null!==(e=t.extra_package)&&void 0!==e&&e.delivery_time&&"0000-00-00 00:00:00"!==(null===(a=this.data)||void 0===a||null===(i=a.extra_package)||void 0===i?void 0:i.delivery_time)?null===(s=this.data)||void 0===s||null===(n=s.extra_package)||void 0===n?void 0:n.delivery_time:""}},methods:{sendGoods:function(){var t=this;this.modal.id=this.data.id,this.modal.dispatch_type=this.data.dispatch_type,this.$nextTick((function(){t.$refs["send_goods"].setValue()}))},generalRefund:function(){var t=this;this.modal.id=this.data.id,this.$nextTick((function(){t.$refs["refund_modal"].setValue()}))},editReceiveInfo:function(){var t=this;this.modal.id=this.data.id,this.modal.dispatch_type=this.data.dispatch_type,this.$nextTick((function(){t.$refs["edit_receiving_goods"].setValue()}))},changePrice:function(){var t=this;this.modal.id=this.data.id,this.$nextTick((function(){t.$refs["change_price"].setValue()}))},closeOrder:function(){var t=this,e=this.$createElement;this.$Modal.confirm({title:"是否关闭订单",okText:"确认关闭",onOk:function(){var e={id:t.data.id,remark:t.remark};t.$api.orderApi.closeOrder(e).then((function(e){0===e.error&&(t.$Message.success("订单关闭成功"),t.handleRefresh())}))},onCancel:function(){},render:function(){return e("div",[e("p",{style:"padding-bottom:15px"},["请填写关闭订单原因"]),e("Input",{attrs:{type:"textarea",maxlength:"40","show-word-limit":!0,autofocus:!0,placeholder:"请填写关闭订单原因"},model:{value:t.remark,callback:function(e){t.remark=e}}})])}})},cancelSendGoods:function(){var t=this;this.modal.id=this.data.id,this.$nextTick((function(){t.$refs["cancel_send_goods"].setValue()}))},packageInvoiceInfo:function(){var t=this;this.modal.id=this.data.id,this.invoiceInfo.data=this.data.invoice_info,this.invoiceInfo.price=this.data.pay_price,this.$nextTick((function(){t.$refs["invoice_info"].setValue()}))},confirmPayment:function(){var t=this;this.$Modal.confirm({title:"提示",content:"确认此单已付款吗？",okText:"确认付款",onOk:function(){var e={order_id:t.data.id};t.$api.orderApi.setPayment(e).then((function(e){0===e.error&&(t.$Message.success("确认付款操作成功"),t.handleRefresh())}))},onCancel:function(){}})},confirmTakeGoods:function(){var t=this;this.$Modal.confirm({title:"提示",content:"确认此单已收到货了吗？",okText:"确认收货",onOk:function(){t.$api.orderApi.setFinishOrder({order_id:t.data.id}).then((function(e){0===e.error&&(t.$Message.success("订单确认收货成功"),t.handleRefresh())}))},onCancel:function(){}})},handleRefresh:function(){this.$emit("on-refresh")},jumpEOrder:function(){var t="/eOrder/orderPrint/index?order_no=".concat(this.data.order_no);this.$utils.openNewWindowPage(t)},handlePrinter:function(){var t=this;this.$api.printerApi.printerList({only_list:1,status:1}).then((function(e){0==e.error&&(e.data.length<=0?t.toPrinterList():(t.printerList=e.data,t.checkPrinter(t.data.id)))}))},toPrinterList:function(){var t=this;this.$Modal.confirm({title:"提示",content:"您当前还未配置打印机，立即前往进行配置。",okText:"立即配置",cancelText:"暂不配置",onOk:function(){t.$utils.openNewWindowPage("/printer/manage/list")},onCancel:function(){}})},getPrinterTemList:function(){var t=this;this.$api.printerApi.getPrinterTemList({only_list:1}).then((function(e){0==e.error&&(t.templateList=e.data,t.printerModal=!0)}))},checkPrinter:function(t){var e=this;this.$api.printerApi.executePrinter({order_id:t,is_check:1}).then((function(a){0==a.error&&(e.printerModelData.order_id=t,(null===a||void 0===a?void 0:a.message)>0?e.checkPrinterNum(a.message):e.getPrinterTemList())}))},checkPrinterNum:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"您已经打印".concat(t,"次，是否继续打印"),okText:"立即打印",cancelText:"暂不打印",onOk:function(){e.getPrinterTemList()},onCancel:function(){}})},printerCancel:function(){this.printerModal=!1},printerOk:function(){var t=this;this.$refs["form"].validate((function(e){e&&t.$api.printerApi.executePrinter(t.printerModelData).then((function(e){0==e.error&&t.$Message.success("打印成功"),t.printerModal=!1}))}))},hasOrderSheet:function(t){var e;return 1===(null===(e=t.icon)||void 0===e?void 0:e.electronic_sheet)},isCheck:function(){var t,e=this;this.virtual=(null===(t=this.data)||void 0===t?void 0:t.virtual_account_data)||[],this.virtual.length>0&&this.virtual.forEach((function(t,a){e.$set(t,"ischeck",!1);var i=JSON.parse(t.config),n=JSON.parse(t.data);i.length>0&&i.forEach((function(a,i){e.$set(a,"ischeck",!1),n["value".concat(i+1)].length>28&&e.$set(t,"is_wrap",!0)})),t.config=i,t.data=n,0==a&&(e.virtual_setting=(0,s.default)({},t))}))},deliveryContent:function(){this.deliverModal=!0},goAddress:function(t){t.indexOf("http://")>-1||t.indexOf("https://")>-1?window.open(t):window.open("http://"+t)},jumpPage:function(t){this.$utils.openNewWindowPage("/member/detail",{id:t})}}};e.default=_},3206:function(t,e,a){"use strict";var i=a("a237");a.o(i,"render")&&a.d(e,"render",(function(){return i["render"]})),a.o(i,"staticRenderFns")&&a.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]}))},3268:function(t,e,a){"use strict";a.r(e);var i=a("ca3e"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},3380:function(t,e,a){"use strict";a("9d23")},"44ad7":function(t,e,a){"use strict";a("cd93")},"54a1":function(t,e,a){"use strict";var i=a("80dc");a.o(i,"render")&&a.d(e,"render",(function(){return i["render"]})),a.o(i,"staticRenderFns")&&a.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]}))},6580:function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3");var i={name:"index",props:{data:{type:Object,default:function(){}},price:{type:[Number,String]},id:{type:[Number,String]}},data:function(){return{value:!1,model:{},cancelText:"取消",isOk:!0}},computed:{noManagePerm:function(){return!this.$getPermMap("order.op.change_invoice_status")}},methods:{setValue:function(){this.value=!this.value,this.value&&("1"==this.data.status?(this.isOk=!1,this.cancelText="关闭"):(this.isOk=!0,this.cancelText="取消"))},handleCancel:function(){this.setValue()},handleOk:function(){var t=this;this.$api.orderApi.changeInvoiceStatus({order_id:this.id}).then((function(e){0===e.error&&(t.$Message.success("开票成功"),t.setValue(),t.$emit("on-refresh"))}))}}};e.default=i},"7cc5":function(t,e,a){"use strict";a.r(e);var i=a("54a1"),s=a("3268");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("44ad7");var r=a("2877"),o=Object(r["a"])(s["default"],i["render"],i["staticRenderFns"],!1,null,"588be422",null);e["default"]=o.exports},"808f":function(t,e,a){},"80dc":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var a=function(){var t=this,e=t._self._c;return e("kdx-modal-frame",{attrs:{title:"发货内容",width:700,"is-cancel":!1},on:{"on-ok":t.handleOk,"on-cancel":t.handleCancel},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[e("div",{staticClass:"delivery"},[e("div",{staticClass:"delivery-content"},[e("div",{staticClass:"table"},[e("div",{staticClass:"theader"},[e("ul",[e("li",[t._v("序号")]),e("li",[t._v("卡密信息")])])]),e("div",{staticClass:"tbody"},[t._l(t.virtual,(function(a,i){return e("ul",{key:i,staticClass:"tr"},[e("li",[e("div",{staticClass:"text"},[t._v(t._s(i+1))])]),e("li",[e("div",{staticClass:"account-info"},t._l(a.config,(function(i,s){return e("div",{key:s,staticClass:"content"},[e("div",{staticClass:"contLi"},[e("span",{staticClass:"liTit"},[t._v(t._s(i.key)+"：")]),e("span",{staticClass:"liCont"},[t._v(t._s(a.data["value".concat(s+1)]))])])])})),0)])])}))],2)])])])])};e.render=a;var i=[];e.staticRenderFns=i},8594:function(t,e,a){},"92ec":function(t,e,a){"use strict";a.r(e);var i=a("fb08"),s=a("0be0");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("3380");var r=a("2877"),o=Object(r["a"])(s["default"],i["render"],i["staticRenderFns"],!1,null,"4f6df3ff",null);e["default"]=o.exports},"940a":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var a=function(){var t=this,e=t._self._c;return e("kdx-modal-frame",{attrs:{title:"发票信息",width:700,okText:"确认开票",cancelText:t.cancelText,isOk:t.isOk,"disabled-ok":t.noManagePerm},on:{"on-cancel":t.handleCancel,"on-ok":t.handleOk},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[e("Form",{ref:"form",staticClass:"order-invoice-info",attrs:{"label-width":100}},[e("FormItem",{staticClass:"r-form-item-text",attrs:{label:"发票类型："}},["1"==t.data.is_electronic||"0"==t.data.is_electronic?e("span",[t._v("纸质发票")]):"2"==t.data.is_electronic?e("span",[t._v("电子发票")]):t._e()]),e("FormItem",{staticClass:"r-form-item-text",attrs:{label:"抬头类型："}},["1"==t.data.is_company?e("span",[t._v("个人")]):"2"==t.data.is_company?e("span",[t._v("企业")]):e("span",[t._v("-")])]),e("FormItem",{staticClass:"r-form-item-text",attrs:{label:"发票抬头："}},[e("span",[t._v(t._s(t.data.title))])]),e("FormItem",{staticClass:"r-form-item-text",attrs:{label:"发票金额："}},[e("span",{staticClass:"money"},[t._v("￥"+t._s(t.price))])]),e("FormItem",{staticClass:"r-form-item-text",attrs:{label:"税号："}},[e("span",[t._v(t._s(t.data.number))])]),"2"==t.data.is_electronic?e("FormItem",{staticClass:"r-form-item-text",attrs:{label:"邮箱地址："}},[e("span",[t._v(t._s(t.data.address||"-"))])]):t._e()],1)],1)};e.render=a;var i=[];e.staticRenderFns=i},"9d23":function(t,e,a){},"9d31":function(t,e,a){"use strict";a("8594")},a237:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-detail"},[e("Card",{attrs:{shadow:"",bordered:!1}},[e("Steps",{attrs:{current:t.current,status:t.step.status}},t._l(t.stepList,(function(t,a){return e("Step",{key:a,attrs:{title:t.title,content:t.content}})})),1)],1),e("div",{staticClass:"order-detail-content"},[e("order-status",{attrs:{data:t.data},on:{"on-refresh":t.getData}})],1),e("div",{staticClass:"order-detail-con"},[e("ul",{staticClass:"detail_tab"},[e("li",{staticClass:"tab",class:{active:0==t.clickIndex},on:{click:function(e){return t.clickTab(0)}}},[t._v("商品信息")]),t.commission_info?e("li",{staticClass:"tab",class:{active:1==t.clickIndex},on:{click:function(e){return t.clickTab(1)}}},[t._v("分销商信息")]):t._e(),t.form.content?e("li",{staticClass:"tab",class:{active:2==t.clickIndex},on:{click:function(e){return t.clickTab(2)}}},[t._v("表单信息")]):t._e()]),t.form.content&&2==t.clickIndex?e("form-info",{attrs:{data:t.form.content,isShow:!1}}):t._e(),t.commission_info&&1==t.clickIndex?e("distributor-information",{attrs:{info:t.commission_info},on:{edit:t.editCommision}}):t._e(),0==t.clickIndex?e("order-detail-list",{attrs:{data:t.data},on:{"on-refresh":t.getData}}):t._e()],1),e("commission-edit",{attrs:{orderId:t.id,orderNo:t.orderNo,memberId:t.member_id,visible:t.visible},on:{"update:visible":function(e){t.visible=e},"on-success":t.getData}}),t._t("default")],2)};e.render=a;var i=[];e.staticRenderFns=i},ad74:function(t,e,a){"use strict";a.r(e);var i=a("e9f1"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},b506:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAABIUExURUdwTP9SR/9bR/9YR/81U/9PSv9ITf9LTP9MS/9ZRv89Uf8/UP9aR/8/UP9XSP9bRv8+Uf83U/9JTf9OS/9DT/9TSf9YR/9hRLaFYMAAAAAQdFJOUwAQ37tfe0ifJV/nvO/Pz498J3OXAAAA5klEQVQ4y9XT3RaDIAgAYNQw1H6sFr7/m07KrZ+trjduOsl3FIMA/isI60NUdMo38zxN0ziOj0eMQw5/FIZnEQvIQog/AM3bDgUMdpdXfAIiqh1A/jxiB1TPd0Bhw2z0Zw0FkE6pceAuQc73CgR8P8KmhPK8BC4lV8B0BbR8e30DJK6v6db0PeAV3Bxh0PW67DB6rLDdmkVJ7kmWqFt3aJXKw4IZlIEwqZNeNZZWQNbHiBCG+tWK2pHU0IEREMBLDVQFtTXbLUUCuRwES5H2ME4qt5PN6y1kcBpIsJrNe4lCbO0P/W9Pxf0gPf0osDoAAAAASUVORK5CYII="},c70f:function(t,e,a){"use strict";a.r(e);var i=a("6580"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},ca3e:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"index",props:{value:{type:Boolean,default:!1},virtual:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{handleOk:function(){this.$emit("input",!1)},handleCancel:function(){this.$emit("input",!1)}}};e.default=a},cd93:function(t,e,a){},d0774:function(t,e,a){"use strict";a("808f")},daa0:function(t,e,a){"use strict";a.r(e);var i=a("3206"),s=a("ad74");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("9d31");var r=a("2877"),o=Object(r["a"])(s["default"],i["render"],i["staticRenderFns"],!1,null,"40cd6208",null);e["default"]=o.exports},e780:function(t,e,a){"use strict";a.r(e);var i=a("1915"),s=a("c70f");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("d0774");var r=a("2877"),o=Object(r["a"])(s["default"],i["render"],i["staticRenderFns"],!1,null,"3a80c0c5",null);e["default"]=o.exports},e9f1:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(a("2909")),n=i(a("5530"));a("4de4"),a("d3b7"),a("ac1f"),a("5319");var r=i(a("92ec")),o=i(a("f8a2")),d=i(a("ca29")),c=i(a("1c03")),l=i(a("fa75")),u={name:"index",components:{OrderStatus:r.default,OrderDetailList:d.default,DistributorInformation:o.default,CommissionEdit:c.default,FormInfo:l.default},data:function(){return{current:0,step:{lastTitle:"订单完成",lastIcon:"",status:"finish"},data:{},form:{},id:"",visible:!1,stepList:[],orderNo:"",member_id:"",commission_info:{1:{commission:"0",level:"1",nickname:""},2:{commission:"0",level:"2",nickname:""}},clickIndex:0}},methods:{initStep:function(){var t,e,a=[{title:"买家下单",content:this.getTime(this.data.created_at),show:!0},{title:"商家发货",content:this.getTime(this.data.send_time),show:!0},{title:"订单完成",content:this.getTime(this.data.finish_time),show:-1!=(null===(t=this.data)||void 0===t?void 0:t.status)},{title:"订单关闭",content:this.getTime(this.data.finish_time),show:-1==(null===(e=this.data)||void 0===e?void 0:e.status)}];this.stepList=a.filter((function(t){return t.show})),this.getCurrent()},getCurrent:function(){var t;switch(null===(t=this.data)||void 0===t?void 0:t.status){case"0":break;case"10":case"11":case"20":this.current=2;break;case"30":this.current=3;break;case"-1":this.step.status="error",this.current=3}},getData:function(){var t=this;this.$api.orderApi.getOrderDetail({order_id:this.id}).then((function(e){var a,i;0===e.error&&(t.data=e,t.orderNo=e.order_no,e.commission_info?t.commission_info=(0,n.default)((0,n.default)({},t.commission_info),e.commission_info):t.commission_info=null,t.member_id=e.member_id,t.form={id:null===(a=e.form)||void 0===a?void 0:a.id,content:null!==e&&void 0!==e&&null!==(i=e.form)&&void 0!==i&&i.content?JSON.parse(e.form.content):""},t.initStep(),t.openDetailPage(e.status))}))},getTime:function(t,e){return"error"===e&&(t=this.data.cancel_time),t&&new Date(t).getTime()?t:""},openDetailPage:function(t){var e="";"10"==t||"11"==t?e="/order/detail/send":"0"==t?e="/order/detail/payment":"20"==t?e="/order/detail/receive":"30"==t?e="/order/detail/achieve":"-1"==t&&(e="/order/detail/close"),this.$route.path!==e&&this.$router.replace({path:e,query:{id:this.id}})},editCommision:function(){this.visible=!0},changeGoodsInfo:function(t){this.data.orderGoods=(0,s.default)(t)},clickTab:function(t){this.clickIndex=t}},watch:{"$route.path":{handler:function(){this.id=this.$route.query.id,this.getData()},immediate:!0}}};e.default=u},eb99:function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0,a("b0c0");var i=function(){var t=this,e=t._self._c;return e("div",[e("Row",{staticClass:"order-information",attrs:{type:"flex"}},[e("Col",{staticClass:"status-col",attrs:{span:"8"}},["0"===t.data.status?[e("p",{staticClass:"title",staticStyle:{"padding-left":"0"}},[t._v(" 当前订单状态 ")]),e("p",{staticClass:"big-title"},[e("img",{attrs:{src:t.image.payment,alt:""}}),e("span",{staticClass:"title"},[t._v("待付款")])]),e("Button",{staticClass:"status-btn",attrs:{type:"primary",disabled:!t.permMap.pay},on:{click:t.confirmPayment}},[t._v(" 确认付款 ")]),e("kdx-hint-text",[t._v(" 友情提示：如果无法进行发货，请及时联系买家 ")]),e("div",{staticClass:"footer-btn"},[e("Button",{staticClass:"default-primary",attrs:{disabled:!t.permMap.change_price},on:{click:t.changePrice}},[t._v(" 订单改价 ")]),"20"!==t.data.dispatch_type&&"2"!=t.goods_type&&"5"!=t.goods_type&&"6"!=t.goods_type&&"40"!=t.data.order_type?e("Button",{staticClass:"default-primary",attrs:{disabled:!t.permMap.edit_address},on:{click:t.editReceiveInfo}},[t._v(" 修改收货信息 ")]):t._e(),e("Button",{staticClass:"default-primary",attrs:{disabled:!t.permMap.close},on:{click:t.closeOrder}},[t._v(" 关闭订单 ")])],1)]:"10"===t.data.status?[e("p",{staticClass:"title",staticStyle:{"padding-left":"0"}},[t._v(" 当前订单状态 ")]),e("p",{staticClass:"big-title"},[e("img",{attrs:{src:t.image.send,alt:""}}),e("span",{staticClass:"title"},[t._v("待发货")])]),[e("Button",{staticClass:"status-btn",attrs:{disabled:!t.permMap.send,type:"primary"},on:{click:t.sendGoods}},[t._v("确认发货")]),e("kdx-hint-text",[t._v(" 友情提示：如果无法进行发货，请及时联系买家 ")])],e("div",{staticClass:"footer-btn"},["2"!=t.data.goods_info[0].type&&"40"!=t.data.order_type?e("Button",{staticClass:"default-primary",attrs:{disabled:!t.permMap.edit_address},on:{click:t.editReceiveInfo}},[t._v(" 修改收货信息 ")]):t._e(),"3"!=t.data.pay_type&&"1"!=t.data.pay_type?e("Button",{staticClass:"default-primary",attrs:{disabled:!t.permMap.close_refund},on:{click:t.generalRefund}},[t._v(" 退款 ")]):t._e()],1)]:"11"===t.data.status?[e("p",{staticClass:"title",staticStyle:{"padding-left":"0"}},[t._v(" 当前订单状态 ")]),e("p",{staticClass:"big-title"},[e("img",{attrs:{src:t.image.send,alt:""}}),e("span",{staticClass:"title"},[t._v("部分发货")])]),e("Button",{staticClass:"status-btn",attrs:{type:"primary",disabled:!t.permMap.send},on:{click:t.sendGoods}},[t._v("确认发货")]),e("kdx-hint-text",[t._v(" 友情提示：如果无法进行发货，请及时联系买家 ")]),e("div",{staticClass:"footer-btn"},[e("Button",{staticClass:"default-primary",attrs:{disabled:!t.permMap.edit_address},on:{click:t.editReceiveInfo}},[t._v(" 修改收货信息 ")]),"3"!=t.data.pay_type&&"1"!=t.data.pay_type?e("Button",{staticClass:"default-primary",attrs:{disabled:!t.permMap.close_refund},on:{click:t.generalRefund}},[t._v(" 退款 ")]):t._e()],1)]:"20"===t.data.status?[e("p",{staticClass:"title",staticStyle:{"padding-left":"0"}},[t._v(" 当前订单状态 ")]),e("p",{staticClass:"big-title"},[e("img",{attrs:{src:t.image.put,alt:""}}),e("span",{staticClass:"title"},[t._v(t._s("待收货"))])]),e("Button",{staticClass:"status-btn",attrs:{type:"primary",disabled:!t.permMap.finish},on:{click:t.confirmTakeGoods}},[t._v(" 确认收货 ")]),e("kdx-hint-text",[t._v(" 友情提示：如果无法进行发货，请及时联系买家 ")]),e("div",{staticClass:"footer-btn"},[e("div",{staticStyle:{display:"inline-block"}},["0"!==t.goods_type&&"7"!==t.goods_type||"20"==t.data.scene?t._e():e("Button",{staticClass:"default-primary",attrs:{disabled:!t.permMap.cancel_send},on:{click:t.cancelSendGoods}},[t._v(" 取消发货 ")]),"0"!==t.goods_type&&"7"!==t.goods_type||"40"==t.data.order_type?t._e():e("Button",{staticClass:"default-primary",attrs:{disabled:!t.permMap.edit_address},on:{click:t.editReceiveInfo}},[t._v(" 修改收货信息 ")]),"3"==t.data.pay_type||"1"===t.goods_type?e("Button",{staticClass:"default-primary",attrs:{disabled:!t.permMap.close_refund},on:{click:t.generalRefund}},[t._v("退款")]):t._e()],1),["20"!=t.data.scene?e("Button",{staticClass:"default-primary",attrs:{disabled:!t.permMap.close_refund},on:{click:t.generalRefund}},[t._v("退款")]):t._e()]],2)]:"30"===t.data.status?[e("p",{staticClass:"title",staticStyle:{"padding-left":"0"}},[t._v(" 当前订单状态 ")]),e("p",{staticClass:"big-title finish"},[e("span",{staticClass:"iconfont icon-zujian-yingxiaoxinxi-duihao"}),e("span",{staticClass:"title"},[t._v("交易完成")])])]:"-1"===t.data.status?[e("p",{staticClass:"title",staticStyle:{"padding-left":"0"}},[t._v(" 当前订单状态 ")]),e("p",{staticClass:"big-title close"},[e("span",{staticClass:"iconfont icon-del"}),e("span",{staticClass:"title"},[t._v("交易关闭")])]),e("p",{staticClass:"time-out word-break"},[t._v(" "+t._s(t.data.cancel_reason||t.data.refund_reason||"")+" ")])]:t._e(),t.showPrintText?e("p",{staticClass:"title",staticStyle:{padding:"30px 0 0 0"}},[t._v("打印")]):t._e(),e("div",{staticClass:"footer-btn"},[t.hasOrderSheet(t.data)&&!t.data.not_show_express?e("Button",{staticClass:"default-primary",attrs:{disabled:t.noManagePerm},on:{click:t.jumpEOrder}},[t._v("电子面单")]):t._e(),t.permMap.printer?e("Button",{staticClass:"default-primary",on:{click:t.handlePrinter}},[t._v("小票")]):t._e(),t.hasOrderSheet(t.data)&&!t.data.not_show_express?e("Button",{staticClass:"default-primary",attrs:{disabled:t.noManagePerm},on:{click:t.jumpEOrder}},[t._v("发货单")]):t._e()],1)],2),e("Col",{attrs:{span:"8"}},[e("p",{staticClass:"title"},[t._v(" 发货信息 ")]),e("Form",{attrs:{"label-width":100}},[e("FormItem",{attrs:{label:"配送方式："}},[e("div",{staticClass:"dispatch-type flex"},["50"==t.data.dispatch_type?[e("span",{staticClass:"text"},[t._v("-")])]:"0"===t.goods_type||"7"===t.goods_type||"1"==t.goods_type&&"20"==t.data.dispatch_type||"5"==t.goods_type&&"20"==t.data.dispatch_type?[e("img",{staticClass:"dispatch_img",attrs:{src:t.getDeliveryImg}}),e("span",{staticClass:"text"},[t._v(t._s(t.getDispatch))])]:"1"===t.goods_type&&"1"===t.auto_deliver?[e("img",{staticClass:"dispatch_img",attrs:{src:t.getDeliveryImg}}),e("span",{staticClass:"text"},[t._v("自动发货（虚拟物品）")])]:"2"===t.goods_type&&"1"===t.auto_deliver?[e("img",{staticClass:"dispatch_img",attrs:{src:t.getDeliveryImg}}),e("span",{staticClass:"text"},[t._v("自动发货（虚拟卡密）")])]:[t._v("-")]],2)]),t.getDeliverName&&t.getDeliverTime?e("FormItem",{attrs:{label:"".concat(t.getDeliverName,"：")}},[t._v(" "+t._s(t.getDeliverTime)+" ")]):t._e(),"0"===t.goods_type?e("FormItem",{attrs:{label:"收货人姓名："}},[t.data.buyer_name?[t._v(" "+t._s(t.data.buyer_name)+" ")]:[t._v(" - ")]],2):t._e(),"0"===t.goods_type?e("FormItem",{attrs:{label:"联系方式："}},[t.data.buyer_mobile?[e("span",[t._v(t._s(t.data.buyer_mobile))]),e("kdx-copy-text",{attrs:{text:t.data.buyer_mobile}},[e("Button",{attrs:{type:"text",size:"small"}},[t._v("复制")])],1)]:[t._v(" - ")]],2):t._e(),"0"===t.goods_type?e("FormItem",{attrs:{label:"收货地址："}},[e("div",{staticClass:"paragraph"},[t.addressDetail?[e("span",[t._v(t._s(t.addressDetail))]),e("kdx-copy-text",{attrs:{text:t.addressDetail}},[e("Button",{attrs:{type:"text",size:"small"}},[t._v("复制")])],1)]:[t._v("-")]],2)]):t._e(),"0"===t.goods_type?e("FormItem",{attrs:{label:"物流单号："}},[e("div",{staticClass:"paragraph"},[t.data.package_info?[e("ul",{staticClass:"logistics"},t._l(t.data.package_info,(function(a,i){return e("li",{key:i},[1===t.data.send_type?e("div",{staticClass:"tag"},[t._v(t._s("包裹".concat(i+1)))]):t._e(),e("div",{staticClass:"name"},[t._v(t._s(a.express_com))]),e("div",{staticClass:"number"},[t._v(t._s(a.express_sn))]),e("kdx-copy-text",{attrs:{text:a.express_sn}},[e("Button",{attrs:{type:"text",size:"small"}},[t._v("复制")])],1)],1)})),0)]:[t._v("-")]],2)]):t._e(),"1"===t.goods_type&&t.auto_deliver_content?e("FormItem",{attrs:{label:"发货内容："}},[e("div",{staticClass:"paragraph"},[[e("span",[t._v(t._s(t.auto_deliver_content))]),e("kdx-copy-text",{attrs:{text:t.auto_deliver_content}},[e("Button",{attrs:{type:"text",size:"small"}},[t._v("复制")])],1)]],2)]):t._e(),"2"===t.goods_type?e("FormItem",{attrs:{label:"发货内容："}},[e("div",{staticClass:"paragraph"},[[t.virtual_setting.config?e("div",[e("span",{staticClass:"goAddress",on:{click:t.deliveryContent}},[t._v("查看发货内容")])]):e("span",[t._v("-")])]],2)]):t._e(),"2"===t.goods_type?e("FormItem",{staticClass:"overText",attrs:{label:t.virtual_setting.use_address&&"0"!=t.virtual_setting.use_address?t.virtual_setting.use_address_title:"使用地址："}},[e("div",{staticClass:"paragraph"},["0"!=t.virtual_setting.use_address?[e("span",[t._v("： "+t._s(t.virtual_setting.use_address_address||"-"))]),e("span",{staticClass:"goAddress",on:{click:function(e){return t.goAddress(t.virtual_setting.use_address_address)}}},[t._v("查看地址")])]:[e("span",[t._v("-")])]],2)]):t._e(),"2"===t.goods_type?e("FormItem",{attrs:{label:"邮箱地址："}},[e("div",{staticClass:"paragraph"},[[e("span",[t._v(t._s(t.data.to_mailer||"-"))])]],2)]):t._e(),e("FormItem",{attrs:{label:"买家备注："}},[e("span",{staticClass:"paragraph"},[t.data.buyer_remark?[t._v(" "+t._s(t.data.buyer_remark)+" ")]:[t._v(" - ")]],2)]),e("FormItem",{attrs:{label:"发票信息："}},[t.isInvoiceInfo?[e("Button",{attrs:{type:"text"},on:{click:t.packageInvoiceInfo}},[t._v("查看发票信息")]),"0"==t.data.invoice_info.status?e("span",{staticClass:"no-invoice"},[e("span",[t._v("未开票")])]):t._e()]:[t._v(" 无 ")]],2)],1)],1),e("Col",{attrs:{span:"8"}},[e("p",{staticClass:"title"},[t._v(" 订单信息 ")]),e("Form",{attrs:{"label-width":100}},[e("FormItem",{attrs:{label:"会员："}},[e("div",{staticClass:"vip-name line-hide",on:{click:function(e){return t.jumpPage(t.data.member_id)}}},[t._v(t._s(t.data.member_nickname))])]),e("FormItem",{attrs:{label:"订单类型："}},[2==t.data.activity_type?e("span",{staticClass:"flex"},[t.is_Seckill?e("span",{staticClass:"iconfont icon-dingdanliebiao-miaosha seckill-icon"}):t._e(),t._v(" 秒杀订单 ")]):3==t.data.activity_type?e("span",{staticClass:"flex"},[e("span",{staticClass:"iconfont icon-yingyong-pintuan"}),t._v(" 拼团订单 ")]):e("span",[t._v("普通订单")])]),e("FormItem",{staticClass:"order-no",attrs:{label:"订单编号："}},[e("div",{staticClass:"flex"},["20"==t.data.create_from?e("span",{staticClass:"iconfont icon-weixin icon"}):t._e(),"21"==t.data.create_from?e("span",{staticClass:"iconfont icon-weixinxiaochengxu icon"}):"30"==t.data.create_from?e("kdx-svg-icon",{staticClass:"iconfont",attrs:{type:"icon-qudao-toutiao2"}}):"32"==t.data.create_from?e("kdx-svg-icon",{staticClass:"iconfont",attrs:{type:"icon-qudao-toutiaojisuban"}}):"31"==t.data.create_from?e("kdx-svg-icon",{staticClass:"iconfont",attrs:{type:"icon-douyin"}}):t._e(),"10"==t.data.create_from?e("span",{staticClass:"iconfont icon-H icon"}):"70"===t.data.create_from?e("span",{staticClass:"iconfont icon-PCduan",staticStyle:{color:"#12aa9c","font-size":"16px"}}):t._e(),e("span",[t._v(t._s(t.data.order_no))]),e("kdx-copy-text",{attrs:{text:t.data.order_no}},[e("Button",{attrs:{type:"text",size:"small"}},[t._v("复制")])],1)],1)]),e("FormItem",{attrs:{label:"支付方式："}},["1"===t.data.pay_type?[e("payment-tag",{attrs:{type:"houtai"}})]:"2"===t.data.pay_type?[e("payment-tag",{attrs:{type:"balance"}})]:"3"===t.data.pay_type?[e("payment-tag",{attrs:{type:"payDelivery"}})]:"20"===t.data.pay_type?[e("payment-tag",{attrs:{type:"weichat"}})]:"30"===t.data.pay_type?[e("payment-tag",{attrs:{type:"alipay"}})]:"40"===t.data.pay_type||"41"===t.data.pay_type?[e("payment-tag",{attrs:{type:"byte_dance"}})]:e("span",[e("payment-tag",{attrs:{type:"noPay",status:t.data.status}})],1)],2),e("FormItem",{attrs:{label:"交易单号："}},[t.data.trade_no&&"0"!==t.data.trade_no?[e("span",[t._v(t._s(t.data.trade_no))]),e("kdx-copy-text",{attrs:{type:"qrCode",text:t.data.trade_no}},[e("Button",{attrs:{type:"text",size:"small"}},[t._v("复制")])],1)]:[t._v(" - ")]],2),e("FormItem",{attrs:{label:"外部交易单号："}},[t.data.out_trade_no&&"0"!==t.data.out_trade_no?[e("span",[t._v(t._s(t.data.out_trade_no))]),e("kdx-copy-text",{attrs:{type:"qrCode",text:t.data.out_trade_no}},[e("Button",{attrs:{type:"text",size:"small"}},[t._v("复制")])],1)]:[t._v(" - ")]],2),t.data.seller_remark?e("FormItem",{attrs:{label:"商家备注："}},[e("span",{staticClass:"paragraph"},[t._v(" "+t._s(t.data.seller_remark)+" ")])]):t._e()],1)],1)],1),e("send-goods",{ref:"send_goods",attrs:{id:t.modal.id,dispatch_type:t.modal.dispatch_type},on:{"on-refresh":t.handleRefresh}}),e("edit-receiving-goods",{ref:"edit_receiving_goods",attrs:{id:t.modal.id,dispatch_type:t.modal.dispatch_type},on:{"on-refresh":t.handleRefresh}}),e("change-price",{ref:"change_price",attrs:{id:t.modal.id},on:{"on-refresh":t.handleRefresh}}),e("close-order",{ref:"close_order",attrs:{visible:t.modal.closeOrder,id:t.modal.id,title:t.modal.title},on:{"on-refresh":t.handleRefresh}}),e("cancel-send-goods",{ref:"cancel_send_goods",attrs:{id:t.modal.id},on:{"on-refresh":t.handleRefresh}}),e("invoice-info",{ref:"invoice_info",attrs:{data:t.invoiceInfo.data,price:t.invoiceInfo.price,id:t.modal.id},on:{"on-refresh":t.handleRefresh}}),e("refund-modal",{ref:"refund_modal",attrs:{id:t.modal.id},on:{"on-refresh":t.handleRefresh}}),e("kdx-modal-frame",{attrs:{title:"请选择相关信息",width:610},on:{"on-cancel":t.printerCancel,"on-ok":t.printerOk},model:{value:t.printerModal,callback:function(e){t.printerModal=e},expression:"printerModal"}},[e("div",{staticClass:"printer-modal"},[e("Form",{ref:"form",attrs:{"label-width":120,model:t.printerModelData,rules:t.rules},nativeOn:{submit:function(t){t.preventDefault()}}},[e("FormItem",{attrs:{label:"打印机：",prop:"printer_id"}},[e("Select",{staticClass:"width-340",attrs:{placeholder:"请选择打印机"},model:{value:t.printerModelData.printer_id,callback:function(e){t.$set(t.printerModelData,"printer_id",e)},expression:"printerModelData.printer_id"}},t._l(t.printerList,(function(a){return e("Option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])})),1)],1),e("FormItem",{attrs:{label:"打印模板：",prop:"template_id"}},[e("Select",{staticClass:"width-340",attrs:{placeholder:"请选择打印模板"},model:{value:t.printerModelData.template_id,callback:function(e){t.$set(t.printerModelData,"template_id",e)},expression:"printerModelData.template_id"}},t._l(t.templateList,(function(a){return e("Option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])})),1)],1)],1)],1)]),e("delivery-content",{attrs:{virtual:t.virtual},model:{value:t.deliverModal,callback:function(e){t.deliverModal=e},expression:"deliverModal"}})],1)};e.render=i;var s=[];e.staticRenderFns=s},fb08:function(t,e,a){"use strict";var i=a("eb99");a.o(i,"render")&&a.d(e,"render",(function(){return i["render"]})),a.o(i,"staticRenderFns")&&a.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]}))}}]);