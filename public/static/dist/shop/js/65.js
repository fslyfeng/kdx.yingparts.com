(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[65],{"01da":function(t,e,s){},"09b5":function(t,e,s){"use strict";s("01da")},1817:function(t,e,s){"use strict";s.r(e);var a=s("c235"),n=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);e["default"]=n.a},"22a3":function(t,e,s){},"26e9":function(t,e,s){"use strict";var a=s("68aa");s.o(a,"render")&&s.d(e,"render",(function(){return a["render"]})),s.o(a,"staticRenderFns")&&s.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"3be9":function(t,e,s){"use strict";s.r(e);var a=s("c4d8"),n=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);e["default"]=n.a},"503e":function(t,e,s){"use strict";var a=s("6c94");s.o(a,"render")&&s.d(e,"render",(function(){return a["render"]})),s.o(a,"staticRenderFns")&&s.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"532e":function(t,e,s){"use strict";s("fd21")},"5e76":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"progress-bar"},[e("div",{staticClass:"progress-bg"},[e("div",{staticClass:"progress",class:{success:100===t.progress},style:{width:"".concat(t.progress,"%")}})]),e("div",{staticClass:"num",class:{success:100===t.progress}},[e("span",{staticClass:"current"},[t._v(t._s(t.current))]),t._v(" / "),e("span",{staticClass:"total"},[t._v(t._s(t.total))])])])};e.render=s;var a=[];e.staticRenderFns=a},6431:function(t,e,s){},"68aa":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"order-detail"},[e("div",{staticClass:"steps"},[e("Steps",{attrs:{current:t.current}},[e("Step",{attrs:{title:"已开团",content:t.info.create_time}}),e("Step",{attrs:{title:t.lastStep,status:t.status,content:t.lastTime}})],1)],1),e("div",{staticClass:"box"},[e("order-status",{attrs:{data:t.info,"user-list":t.list},on:{"on-change":t.confirmGroups}}),e("order-list",{attrs:{data:t.table.list,info:t.info},on:{"on-order":t.routeOrder}})],1)])};e.render=s;var a=[];e.staticRenderFns=a},"6c94":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-status-box"},[e("ul",[e("li",{staticClass:"order-status"},[e("div",{staticClass:"title"},[t._v(" 当前拼团状态 ")]),e("div",{staticClass:"status"},[e("div",{staticClass:"icon"},[1==t.data.success?e("span",{staticClass:"iconfont icon-zujian-yingxiaoxinxi-duihao success-color"}):e("span",{staticClass:"iconfont icon-pintuan2-1"})]),0==t.data.success?e("div",{staticClass:"name"},[t._v(" 待成团 ")]):t._e(),1==t.data.success?e("div",{staticClass:"name success-color"},[t._v(" 已成团 ")]):t._e(),2==t.data.success?e("div",{staticClass:"name danger-color"},[t._v(" 未成团 ")]):t._e()]),0==t.data.success&&t.data.countTime?e("div",{staticClass:"surplus-time"},[t._v(" 剩余拼团时间："),e("span",{staticClass:"danger-color"},[t._v(t._s(t.data.countTime))])]):t._e(),0==t.data.success&&t.pastGroups?e("div",{staticClass:"action-btn"},[e("Button",{staticClass:"status-btn",attrs:{type:"primary"},on:{click:t.confirmGroups}},[t._v(" 确认成团 ")])],1):t._e(),2==t.data.success?e("div",{staticClass:"explain-text"},[t._v(" 团长有效期内未成团，已付款订单自动退款 ")]):t._e(),1==t.data.success?e("div",{staticClass:"explain-text"},[t._v(" 拼团成功，请及时发货 ")]):t._e()]),e("li",{staticClass:"order-info"},[e("div",{staticClass:"title"},[t._v(" 拼团信息 ")]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v(" 拼团编号： ")]),e("div",{staticClass:"content team-no"},[e("span",[t._v(t._s(t.data.team_no))]),e("kdx-copy-text",{attrs:{text:t.data.team_no}},[e("Button",{attrs:{type:"text"}},[t._v("复制")])],1)],1)]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v(" 开团时间： ")]),e("div",{staticClass:"content"},[t._v(" "+t._s(t.data.create_time)+" ")])]),e("div",{staticClass:"item group-type"},[e("div",{staticClass:"label"},[t._v(" 拼团类型： ")]),1==t.data.is_ladder?e("div",{staticClass:"content flex"},[e("span",{staticClass:"iconfont icon-yingyong-pintuan-jieti2 warning-color"}),e("span",{staticClass:"text warning-color"},[t._v("阶梯拼团 "),1==t.data.is_fictitious?e("span",[t._v("(虚拟成团)")]):t._e()])]):0==t.data.is_ladder?e("div",{staticClass:"content flex"},[e("span",{staticClass:"iconfont icon-yingyong-pintuan-putong2 brand-color"}),e("span",{staticClass:"text brand-color"},[t._v("普通拼团 "),1==t.data.is_fictitious?e("span",[t._v("(虚拟成团)")]):t._e()])]):t._e()])]),e("li",{staticClass:"order-progress"},[e("div",{staticClass:"title"},[t._v(" 拼团进度 ")]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v(" 当前进度： ")]),e("div",{staticClass:"content"},[e("progress-bar",{attrs:{current:t.data.count,total:t.data.success_num}})],1)]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v(" 拼团成员： ")]),e("div",{staticClass:"content user"},[t._l(t.userList,(function(s,a){return[a<5?e("kdx-hint-tooltip",{key:s.id,scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{key:s.id,staticClass:"header-list"},[e("img",{attrs:{src:t.$media(s.avatar),alt:""},on:{error:function(e){return t.replaceImage(e,"avatar")}}})])]},proxy:!0}],null,!0)},[e("div",{staticClass:"text"},[t._v(" "+t._s(s.order_no?s.nickname:"虚拟")+" ")])]):t._e()]})),t.userList.length>5?e("div",{staticClass:"all"},[e("span",[t._v("...")]),e("Button",{attrs:{type:"text"},on:{click:t.readAll}},[t._v("查看全部")])],1):t._e()],2)])])]),e("group-user",{ref:"group_user",attrs:{data:t.userList}})],1)};e.render=s;var a=[];e.staticRenderFns=a},"759a":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-list"},[e("div",{staticClass:"form-title"},[t._v(" 拼团订单 ")]),e("div",{staticClass:"table-list"},[e("Table",{ref:"table",attrs:{columns:t.columns,data:t.data},scopedSlots:t._u([{key:"title",fn:function(s){var a=s.row;return[e("div",{staticClass:"title-box line-hide"},[e("div",{staticClass:"icon"},["10"==a.create_from?e("span",{staticClass:"iconfont icon-H icon"}):"20"==a.create_from?e("span",{staticClass:"iconfont icon-weixin icon"}):"21"==a.create_from?e("span",{staticClass:"iconfont icon-weixinxiaochengxu icon"}):"30"==a.create_from?e("svg-icon",{staticClass:"iconfont icon",attrs:{type:"icon-qudao-toutiao2"}}):"32"==a.create_from?e("svg-icon",{staticClass:"iconfont icon",attrs:{type:"icon-qudao-toutiaojisuban"}}):"31"==a.create_from?e("svg-icon",{staticClass:"iconfont icon",attrs:{type:"icon-douyin"}}):"40"==a.create_from?e("svg-icon",{staticClass:"iconfont icon",attrs:{type:"icon-qudao-App"}}):"70"===a.create_from?e("span",{staticClass:"iconfont icon-PCduan",staticStyle:{color:"#12aa9c","font-size":"16px"}}):t._e()],1),e("div",{staticClass:"order-no line-hide",on:{click:function(e){return t.handleOrderNo(a.order_no)}}},[t._v(" "+t._s(a.order_no)+" ")])])]}},{key:"goods",fn:function(s){var a=s.row;return[e("div",{staticClass:"goods"},[e("div",{staticClass:"thumb"},[e("img",{attrs:{src:t.$media(a.thumb),alt:""},on:{error:t.replaceImage}})]),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[t._v(" "+t._s(a.title)+" ")]),a.option_title?e("div",{staticClass:"option"},[t._v(" "+t._s(a.option_title)+" ")]):t._e()])])]}},{key:"price_num",fn:function(s){var a=s.row;return[e("div",{staticClass:"price-num"},[e("div",{staticClass:"price"},[t._v(" ￥"+t._s(a.price_unit)+" ")]),e("div",{staticClass:"num"},[t._v(" X "+t._s(a.total)+" ")])])]}},{key:"create_time",fn:function(s){var a=s.row;return[e("div",{staticClass:"create-time"},[t._v(" "+t._s(a.create_time)+" ")])]}},{key:"user",fn:function(s){var a=s.row;return[e("div",{staticClass:"user"},[e("div",{staticClass:"user-name"},[t._v(" "+t._s(a.nickname)+" ")]),e("div",{staticClass:"user-tele"},[t._v(" "+t._s(a.mobile)+" ")])])]}},{key:"payment",fn:function(s){var a=s.row;return[e("div",{staticClass:"payment"},[e("div",{staticClass:"price"},[t._v(" ￥"+t._s(a.price)+" ")]),e("div",{staticClass:"freight"},[t._v(" (含运费：¥"+t._s(a.dispatch_price)+") ")])])]}},{key:"payment_type",fn:function(s){var a=s.row;return[30==a.pay_type?e("div",{staticClass:"payment-type alipay"},[e("span",{staticClass:"iconfont icon-alipay"}),e("span",[t._v("支付宝")])]):t._e(),20==a.pay_type?e("div",{staticClass:"payment-type weichat"},[e("span",{staticClass:"iconfont icon-wechatpay"}),e("span",[t._v("微信支付")])]):t._e(),2==a.pay_type?e("div",{staticClass:"payment-type balance"},[e("span",{staticClass:"iconfont icon-money-pay"}),e("span",[t._v("余额支付")])]):t._e()]}},{key:"order_status",fn:function(s){var a=s.row;return[10==a.status&&0==t.info.success?e("div",{staticClass:"order-status wait brand-color"},[t._v(" 待成团 ")]):10==a.status&&1==t.info.success?e("div",{staticClass:"order-status success warning-color"},[t._v(" 待发货 ")]):-1==a.status?e("div",{staticClass:"order-status success disabled-color"},[t._v(" 已关闭 ")]):30==a.status?e("div",{staticClass:"order-status success success-color"},[t._v(" 已完成 ")]):20==a.status&&20===+a.dispatch_type?e("div",{staticClass:"order-status success warning-color"},[t._v(" 待核销 ")]):20==a.status&&20!==+a.dispatch_type?e("div",{staticClass:"order-status success brand-color"},[t._v(" 待收货 ")]):t._e()]}}])})],1)])};e.render=s;var a=[];e.staticRenderFns=a},"78c4":function(t,e,s){"use strict";s.r(e);var a=s("f54d"),n=s("8267");for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);s("532e");var r=s("2877"),o=Object(r["a"])(n["default"],a["render"],a["staticRenderFns"],!1,null,"1e0e902c",null);e["default"]=o.exports},8267:function(t,e,s){"use strict";s.r(e);var a=s("a1d5"),n=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);e["default"]=n.a},"852e":function(t,e,s){},8889:function(t,e,s){"use strict";s.r(e);var a=s("fe3b"),n=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);e["default"]=n.a},"8a35":function(t,e,s){"use strict";s.r(e);var a=s("26e9"),n=s("8889");for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);s("c0d8");var r=s("2877"),o=Object(r["a"])(n["default"],a["render"],a["staticRenderFns"],!1,null,"5df97736",null);e["default"]=o.exports},"8bf4":function(t,e,s){"use strict";var a=s("759a");s.o(a,"render")&&s.d(e,"render",(function(){return a["render"]})),s.o(a,"staticRenderFns")&&s.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]}))},9099:function(t,e,s){var a=s("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(s("5530")),i=a(s("99d3")),r=a(s("78c4")),o=s("2f62"),c={name:"OrderStatus",components:{ProgressBar:i.default,GroupUser:r.default},props:{data:{type:Object,default:function(){}},userList:{type:Array,default:function(){return[]}}},computed:(0,n.default)((0,n.default)({},(0,o.mapGetters)("config",["getAppPermMap"])),{},{pastGroups:function(){var t,e,s,a,n=null===(t=this.$store)||void 0===t||null===(e=t.state)||void 0===e||null===(s=e.config)||void 0===s||null===(a=s.apps)||void 0===a?void 0:a.groups;return this.getAppPermMap("groups")&&!(1!=(null===n||void 0===n?void 0:n.is_forever)&&1==(null===n||void 0===n?void 0:n.about_expire)&&1!=(null===n||void 0===n?void 0:n.is_free)&&0==(null===n||void 0===n?void 0:n.shop_app_status))}}),methods:{confirmGroups:function(){this.$emit("on-change")},readAll:function(){this.$refs["group_user"].setValue()}}};e.default=c},9120:function(t,e,s){"use strict";s("6431")},"99d3":function(t,e,s){"use strict";s.r(e);var a=s("f319"),n=s("1817");for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);s("09b5");var r=s("2877"),o=Object(r["a"])(n["default"],a["render"],a["staticRenderFns"],!1,null,"7a18eecc",null);e["default"]=o.exports},"9d9d":function(t,e,s){"use strict";s.r(e);var a=s("503e"),n=s("eed1");for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);s("9120");var r=s("2877"),o=Object(r["a"])(n["default"],a["render"],a["staticRenderFns"],!1,null,"7aa85c5e",null);e["default"]=o.exports},a1d5:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={name:"GroupUser",props:{data:{type:Array,default:function(){return[]}}},data:function(){return{value:!1}},methods:{setValue:function(){this.value=!this.value}}};e.default=s},c0d8:function(t,e,s){"use strict";s("852e")},c235:function(t,e,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,s("a9e3");var a={name:"ProgressBar",props:{current:{type:[Number,String],default:0},total:{type:[Number,String],default:1}},computed:{progress:function(){return parseInt(this.current/this.total*100)}}};e.default=a},c4d8:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={name:"OrderList",props:{data:{type:Array,default:function(){return[]}},info:{type:Object,default:function(){}}},data:function(){return{columns:[{title:"订单编号",slot:"title"},{title:"商品名称",slot:"goods",minWidth:120},{title:"单价/数量",slot:"price_num",maxWidth:150},{title:"下单时间",slot:"create_time",maxWidth:200},{title:"买家",slot:"user",maxWidth:150},{title:"实付款",slot:"payment",maxWidth:250},{title:"支付方式",slot:"payment_type",maxWidth:200},{title:"订单状态",slot:"order_status",maxWidth:150}]}},methods:{handleOrderNo:function(t){this.$emit("on-order",t)}}};e.default=s},d65e:function(t,e,s){"use strict";s.r(e);var a=s("8bf4"),n=s("3be9");for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);s("de08");var r=s("2877"),o=Object(r["a"])(n["default"],a["render"],a["staticRenderFns"],!1,null,"1408f871",null);e["default"]=o.exports},de08:function(t,e,s){"use strict";s("22a3")},e782:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var s=function(){var t=this,e=t._self._c;return e("kdx-modal-frame",{attrs:{value:t.value,title:"全部团成员",width:1e3,footerHide:""},on:{"on-cancel":t.setValue}},[e("div",{staticClass:"group-user"},[e("ul",t._l(t.data,(function(s,a){return e("li",{key:a},[e("div",{staticClass:"user-avatar"},[e("img",{attrs:{src:t.$media(s.avatar),alt:""},on:{error:function(e){return t.replaceImage(e,"avatar")}}})]),e("div",{staticClass:"user-name"},[t._v(" "+t._s(s.order_no?s.nickname:"虚拟")+" ")])])})),0)])])};e.render=s;var a=[];e.staticRenderFns=a},eed1:function(t,e,s){"use strict";s.r(e);var a=s("9099"),n=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);e["default"]=n.a},f319:function(t,e,s){"use strict";var a=s("5e76");s.o(a,"render")&&s.d(e,"render",(function(){return a["render"]})),s.o(a,"staticRenderFns")&&s.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]}))},f54d:function(t,e,s){"use strict";var a=s("e782");s.o(a,"render")&&s.d(e,"render",(function(){return a["render"]})),s.o(a,"staticRenderFns")&&s.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]}))},fd21:function(t,e,s){},fe3b:function(t,e,s){var a=s("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,s("d3b7"),s("159b"),s("14d9");var n=a(s("d65e")),i=a(s("9d9d")),r={name:"index",components:{OrderList:n.default,OrderStatus:i.default},data:function(){return{info:{},list:[],table:{list:[]},id:"",loading:!1,current:1,lastStep:"待成团",lastTime:"",status:"process",countInterval:null}},mounted:function(){var t;this.id=(null===(t=this.$route.query)||void 0===t?void 0:t.id)||"",this.getData()},beforeDestroy:function(){clearInterval(this.countInterval)},methods:{getData:function(){var t=this;this.loading=!0,this.$api.groupsApi.getGroupsOrderDetail({id:this.id}).then((function(e){if(0===e.error){var s,a;t.lastStep="待成团",t.lastTime="",t.info=e.groups_detail,t.list=e.team_detail||[];var n=[];t.list.forEach((function(t){t.order_no&&n.push(t)})),t.table.list=n,t.status="process",0==(null===(s=e.groups_detail)||void 0===s?void 0:s.success)?(t.current=1,t.info.end_time&&t.setCount()):1==(null===(a=e.groups_detail)||void 0===a?void 0:a.success)?(t.current=2,t.lastStep="拼团成功",t.lastTime=t.info.success_time):(t.current=1,t.lastStep="拼团失败",t.status="error",t.lastTime=t.info.end_time)}})).finally((function(){t.loading=!1}))},setCount:function(){var t=this;clearInterval(this.countInterval),this.countDown(),this.countInterval=setInterval((function(){t.countDown()}),1e3)},countDown:function(){var t=new Date(this.info.end_time).getTime()/1e3,e=this.$utils.countDown(t,!1,!0),s=["天","时","分","秒"],a="";e?(e.forEach((function(t,e){t&&(a+=t+s[e])})),this.$set(this.info,"countTime",a)):(clearInterval(this.countInterval),this.getData())},confirmGroups:function(){var t=this;this.$Modal.confirm({title:"手动确认成团?",content:"此团下有待支付订单，确认成团后，待支付订单将自动关闭。",onOk:function(){t.$api.groupsApi.confirmGroups({id:t.id,success:1}).then((function(e){0===e.error&&(t.$Message.success("拼团成功"),t.getData())}))}})},routeOrder:function(t){this.$utils.openNewWindowPage("/order/list/all",{keywords:t,search_field:"order_no"})}}};e.default=r}}]);