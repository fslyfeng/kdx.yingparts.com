(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[85],{"04da":function(e,t,a){e.exports=a.p+"static/dist/shop/img/wechat-config2.png"},"0ed6":function(e,t,a){e.exports=a.p+"static/dist/shop/img/wechat-config3.png"},"15a3":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("b0c0");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"setting-guide"},[t("div",{staticClass:"setting-guide-item"},[t("kdx-form-title",[e._v("当前微信公众号")]),t("div",{staticClass:"flex"},[t("div",{staticClass:"wechat-box"},[t("div",{staticClass:"logo"},[t("img",{attrs:{src:e.$utils.media(e.info.logo),alt:""}})]),t("div",{staticClass:"name"},[e._v(" "+e._s(e.info.name)+" ")])])])],1),t("div",{staticClass:"setting-guide-item"},[t("kdx-form-title",[e._v("公众号设置引导")]),e._m(0),t("div",{staticClass:"guide-item"},[e._m(1),t("div",{staticClass:"nest-box"},[t("kdx-hint-alert",{attrs:{"show-icon":!1,type:"warning"}},[e._v(" *请将以下链接填入对应输入框，"),t("span",{staticClass:"danger-color"},[e._v("请将以下信息提前保存好，提交保存后此页面将不会再展示")])]),t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"URL："}},[e._v(" "+e._s(e.data.url)+" "),t("kdx-copy-text",{attrs:{text:e.data.url}},[t("Button",{attrs:{type:"text"}},[e._v("复制")])],1)],1),t("FormItem",{attrs:{label:"Token："}},[e._v(" "+e._s(e.data.token)+" "),t("kdx-copy-text",{attrs:{text:e.data.token}},[t("Button",{attrs:{type:"text"}},[e._v("复制")])],1)],1),t("FormItem",{attrs:{label:"EncodingAESKey:"}},[e._v(" "+e._s(e.data.encoding_aes_key)+" "),t("kdx-copy-text",{attrs:{text:e.data.encoding_aes_key}},[t("Button",{attrs:{type:"text"}},[e._v("复制")])],1)],1)],1),e._m(2)],1),t("div",{staticClass:"nest-box marginT-10"},[t("kdx-hint-alert",{staticClass:"marginB-10",attrs:{"show-icon":!1,type:"warning"}},[t("p",[e._v("*如果以前已填写过URL和Token,请点击[修改配置],再填写上述链接")]),t("p",[e._v("*请点击 "),t("span",{staticClass:"success-color"},[e._v("【启用】")]),e._v("，以启用服务器配置")])]),e._m(3)],1),t("div",{staticClass:"circle-num"},[e._v("2")]),t("div",{staticClass:"line-num"})])],1)])};t.render=n;var s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"guide-item"},[t("div",{staticClass:"title"},[e._v(" 第一步 登录 "),t("span",{staticClass:"success-color"},[e._v("微信公众平台")]),e._v(" ，点击左侧菜单 "),t("span",{staticClass:"success-color"},[e._v("开发 --\x3e 基本配置")])]),t("div",{staticClass:"nest-box"},[t("div",{staticClass:"image"},[t("img",{attrs:{src:a("46b6"),alt:""}})]),t("div",{staticClass:"text brand-color"},[e._v(" *如果您未成为开发者，请勾选页面上的同意协议，再点击[成为开发者]按钮 ")])]),t("div",{staticClass:"circle-num"},[e._v("1")]),t("div",{staticClass:"line-num"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"title"},[e._v(" 第二步 在 "),t("span",{staticClass:"success-color"},[e._v(" 基本配置 --\x3e 服务器配置")]),e._v(" 栏目下 "),t("span",{staticClass:"success-color"},[e._v("设置URL、Token和EncodingAESKey")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"image"},[t("img",{attrs:{src:a("04da"),alt:""}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"image"},[t("img",{attrs:{src:a("0ed6"),alt:""}})])}];t.staticRenderFns=s},"439d":function(e,t,a){"use strict";a.r(t);var n=a("b5da"),s=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=s.a},"442b":function(e,t,a){},"46b6":function(e,t,a){e.exports=a.p+"static/dist/shop/img/wechat-config1.png"},"51d2":function(e,t,a){"use strict";a.r(t);var n=a("5c1a"),s=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=s.a},"5c1a":function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a("5530"));a("b0c0"),a("d3b7");var i=a("d08c"),r=a("3191"),o=["name","type","app_id","secret","logo","qr_code","file"],c={name:"BaseInfo",data:function(){return{model:{name:"",type:"",app_id:"",secret:"",logo:"",qr_code:"",file:"",fileName:""},rules:{name:[{required:!0,message:"公众号名称必填"}],type:[{required:!0,message:"公众号类型必填"}],app_id:[{required:!0,message:"AppID必填"}],secret:[{required:!0,message:"AppSecret必填"}],logo:[{required:!0,message:"logo必填"}],qr_code:[{required:!0,message:"二维码必填"}]},typeList:[{key:10,name:"未认证订阅号"}],type:"create"}},created:function(){this.type=this.$route.query.type||"create",this.getWechatType(),"edit"===this.type&&this.getData()},methods:{selectFile:function(){this.$refs["file_input"].click()},changeFile:function(e){this.model.file=e.target.files[0],this.model.fileName=this.model.file.name,this.$refs["file_input"].value=""},validate:function(){var e=this;return new Promise((function(t){e.$refs["form"].validate((function(e){e&&t()}))}))},changeImage:function(e,t){this.model[t]=e},getParams:function(){var e=this,t=new FormData;return o.forEach((function(a){("file"!==a||e.model.file)&&t.append(a,e.model[a])})),"edit"===this.type&&t.append("edit","edit"),t},save:function(){var e=this;(0,i.uploadFile)(r.homeApi.setWechatConfig.api,this.getParams()).then((function(t){0===t.error?(e.$Message.success("保存成功"),e.$emit("on-change",e.model)):e.$Message.error(t.message)}))},getWechatType:function(){var e=this;this.$api.homeApi.getWechatType().then((function(t){0===t.error&&(e.typeList=t.data||[])}))},getData:function(){var e=this;this.$api.homeApi.getWechatConfig().then((function(t){if(0===t.error){var a=t.data.type;e.model=(0,s.default)((0,s.default)({},t.data),{},{type:+a,fileName:""})}}))}}};t.default=c},"61b1":function(e,t,a){"use strict";a.r(t);var n=a("94cf"),s=a("439d");for(var i in s)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(i);a("ae16");var r=a("2877"),o=Object(r["a"])(s["default"],n["render"],n["staticRenderFns"],!1,null,"5574a3fe",null);t["default"]=o.exports},"64e4":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"SettingGuide",props:{info:{type:Object,default:function(){}}},data:function(){return{type:"create",data:{}}},created:function(){this.type=this.$route.query.type||"create",this.getToken()},methods:{getToken:function(){var e=this,t={};"renew"===this.type&&(t={sign:"sign"}),this.$api.homeApi.getWechatToken(t).then((function(t){0===t.error&&(e.data=t.data||{})}))}}};t.default=a},6856:function(e,t,a){"use strict";var n=a("15a3");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},7801:function(e,t,a){"use strict";a("442b")},"800d":function(e,t,a){},"94cf":function(e,t,a){"use strict";var n=a("fc3d");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},a2d5:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("b0c0");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"settings-base-info"},[t("kdx-form-title",[e._v(" 设置公众号信息 ")]),t("Form",{ref:"form",attrs:{model:e.model,rules:e.rules,"label-width":120}},[t("FormItem",{attrs:{label:"公众号名称：",prop:"name"}},[t("Input",{staticClass:"width-250",attrs:{placeholder:"请输入公众号名称"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),t("FormItem",{attrs:{label:"公众号类型：",prop:"type"}},[t("Select",{staticClass:"width-250",model:{value:e.model.type,callback:function(t){e.$set(e.model,"type",t)},expression:"model.type"}},e._l(e.typeList,(function(a){return t("Option",{key:a.key,attrs:{value:a.key}},[e._v(e._s(a.value))])})),1),t("kdx-hint-text",[e._v("注意:即使公众平台显示为“未认证”, 但只要【公众号设置】/【账号详情】下【认证情况】显示资质审核通过, 即可认定为认证号 ")])],1),t("FormItem",{attrs:{label:"AppID：",prop:"app_id"}},[t("Input",{staticClass:"width-250",attrs:{disabled:"edit"===e.type,placeholder:"请输入微信公众平台的AppID"},model:{value:e.model.app_id,callback:function(t){e.$set(e.model,"app_id",t)},expression:"model.app_id"}})],1),t("FormItem",{attrs:{label:"AppSecret：",prop:"secret"}},[t("Input",{staticClass:"width-250",attrs:{placeholder:"请输入微信公众平台的AppSecret"},model:{value:e.model.secret,callback:function(t){e.$set(e.model,"secret",t)},expression:"model.secret"}})],1),t("FormItem",{attrs:{label:"LOGO：",prop:"logo"}},[t("kdx-image-video",{attrs:{current:e.model.logo},on:{"on-change":function(t){return e.changeImage(t,"logo")}}}),t("kdx-hint-text",[e._v("建议尺寸：200X200px")])],1),t("FormItem",{attrs:{label:"二维码：",prop:"qr_code"}},[t("kdx-image-video",{attrs:{current:e.model.qr_code},on:{"on-change":function(t){return e.changeImage(t,"qr_code")}}}),t("kdx-hint-text",[e._v("建议尺寸：200X200px")])],1),t("FormItem",{attrs:{label:"上传验证文件：",prop:"file"}},[t("input",{ref:"file_input",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.changeFile}}),t("Input",{staticClass:"width-250",attrs:{value:e.model.fileName,disabled:""}},[t("span",{attrs:{slot:"append"},on:{click:e.selectFile},slot:"append"},[e._v("选择文件")])]),t("kdx-hint-text",[e._v("设置JS接口安全域名，需要上传的文件。")])],1)],1)],1)};t.render=n;var s=[];t.staticRenderFns=s},ae16:function(e,t,a){"use strict";a("800d")},b5da:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a("c7eb")),i=n(a("1da1")),r=n(a("ced2")),o=n(a("f99a")),c={name:"index",components:{BaseInfo:r.default,SettingGuide:o.default},data:function(){return{step:0,baseInfo:null}},methods:{handleNext:function(){var e=this;return(0,i.default)((0,s.default)().mark((function t(){return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["base_info"].validate();case 2:e.$refs["base_info"].save();case 3:case"end":return t.stop()}}),t)})))()},changeInfo:function(e){this.baseInfo=e,this.step=1},handlePrev:function(){this.step=0},handleBack:function(){this.$router.go(-1)},handleSave:function(){this.handleBack()}}};t.default=c},c004:function(e,t,a){"use strict";var n=a("a2d5");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},c7cf:function(e,t,a){"use strict";a.r(t);var n=a("64e4"),s=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=s.a},ced2:function(e,t,a){"use strict";a.r(t);var n=a("c004"),s=a("51d2");for(var i in s)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(i);var r=a("2877"),o=Object(r["a"])(s["default"],n["render"],n["staticRenderFns"],!1,null,"2cf9efa9",null);t["default"]=o.exports},f99a:function(e,t,a){"use strict";a.r(t);var n=a("6856"),s=a("c7cf");for(var i in s)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(i);a("7801");var r=a("2877"),o=Object(r["a"])(s["default"],n["render"],n["staticRenderFns"],!1,null,"66ef05c3",null);t["default"]=o.exports},fc3d:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("kdx-content-bar",{scopedSlots:e._u([{key:"btn",fn:function(){return[t("Button",{staticClass:"default-long",on:{click:e.handleBack}},[e._v("返回")]),t("Button",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step === 1"}],staticClass:"default-long",on:{click:e.handlePrev}},[e._v("上一步")]),t("Button",{directives:[{name:"show",rawName:"v-show",value:0===e.step,expression:"step === 0"}],staticClass:"primary-long",on:{click:e.handleNext}},[e._v("下一步")]),t("Button",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step === 1"}],staticClass:"primary-long",on:{click:e.handleSave}},[e._v("保存")])]},proxy:!0}])},[t("div",{staticClass:"wechat-config-settings"},[t("div",{staticClass:"create-header"},[t("Steps",{attrs:{current:e.step}},[t("Step",{attrs:{title:"设置公众号信息"}}),t("Step",{attrs:{title:"公众号设置引导"}})],1)],1),t("div",{staticClass:"line"}),t("div",{staticClass:"create-content"},[t("base-info",{directives:[{name:"show",rawName:"v-show",value:0===e.step,expression:"step === 0"}],ref:"base_info",on:{"on-change":e.changeInfo}}),1===e.step?t("setting-guide",{attrs:{info:e.baseInfo}}):e._e()],1)])])};t.render=a;var n=[];t.staticRenderFns=n}}]);