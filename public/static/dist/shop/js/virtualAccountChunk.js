(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[46],{"01a87":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("b0c0"),a("4e82");var n=function(){var e=this,t=e._self._c;return t("kdx-content-bar",{attrs:{loading:e.pageLoading},scopedSlots:e._u([{key:"btn",fn:function(){return[t("Button",{staticClass:"primary-long",attrs:{loading:e.submitLoading},on:{click:e.handleSave}},[e._v("保存")])]},proxy:!0}])},[t("div",{staticClass:"content"},[t("kdx-form-title",[e._v("您正在向【"+e._s(e.name)+"】添加卡密数据")]),t("kdx-hint-alert",{staticStyle:{"margin-bottom":"30px"}},[t("p",{staticClass:"bold"},[e._v("自动填充功能说明：")]),t("p",[e._v("1. 仅应用于字段1（key）值，其他字段不可自动填充；")]),t("p",[e._v("2.自动填充将根据当前表格的数值，自动填充其下方已展开的表格，空白则自动写入，若已有数据则覆盖（如：填入1，下方表格填入5，在1处点击自动填充，5将被修改为2）;")]),t("p",[e._v("3.自动填充仅适用于这些格式：00000001(纯数字)、C00000001(字母开头数字结尾)、C000SDD00001(字母数字混合，以数字结尾)，末尾连续数字不能超过16位，需要注意位数变化。其他格式请手动填写或者Excel导入。")]),t("p",{staticClass:"bold",staticStyle:{"margin-top":"10px"}},[e._v("注意：")]),t("p",[e._v("1.每个字段下的数据，最长50个字符。")]),t("p",[e._v("2.添加数据时，保持位数相同，如该卡密库开启排重时，如有相同的数据时，重复数据不可导入添加。")]),t("p",[e._v("3.批量新增字段，一次最多支持50条数据。")]),t("p",[e._v("4.Excel导入数据一次最多支持1000条。")])]),t("kdx-header-bar",{attrs:{type:"little"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"flex"},[t("kdx-rr-input",{staticClass:"width-250",attrs:{number:"",fixed:0,"max-value":50},model:{value:e.addNum,callback:function(t){e.addNum=t},expression:"addNum"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("新增")]),t("span",{attrs:{slot:"append"},slot:"append"},[e._v("条数据")])]),t("Button",{staticClass:"mL-20",attrs:{loading:e.addLoading,type:"primary"},on:{click:e.addData}},[e._v("添加")])],1)]},proxy:!0}])},[t("div",{staticClass:"ivu-form-item-btn"},[t("Button",{staticClass:"mR-20",attrs:{type:"primary"},on:{click:function(t){e.fastImportModel=!0}}},[e._v("快速导入数据")]),t("Button",{staticClass:"mR-20",attrs:{type:"primary"},on:{click:e.selectExcelFile}},[e._v("Excel导入")]),t("Button",{staticClass:"mR-20",attrs:{type:"text"},on:{click:e.handleDownLoad}},[e._v("下载模板")])],1)]),t("Form",{ref:"form",attrs:{"label-width":0}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-list"},[t("Table",{ref:"table",attrs:{border:"",columns:e.handleColumn,data:e.data,"row-class-name":e.rowClassName},scopedSlots:e._u([{key:"sort",fn:function(a){a.row;var n=a.index;return[t("FormItem",[t("kdx-rr-input",{staticClass:"width-70",attrs:{number:"",fixed:0,placeholder:"请输入字段名称"},model:{value:e.data[n].sort,callback:function(t){e.$set(e.data[n],"sort",t)},expression:"data[index].sort"}})],1)]}},{key:"key",fn:function(a){var n=a.row,i=a.index,r=a.column;return[t("FormItem",[2===r._index?t("div",[t("Input",{ref:"input_key".concat(i),staticClass:"table-input",class:{error:e.data[i].errorKey&&2===r._index},attrs:{maxlength:"50",placeholder:"请输入"},on:{"on-blur":function(t){return e.handleBlur(i)}},model:{value:e.data[i]["value".concat(r._index-1)],callback:function(t){e.$set(e.data[i],"value".concat(r._index-1),t)},expression:"data[index][`value${column._index-1}`]"}},[2===r._index&&0===e.firstKeyType?t("span",{staticClass:"auto-fill",attrs:{slot:"append",type:"text"},on:{click:function(t){return e.autoFill(n.value1,i)}},slot:"append"},[e._v("自动填充")]):e._e()])],1):t("div",[t("Input",{staticClass:"table-input",attrs:{maxlength:"50",placeholder:"请输入"},model:{value:e.data[i]["value".concat(r._index-1)],callback:function(t){e.$set(e.data[i],"value".concat(r._index-1),t)},expression:"data[index][`value${column._index-1}`]"}})],1)])]}}])})],1)])],1),t("input",{ref:"upload_excel_input",staticClass:"upload-input-file",attrs:{type:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel"},on:{change:e.changeExcel}}),t("fast-import",{on:{ok:e.handleImport},model:{value:e.fastImportModel,callback:function(t){e.fastImportModel=t},expression:"fastImportModel"}})],1)};t.render=n;var i=[];t.staticRenderFns=i},"0318":function(e,t,a){"use strict";a.r(t);var n=a("4643"),i=a("ba67");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("a5cb");var o=a("2877"),s=Object(o["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"595f7781",null);t["default"]=s.exports},"06ae":function(e,t,a){"use strict";a.r(t);var n=a("9729"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},"07ac":function(e,t,a){var n=a("23e7"),i=a("6f53").values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},"081f":function(e,t,a){"use strict";var n=a("bed7");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"08f0":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-list"},[t("Table",{ref:"table",attrs:{columns:e.handleColumn,data:e.list},on:{"on-selection-change":e.selectChange},scopedSlots:e._u([{key:"action",fn:function(a){var n=a.row;return[t("div",[t("Button",{staticClass:"marginR-10",attrs:{type:"text",disabled:e.noDataManagePerm},on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),t("Button",{attrs:{type:"text",disabled:e.noDataManagePerm},on:{click:function(t){return e.handleDelete("0",n.id)}}},[e._v("删除")])],1)]}}])}),e.list.length>0&&"notSale"===e.type?t("div",{staticClass:"footer-action"},[t("Checkbox",{on:{"on-change":e.checkboxChange},model:{value:e.isSelectAll,callback:function(t){e.isSelectAll=t},expression:"isSelectAll"}}),t("Button",{attrs:{disabled:e.selectDisabled||e.noDataManagePerm},on:{click:function(t){return e.handleDelete("1")}}},[e._v("删除")]),t("Button",{attrs:{disabled:e.selectDisabled||e.noDataManagePerm},on:{click:e.updateSort}},[e._v("修改权重值")])],1):e._e(),t("div",{staticClass:"footer-page"},[t("kdx-page-component",{ref:"page",attrs:{current:e.current,pageSize:e.pageSize,total:e.total},on:{"on-change":e.changePage}})],1),t("UpdateKeyData",{attrs:{editData:e.editData},on:{getList:e.getList},model:{value:e.updateKeyDataModel,callback:function(t){e.updateKeyDataModel=t},expression:"updateKeyDataModel"}}),t("UpdateSort",{on:{changeSort:e.bathChangeSort},model:{value:e.updateSortModel,callback:function(t){e.updateSortModel=t},expression:"updateSortModel"}})],1)};t.render=a;var n=[];t.staticRenderFns=n},"09b6":function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("5530"));a("a434"),a("d3b7"),a("14d9"),a("d81d"),a("e9c4");var r={name:"BaseData",components:{},props:{baseData:{type:Object,default:function(){}},disabled:{type:Boolean,default:!1}},data:function(){var e=this,t=this.$createElement;return{model:{repeat:1,config:[{key:"",type:0}]},columns:[{title:" ",key:"icon",align:"center",width:20},{title:"字段",key:"name",width:100,render:function(e,t){return e("div",{class:0===t.index?"ivu-form-item-required":""},[e("label",{class:"ivu-form-item-label"},["字段".concat(t.index+1)])])}},{title:"字段名称",key:"key",slot:"key"},{title:"字段属性",key:"type",slot:"type",width:200,renderHeader:function(){return t("div",[t("span",["字段属性"]),t("kdx-hint-tooltip",{attrs:{maxWidth:200},style:"font-weight: 500;"},["超链接的字段，在手机浏览器H5浏览时，可直接点击进行访问； 小程序受访问白名单限制，只能进行复制。"])])}},{title:"操作",key:"action",width:60,render:function(t,a){return 0===a.index?t("div"):t("Button",{attrs:{type:"text",disabled:e.disabled},on:{click:function(){return e.deleteKey(a.index)}}},["删除"])}}]}},computed:{},watch:{baseData:{handler:function(e){this.model=Object.assign({},e)}}},created:function(){},mounted:function(){},methods:{deleteKey:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"确认删除该字段",onOk:function(){t.model.config.splice(e,1)}})},addConfigData:function(){this.model.config.some((function(e){return!e.key}))?this.$Message.error("字段名称必填"):this.model.config.some((function(e){return e.errorKey}))||this.model.config.push({key:"",type:0})},handleBlur:function(e,t){var a=this;if(!e.target.value)return this.$Message.error("字段名称必填"),void this.$nextTick((function(){a.$set(a.model.config[t],"errorKey",!0)}));var n=this.model.config.some((function(a,n){return a.key==e.target.value&&n!=t}));if(n)return this.$Message.error("字段名称已存在"),void this.$nextTick((function(){a.$set(a.model.config[t],"errorKey",!0)}));this.$set(this.model.config[t],"errorKey",!1)},validateForm:function(){var e=this;return new Promise((function(t,a){e.model.config.some((function(e){return!e.key}))?(e.$Message.error("字段名称不能为空"),a()):e.model.config.some((function(e){return e.errorKey}))?a():t()}))},getParams:function(){return this.model.config.map((function(e){delete e.errorKey})),(0,i.default)((0,i.default)({},this.model),{},{config:JSON.stringify(this.model.config)})}}};t.default=r},"0bbb":function(e,t,a){},"0ca6":function(e,t,a){"use strict";a.r(t);var n=a("7438"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},"0df3":function(e,t,a){"use strict";a("be00")},1276:function(e,t,a){"use strict";var n=a("2ba4"),i=a("c65b"),r=a("e330"),o=a("d784"),s=a("825a"),l=a("7234"),c=a("44e7"),d=a("1d80"),u=a("4840"),f=a("8aa5"),p=a("50c4"),h=a("577e"),v=a("dc4a"),m=a("4dae"),g=a("14c3"),b=a("9263"),_=a("9f7f"),y=a("d039"),x=_.UNSUPPORTED_Y,k=4294967295,w=Math.min,$=[].push,R=r(/./.exec),C=r($),F=r("".slice),D=!y((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));o("split",(function(e,t,a){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var r=h(d(this)),o=void 0===a?k:a>>>0;if(0===o)return[];if(void 0===e)return[r];if(!c(e))return i(t,r,e,o);var s,l,u,f=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,g=new RegExp(e.source,p+"g");while(s=i(b,g,r)){if(l=g.lastIndex,l>v&&(C(f,F(r,v,s.index)),s.length>1&&s.index<r.length&&n($,f,m(s,1)),u=s[0].length,v=l,f.length>=o))break;g.lastIndex===s.index&&g.lastIndex++}return v===r.length?!u&&R(g,"")||C(f,""):C(f,F(r,v)),f.length>o?m(f,0,o):f}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:i(t,this,e,a)}:t,[function(t,a){var n=d(this),o=l(t)?void 0:v(t,e);return o?i(o,t,n,a):i(r,h(n),t,a)},function(e,n){var i=s(this),o=h(e),l=a(r,i,o,n,r!==t);if(l.done)return l.value;var c=u(i,RegExp),d=i.unicode,v=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(x?"g":"y"),m=new c(x?"^(?:"+i.source+")":i,v),b=void 0===n?k:n>>>0;if(0===b)return[];if(0===o.length)return null===g(m,o)?[o]:[];var _=0,y=0,$=[];while(y<o.length){m.lastIndex=x?0:y;var R,D=g(m,x?F(o,y):o);if(null===D||(R=w(p(m.lastIndex+(x?y:0)),o.length))===_)y=f(o,y,d);else{if(C($,F(o,_,y)),$.length===b)return $;for(var M=1;M<=D.length-1;M++)if(C($,D[M]),$.length===b)return $;y=_=R}}return C($,F(o,_)),$}]}),!D,x)},1327:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("ac1f"),a("841c");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"virtual-account-list"},[t("kdx-header-bar",{attrs:{type:"little"},scopedSlots:e._u([{key:"header",fn:function(){return[t("Button",{attrs:{type:"primary",disabled:e.noManagePerm,to:"/virtualAccount/library/add"}},[e._v("+创建卡密库")])]},proxy:!0}])},[t("Form",{ref:"form",attrs:{model:e.search,"label-width":100,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormItem",{attrs:{label:"卡密库名称："}},[t("Input",{staticClass:"width-340",attrs:{type:"text",placeholder:"请输入卡密库名称"},on:{"on-enter":e.handleSearch},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,"keyword",t)},expression:"search.keyword"}})],1),t("div",{staticClass:"ivu-form-item-btn"},[t("Button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")]),t("Button",{attrs:{type:"text"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-list"},[t("Table",{ref:"table",attrs:{columns:e.columns,data:e.data},scopedSlots:e._u([{key:"action",fn:function(a){var n=a.row;return[t("div",[t("Button",{staticClass:"marginR-10",attrs:{type:"text",disabled:e.noManagePerm},on:{click:function(t){return e.handleClick(n.id,"edit")}}},[e._v("编辑")]),t("Button",{staticClass:"marginR-10",attrs:{type:"text",disabled:e.noDataManagePerm},on:{click:function(t){return e.handleClick(n.id,"addData")}}},[e._v("添加数据")]),t("Button",{staticClass:"marginR-10",attrs:{type:"text",disabled:e.noDataViewPerm},on:{click:function(t){return e.handleClick(n.id,"viewData")}}},[e._v("查看数据")]),t("Button",{attrs:{type:"text",disabled:e.noManagePerm},on:{click:function(t){return e.handleDelete(n.id)}}},[e._v("删除")])],1)]}}])}),t("div",{staticClass:"footer-page"},[t("kdx-page-component",{ref:"page",attrs:{total:e.total},on:{"on-change":e.changePage}})],1)],1),e._t("default")],2)};t.render=n;var i=[];t.staticRenderFns=i},"1ccf2":function(e,t,a){"use strict";var n=a("1327");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"1f6f1":function(e,t,a){"use strict";a.r(t);var n=a("f244"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},"1fca":function(e,t,a){"use strict";a.r(t);var n=a("cc6e4"),i=a("0ca6");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("8d0d");var o=a("2877"),s=Object(o["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"67dfe89c",null);t["default"]=s.exports},"21d8":function(e,t,a){"use strict";var n=a("f5bd");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"22ff":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("38cf");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"base-data"},[t("Form",{ref:"form",attrs:{model:e.model,"label-width":120}},[t("kdx-form-title",[t("span",[e._v("数据结构")]),t("span",{staticClass:"tip danger-color"},[e._v("（创建后不可更改）")])]),t("kdx-hint-alert",{staticStyle:{"margin-bottom":"30px"}},[t("p",[e._v("创建后的数据结构不可删除")]),t("p",[e._v("如果出售虚拟卡密只有一条数据时，下方只需添加一条字段内容。如果出售的虚拟卡密有多条数据时，下方需要添加多条字段内容,最多支持10条数据字段。")]),t("p",[e._v("例如：如出售网盘提取密码时：需要添加提取密码一条数据组合成为一条虚拟卡密；如果出售账号及密码时，需要添加2条数据组合为一条虚拟卡密。")])]),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"卡密数据排重："}},[t("RadioGroup",{model:{value:e.model.repeat,callback:function(t){e.$set(e.model,"repeat",t)},expression:"model.repeat"}},[t("Radio",{attrs:{label:1,disabled:e.disabled}},[e._v("开启")]),t("Radio",{attrs:{label:0,disabled:e.disabled}},[e._v("关闭 "),t("kdx-hint-tooltip",{staticStyle:{"margin-left":"-6px"},attrs:{maxWidth:410}},[t("p",[e._v("【账号：666】【密码：888】【邮箱：aaa】已有数据；")]),t("p",[e._v("【账号：666】【密码：888】【邮箱：bbb】可正常添加，")]),t("p",[e._v("【账号：666】【密码：888】【邮箱：aaa】不可添加，视为重复数据。")])])],1)],1),t("kdx-hint-text",[t("p",[e._v("开启后，每次向卡密库添加新数据时，若新数据与已存在的数据重复，则无法添加。")]),t("p",[e._v("当卡密数据由多个字段组成时，所有字段均重复才视为此条数据为重复数据。")])]),t("div",{staticClass:"config-data"},[t("Table",{ref:"table",attrs:{border:"",columns:e.columns,data:e.model.config},scopedSlots:e._u([{key:"key",fn:function(a){a.row;var n=a.index;return[t("FormItem",[t("Input",{staticClass:"width-340",class:{error:e.model.config[n].errorKey},attrs:{disabled:e.disabled,maxlength:"10","show-word-limit":!e.disabled,placeholder:"请输入字段名称"},on:{"on-blur":function(t){return e.handleBlur(t,n)}},model:{value:e.model.config[n].key,callback:function(t){e.$set(e.model.config[n],"key",t)},expression:"model.config[index].key"}})],1)]}},{key:"type",fn:function(a){a.row;var n=a.index;return[t("div",[t("RadioGroup",{model:{value:e.model.config[n].type,callback:function(t){e.$set(e.model.config[n],"type",t)},expression:"model.config[index].type"}},[t("Radio",{attrs:{label:0,disabled:e.disabled}},[e._v("文本")]),t("Radio",{attrs:{label:1,disabled:e.disabled}},[e._v("超链接")])],1)],1)]}}])}),e.model.config.length<10?t("Button",{staticClass:"brand",attrs:{disabled:e.disabled},on:{click:e.addConfigData}},[e._v(e._s("+添加一条字段（".concat(e.model.config.length,"/10）")))]):e._e()],1)],1)],1)],1)};t.render=n;var i=[];t.staticRenderFns=i},2441:function(e,t,a){"use strict";a("d28e")},2621:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("ac1f"),a("841c");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"virtual-account-list"},[t("kdx-header-bar",[t("Form",{ref:"form",attrs:{model:e.search,"label-width":100,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormItem",{attrs:{label:"字段(Key)："}},[t("Input",{staticClass:"width-340",attrs:{type:"text",placeholder:"请输入"},on:{"on-enter":e.handleSearch},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,"keyword",t)},expression:"search.keyword"}})],1),t("FormItem",{attrs:{label:"导入时间："}},[t("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"活动时间"},on:{"on-change":e.changeDate},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),t("div",{staticClass:"ivu-form-item-btn"},[t("Button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")]),t("Button",{attrs:{type:"text"},on:{click:e.handleReset}},[e._v("重置")]),t("Button",{attrs:{type:"text"},on:{click:e.handleExport}},[e._v("导出")])],1)],1)],1),t("div",{staticClass:"tab-content"},[t("Tabs",{attrs:{animated:!1},on:{"on-click":e.changeType},model:{value:e.checkType,callback:function(t){e.checkType=t},expression:"checkType"}},[t("TabPane",{attrs:{label:"未出售",name:"notSale"}},[t("data-table",{ref:"table_list",attrs:{type:"notSale",tableHeader:e.tableHeader,list:e.data,current:e.page.pageNumber,pageSize:e.page.pageSize,total:e.total,virtual_account_id:e.virtual_account_id},on:{"on-page-change":e.changePage,"on-refresh":e.refreshTable,getList:e.getList}})],1),t("TabPane",{attrs:{label:"已出售",name:"sale"}},[t("data-table",{ref:"table_list",attrs:{type:"sale",tableHeader:e.tableHeader,list:e.data,current:e.page.pageNumber,pageSize:e.page.pageSize,total:e.total},on:{"on-page-change":e.changePage,"on-refresh":e.refreshTable,getList:e.getList}})],1)],1)],1),e._t("default")],2)};t.render=n;var i=[];t.staticRenderFns=i},"2a1f":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("kdx-modal-frame",{attrs:{value:e.value,title:"编辑卡密"},on:{"on-cancel":e.handleCancel,"on-ok":e.handleOk}},[t("div",{staticClass:"content"},[t("Form",{ref:"form",attrs:{model:e.model,rules:e.rules,"label-width":140}},e._l(e.editData.tableHeader,(function(a,n){return t("FormItem",{key:n,attrs:{label:a+"："}},[t("Input",{staticClass:"width-250",model:{value:e.model["value".concat(n+1)],callback:function(t){e.$set(e.model,"value".concat(n+1),t)},expression:"model[`value${index+1}`]"}})],1)})),1)],1)])};t.render=a;var n=[];t.staticRenderFns=n},"2e1e":function(e,t,a){},"304d":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("kdx-content-bar",{scopedSlots:e._u([{key:"btn",fn:function(){return[t("Button",{staticClass:"primary-long",attrs:{loading:e.submitLoading,disabled:e.noManagePerm},on:{click:e.handleSave}},[e._v("保存")])]},proxy:!0}])},[t("div",{staticClass:"content"},[t("Form",{ref:"form",attrs:{model:e.model,rules:e.rules,"label-width":165}},[t("kdx-form-title",[e._v("基础设置")]),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"未付款订单关闭时间：",prop:"close_type"}},[t("RadioGroup",{model:{value:e.model.close_type,callback:function(t){e.$set(e.model,"close_type",t)},expression:"model.close_type"}},[t("Radio",{attrs:{label:0,disabled:e.noManagePerm}},[e._v("默认系统")]),t("Radio",{attrs:{label:1,disabled:e.noManagePerm}},[e._v("自定义")])],1),0===e.model.close_type?t("kdx-hint-text",[t("span",[e._v("用户下单后未付款订单自动关闭时间读取商城系统设置时间，如需查看或修改请点击")]),t("Button",{staticClass:"marginL-10",attrs:{type:"text",to:"/setting/business/index",target:"_blank"}},[e._v("立即前往")])],1):e._e(),1===e.model.close_type?t("div",{staticClass:"bg-color"},[t("FormItem",{attrs:{label:"未付款订单",prop:"close_time"}},[t("kdx-rr-input",{staticClass:"width-200",attrs:{type:"text",number:"",fixed:0,"min-value":20,"max-value":1440,placeholder:"请输入"},model:{value:e.model.close_time,callback:function(t){e.$set(e.model,"close_time",t)},expression:"model.close_time"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("分钟")])])],1)],1):e._e()],1)],1)],1)])};t.render=a;var n=[];t.staticRenderFns=n},"38cf":function(e,t,a){var n=a("23e7"),i=a("1148");n({target:"String",proto:!0},{repeat:i})},"3b02":function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.Export=void 0;var i=n(a("5530")),r=a("d8cc"),o=n(a("4328")),s=a("384d"),l=n(a("1cc8")),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.log(e,"---------downloadPath"),e){var a="";if(-1===e.indexOf(r.config.base_url)){var n={baseURL:r.config.base_url,url:e};(0,l.default)(n),a=n.baseURL+n.url}else a=e;a=a.indexOf("?")>-1?a:a+"?",t=(0,i.default)((0,i.default)({},t),(0,s.getUserInfo)()),a+="&".concat(o.default.stringify(t)),window.open(a)}};t.Export=c},"3e94":function(e,t,a){"use strict";a("3f47")},"3f47":function(e,t,a){},"40ac":function(e,t,a){"use strict";a.r(t);var n=a("9156"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},4643:function(e,t,a){"use strict";var n=a("304d");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"47c1":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("4e82");var n={name:"UpdateSort",components:{},props:{value:{type:Boolean,default:!1}},data:function(){return{model:{sort:""}}},computed:{},created:function(){},mounted:function(){},methods:{handleCancel:function(){this.$emit("input",!1)},handleOk:function(){this.model.sort&&this.$emit("changeSort",this.model.sort),this.handleCancel()}}};t.default=n},"4a44":function(e,t,a){"use strict";a.r(t);var n=a("21d8"),i=a("06ae");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("e386");var o=a("2877"),s=Object(o["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"0245ef1c",null);t["default"]=s.exports},"4aac":function(e,t,a){"use strict";var n=a("2621");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"4d83":function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("5530")),r={name:"index",components:{},props:{},data:function(){return{submitLoading:!1,model:{close_type:0,close_time:""},rules:{close_type:[{required:!0,message:"未付款订单关闭时间必选"}],close_time:[{required:!0,message:"未付款订单关闭时间必填"}]}}},computed:{noManagePerm:function(){return!this.$getPermMap("virtualAccount.setting.manage")}},created:function(){},mounted:function(){this.getData()},methods:{getData:function(){var e=this;this.$api.virtualAccountApi.getVirtualSet({}).then((function(t){var a,n;0===t.error&&(e.model={close_type:+t.data.close_type,close_time:null!==(a=t.data)&&void 0!==a&&a.close_time?null===(n=t.data)||void 0===n?void 0:n.close_time:""})}))},handleSave:function(){var e=this;this.submitLoading=!0,this.$refs.form.validate((function(t){t?e.submit():e.submitLoading=!1}))},submit:function(){var e=this;this.$api.virtualAccountApi.setVirtualSet((0,i.default)({},this.model)).then((function(t){0==t.error&&(e.getData(),e.$Message.success("保存成功")),e.submitLoading=!1}))}}};t.default=r},"4f98":function(e,t,a){"use strict";a.r(t);var n=a("e231"),i=a("68af");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("5b64");var o=a("2877"),s=Object(o["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"e62cb2ca",null);t["default"]=s.exports},"4fc0":function(e,t,a){"use strict";a.r(t);var n=a("86fd"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},5285:function(e,t,a){},"55d4":function(e,t,a){"use strict";a("5285")},"5b64":function(e,t,a){"use strict";a("a00f")},"64b7":function(e,t,a){"use strict";a.r(t);var n=a("47c1"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},"68af":function(e,t,a){"use strict";a.r(t);var n=a("09b6"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},"6f53":function(e,t,a){var n=a("83ab"),i=a("e330"),r=a("df75"),o=a("fc6a"),s=a("d1e7").f,l=i(s),c=i([].push),d=function(e){return function(t){var a,i=o(t),s=r(i),d=s.length,u=0,f=[];while(d>u)a=s[u++],n&&!l(i,a)||c(f,e?[a,i[a]]:i[a]);return f}};e.exports={entries:d(!0),values:d(!1)}},"72d9":function(e,t,a){"use strict";a("eaaa")},"72ed":function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("2909"));a("ac1f"),a("1276"),a("d81d"),a("4de4"),a("d3b7"),a("498a");var r={name:"FastImport",components:{},props:{value:{type:Boolean,default:!1}},data:function(){return{data:""}},computed:{},created:function(){},mounted:function(){},methods:{handleCancel:function(){this.$emit("input",!1)},handleOk:function(){if(this.data){var e=this.data.split(/[\n\r]/g),t=e.map((function(e){return(0,i.default)(e.split(",").filter((function(e){return e&&e.trim()})))}));t=t.filter((function(e){return e.length})),this.handleCancel(),this.$emit("ok",t)}else this.handleCancel()}}};t.default=r},7438:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("38cf"),a("ac1f"),a("5319");var i=n(a("c7eb")),r=n(a("1da1")),o=n(a("5530")),s=n(a("a4097")),l=n(a("4f98")),c={name:"index",components:{BaseInfo:s.default,BaseData:l.default},props:{},data:function(){return{loading:!1,id:"",mailer_status:!1,baseInfo:{name:"",use_description:0,use_description_title:"使用说明",use_description_remark:"",use_address:0,use_address_title:"默认地址",use_address_address:"",sequence:0,mailer:0},baseData:{repeat:1,config:[{key:"",type:0}]},disabled:!1,submitLoading:!1}},computed:{},created:function(){var e,t;(this.loading=!0,null!==(e=this.$route.query)&&void 0!==e&&e.id)&&(this.id=null===(t=this.$route.query)||void 0===t?void 0:t.id,this.disabled=!0,this.getData());this.getMailer()},mounted:function(){},methods:{getMailer:function(){var e=this;this.$api.noticeApi.getMailer({}).then((function(t){if(e.loading=!1,0===t.error){var a=t.status;e.mailer_status=0===+a}}))},getData:function(){var e=this;this.$api.virtualAccountApi.getVirtualAccount({id:this.id}).then((function(t){0===t.error&&(e.baseInfo=(0,o.default)({},t.data),e.baseData={repeat:t.data.repeat,config:t.data.config})}))},handleSave:function(){var e=this;return(0,r.default)((0,i.default)().mark((function t(){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitLoading=!0,t.prev=1,t.next=4,e.$refs.baseInfo.validateForm();case 4:return t.next=6,e.$refs.baseData.validateForm();case 6:e.formatParams(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.submitLoading=!1;case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},formatParams:function(){var e=(0,o.default)((0,o.default)({},this.$refs.baseInfo.getParams()),this.$refs.baseData.getParams());this.id&&(e.id=this.id),this.submit(e)},submit:function(e){var t=this;this.$api.virtualAccountApi[this.id?"virtualAccountEdit":"virtualAccountAdd"](e).then((function(e){t.submitLoading=!1,0===e.error&&(t.id?(t.$Message.success("保存成功"),t.$router.replace({path:"/virtualAccount/library/list"})):t.addModel(e.id))}))},addModel:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"卡密库创建成功，是否为卡密库添加数据",cancelText:"暂不添加",okText:"立即添加",onCancel:function(){t.$router.replace({path:"/virtualAccount/library/list"})},onOk:function(){t.$router.replace({path:"/virtualAccount/library/data/index",query:{id:e}})}})}}};t.default=c},7837:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("c7eb")),r=n(a("1da1")),o=n(a("15fd")),s=n(a("ade3")),l=n(a("5530")),c=n(a("2909"));a("d81d"),a("a434"),a("99af"),a("38cf"),a("b0c0"),a("14d9"),a("4e82"),a("d3b7"),a("07ac"),a("b64b"),a("ac1f"),a("00b4"),a("1276"),a("5319"),a("a9e3"),a("25f0"),a("caad"),a("2532"),a("e9c4");var d=n(a("99f8")),u=a("3b02"),f=a("d08c"),p=a("d8cc"),h=["sort"],v=["sort"],m=["sort"],g={name:"index",components:{FastImport:d.default},props:{},data:function(){var e=this;this.$createElement;return{pageLoading:!1,addLoading:!1,submitLoading:!1,loading:!1,addNum:"",virtual_account_id:"",is_repeat:1,name:"",firstKeyType:0,fastImportModel:!1,errIndex:[],tableHeader:[],data:[],columns:[{title:" ",key:"icon",align:"center",width:20},{title:"权重",key:"sort",width:80,slot:"sort"},{title:"操作",key:"action",width:70,fixed:"right",render:function(t,a){return 0===a.index?t("div"):t("div",{style:"text-align: center;"},[t("Button",{attrs:{type:"text"},on:{click:function(){return e.handleDelete(a.index)}}},["删除"])])}}]}},computed:{handleColumn:function(){var e=this.$createElement,t=this.tableHeader.map((function(t){return{title:"",key:"value",slot:"key",minWidth:170,renderHeader:function(){return e("div",[t])}}})),a=(0,c.default)(this.columns);return a.splice.apply(a,[2,0].concat((0,c.default)(t))),a}},created:function(){var e,t;(this.pageLoading=!0,null!==(e=this.$route.query)&&void 0!==e&&e.id)&&(this.virtual_account_id=null===(t=this.$route.query)||void 0===t?void 0:t.id,this.getKey())},mounted:function(){},methods:{getKey:function(){var e=this;this.$api.virtualAccountApi.getVirKey({virtual_account_id:this.virtual_account_id}).then((function(t){var a;(e.pageLoading=!1,0===t.error)&&(e.tableHeader=t.data.config.map((function(e){return e.key})),e.firstKeyType=+(null===(a=t.data.config)||void 0===a?void 0:a[0].type),e.is_repeat=+t.data.repeat,e.name=t.data.name,e.data.push(e.defaultData()))}))},defaultData:function(){for(var e={sort:"1"},t=0;t<this.tableHeader.length;t++){var a;e=(0,l.default)((0,l.default)({},e),{},(a={},(0,s.default)(a,"value".concat(t+1),""),(0,s.default)(a,"errorKey",!1),a))}return e},addData:function(){if(this.addLoading=!0,this.addNum){for(var e=this.defaultData(),t=0;t<this.addNum;t++)this.data.push((0,l.default)({},e));this.addLoading=!1}else this.addLoading=!1},handleDelete:function(e){this.data.splice(e,1)},handleImport:function(e){var t=this.data[this.data.length-1],a=!1;delete t.errorKey;var n=t.sort,i=(0,o.default)(t,h);"1"===n&&(a=!Object.values(i).some((function(e){return e})));for(var r,s=[],l=function(t){var a={sort:"1"};Object.keys(i).map((function(n,i){a[n]=e[t][i]||""})),s.push(a)},c=0;c<e.length;c++)l(c);a?(r=this.data).splice.apply(r,[-1,1].concat(s)):this.data=this.data.concat(s)},handleDownLoad:function(){var e={virtual_account_id:this.virtual_account_id};console.log(this.$api.commissionApi.orderList.api),(0,u.Export)("manage/virtualAccount/virtual-account-data/download",e)},selectExcelFile:function(){this.$refs["upload_excel_input"].click()},changeExcel:function(e){var t=this;if(e){var a,n,i=null===(a=e.target)||void 0===a||null===(n=a.files[0])||void 0===n?void 0:n.name,r=/^.*\.(?:xls|xlsx)$/i;if(!r.test(i))return void this.$Message.error("请上传csv文件");var o=new FormData;o.append("virtual_account_id",this.virtual_account_id),o.append("file",e.target.files[0]),(0,f.uploadFile)("manage/apps/virtualAccount/virtual-account-data/import",o).then((function(e){0===e.error?e.data.error_count?t.$Modal.confirm({title:"提示",content:'已成功导入 <span class="success-color">'.concat(e.data.success_count,'</span> 条卡密数据, 发现 <span class="danger-color">').concat(e.data.error_count,"</span> 条数据为重复数据，请修改后继续导入"),cancelText:"立即下载",okText:"取消",onCancel:function(){var a;t.$refs["upload_excel_input"]&&(t.$refs["upload_excel_input"].value="");var n=p.config.public_url+(null===(a=e.data)||void 0===a?void 0:a.file_path);window.open(n)},onOk:function(){t.$refs["upload_excel_input"]&&(t.$refs["upload_excel_input"].value="")}}):t.$Modal.success({title:"提示",content:'已成功导入 <span class="success-color">'.concat(e.data.success_count,"</span> 条卡密数据"),onOk:function(){t.$refs["upload_excel_input"]&&(t.$refs["upload_excel_input"].value="")}}):(t.$refs["upload_excel_input"]&&(t.$refs["upload_excel_input"].value=""),t.$Message.error(e.message))}))}},autoFill:function(e,t){var a=this;return(0,r.default)((0,i.default)().mark((function n(){var r,o,s,l,d,u,f,p,h,v,m,g;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e,o=/^[0-9a-zA-Z]*[0-9]{1,16}$/,o.test(r)){n.next=4;break}return n.abrupt("return");case 4:for(s=r.split(/[a-zA-Z]/g),l=s[s.length-1],d=l.replace(/./g,"9")-l,u=a.data.length-1-t,f=Math.min(u,d),p=1,h="",v=t+1;v<=t+f;v++){for(h=""+(1*l+p++),m=h.length;m<l.length;m++)h="0"+h;a.data[v].value1=r.replace(/[0-9]+$/,h)}if(console.log(d,u,"........",t,f),!(d<u)){n.next=18;break}return n.next=16,a.handleModal();case 16:g=n.sent,"cancel"===g?(a.data[t+f].errorKey=!0,a.$refs["input_key".concat(t+f)].focus({preventScroll:!0})):"ok"===g&&(a.data[t+f+1].value1=r.replace(/[0-9]+$/,Number(l)+f+1),setTimeout((function(){setTimeout((function(){a.autoFill(a.data[t+f+1].value1,t+f+1)}),100)}),0));case 18:a.data=(0,c.default)(a.data);case 19:case"end":return n.stop()}}),n)})))()},handleBlur:function(e){this.data[e].errorKey=!1},handleModal:function(){var e=this;return new Promise((function(t){e.$Modal.confirm({title:"提示",content:"添加字段位数发生改变，是否继续添加。",cancelText:"取消添加",okText:"继续添加",onCancel:function(){t("cancel")},onOk:function(){t("ok")}})}))},handleSave:function(){var e=this;return(0,r.default)((0,i.default)().mark((function t(){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitLoading=!0,t.next=3,e.repeatValidate().then((function(){var t=e.formatParams();e.submit(t)})).catch((function(t){"is_required"===t?e.$Message.error("字段必填"):"is_repeat"===t&&(e.rowClassName(),e.$Message.error("字段重复")),e.submitLoading=!1}));case 3:case"end":return t.stop()}}),t)})))()},repeatValidate:function(){var e=this;return new Promise((function(t,a){for(var n=!1,i=0;i<e.data.length;i++)if(delete e.data[i].errorKey,Object.values(e.data[i]).some((function(e){return!e}))){n=!0,a("is_required");break}if(!n){if(1===e.is_repeat){var r=e.data.map((function(e){delete e.errorKey;var t=(0,l.default)({},e);return delete t.sort,Object.values(t)})),o=[];if(r&&r.length)for(var s=0;s<r.length-1;s++)for(var c=s+1;c<r.length;c++)console.log(s,c,"......."),r[s].toString()==r[c].toString()&&(o.includes(s)||o.push(s),o.includes(c)||o.push(c),a("is_repeat"));e.errIndex=o.sort()}t()}}))},rowClassName:function(e,t){return this.errIndex&&this.errIndex.length&&this.errIndex.includes(t)?"table-error-min-row":""},formatParams:function(){return this.data.map((function(e){delete e.errorKey;var t=e.sort,a=(0,o.default)(e,v);return{sort:t,data:JSON.stringify(a)}}))},submit:function(e){var t=this;this.$api.virtualAccountApi.addVirKeyData({data:e,virtual_account_id:this.virtual_account_id}).then((function(e){0===e.error&&t.tipModal(e.data)})).finally((function(){t.submitLoading=!1}))},tipModal:function(e){var t=this;if(e.length){var a=this.data.length-e.length;this.$Modal.warning({title:"提示",content:'已成功导入 <span class="success-color">'.concat(a,'</span> 条卡密数据, 发现 <span class="danger-color">').concat(e.length,"</span> 条数据为重复数据，请修改后继续导入"),onOk:function(){t.loading=!0,t.data=[],t.data=e.map((function(e){var t=e.sort,a=(0,o.default)(e,m);return(0,l.default)((0,l.default)({sort:t},JSON.parse(a.data)),{},{errorKey:!1})}));for(var a=0;a<e.length;a++)t.errIndex.push(a);t.loading=!1}})}else this.$Modal.success({title:"提示",content:'已成功导入 <span class="success-color">'.concat(this.data.length,"</span> 条数据"),onOk:function(){t.loading=!0,t.data=[t.defaultData()],t.loading=!1}})}}};t.default=g},"794d":function(e,t,a){"use strict";a("0bbb")},"7d63":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("kdx-content-bar",{attrs:{loading:e.loading},scopedSlots:e._u([{key:"btn",fn:function(){return[t("Button",{staticClass:"primary-long",attrs:{loading:e.submitLoading},on:{click:e.handleSave}},[e._v("保存")])]},proxy:!0}])},[t("div",{staticClass:"content"},[t("base-info",{ref:"baseInfo",attrs:{baseInfo:e.baseInfo,disabled:e.disabled,mailer_status:e.mailer_status},on:{"update:baseInfo":function(t){e.baseInfo=t},"update:base-info":function(t){e.baseInfo=t},getMailer:e.getMailer}}),t("base-data",{ref:"baseData",attrs:{baseData:e.baseData,disabled:e.disabled},on:{"update:baseData":function(t){e.baseData=t},"update:base-data":function(t){e.baseData=t}}})],1)])};t.render=a;var n=[];t.staticRenderFns=n},"7def":function(e,t,a){"use strict";a("ce15")},"80d1":function(e,t,a){"use strict";a.r(t);var n=a("1ccf2"),i=a("1f6f1");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("72d9");var o=a("2877"),s=Object(o["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"ea46f61e",null);t["default"]=s.exports},"86fd":function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("15fd")),r=n(a("5530"));a("d81d"),a("ac1f"),a("841c"),a("14d9");var o=n(a("f923")),s=a("3b02"),l=["data"],c={name:"list",components:{DataTable:o.default},props:{},data:function(){this.$createElement;return{loading:!1,total:1,page:{pageSize:10,pageNumber:1},status:"0",checkType:"notSale",virtual_account_id:"",time:[],search:{keyword:"",start_time:"",end_time:""},tableHeader:[],data:[],columns:[{type:"selection",width:40,align:"center"},{title:"权重值",key:"sort"},{title:"状态",key:"status",render:function(e,t){return e("div",{class:"0"===t.row.status?"danger-color":"success-color"},["0"===t.row.status?"未出售":"已出售"])}},{title:"导入时间",key:"created_at"},{title:"订单编号",key:"order_no"},{title:"下单时间",key:"order_created_at"},{title:"操作",key:"action",width:100,slot:"action"}]}},computed:{},created:function(){var e,t;null!==(e=this.$route.query)&&void 0!==e&&e.id&&(this.virtual_account_id=null===(t=this.$route.query)||void 0===t?void 0:t.id,this.getKey(),this.getList())},mounted:function(){},methods:{getKey:function(){var e=this;this.$api.virtualAccountApi.getVirKey({virtual_account_id:this.virtual_account_id}).then((function(t){0===t.error&&(e.tableHeader=t.data.config.map((function(e){return e.key})))}))},changeType:function(e){"sale"===e&&(this.status="1"),"notSale"===e&&(this.status="0"),this.getList()},getList:function(){var e=this;this.loading=!0;var t=(0,r.default)((0,r.default)({},this.search),{},{pagesize:this.page.pageSize,page:this.page.pageNumber,virtual_account_id:this.virtual_account_id,status:this.status});this.$api.virtualAccountApi.getVirKeyData(t).then((function(t){e.loading=!1,0===t.error&&(t.list=t.list.map((function(e){var t=e.data,a=(0,i.default)(e,l);return(0,r.default)((0,r.default)({},a),JSON.parse(t))})),e.data=t.list,e.total=t.total)}))},changeDate:function(e){this.search.start_time=e[0],this.search.end_time=e[1]},handleSearch:function(){this.refreshTable()},handleReset:function(){this.search={keyword:"",start_time:"",end_time:""},this.time=[],this.refreshTable()},refreshTable:function(){this.page={pageSize:10,pageNumber:1},this.$refs["table_list"].reset(this.page),this.getList()},handleExport:function(){var e=Object.assign({export:"1",virtual_account_id:this.virtual_account_id},this.search);(0,s.Export)("manage/virtualAccount/virtual-account-data/index",e)},handleEdit:function(e){this.$router.push({path:"/virtualAccount/library/edit",query:{id:e}})},handleDelete:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"是否删除该卡密库",onOk:function(){t.$api.virtualAccountApi.virtualAccountDelete({id:e}).then((function(e){0===e.error&&(t.$Message.success("删除成功"),t.getList())}))}})},changePage:function(e){this.page=e,this.getList()},selectChange:function(e){console.log(e,">>>")},checkboxChange:function(e){console.log(e)}}};t.default=c},"8cc3":function(e,t,a){"use strict";a.r(t);var n=a("4aac"),i=a("4fc0");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("794d");var o=a("2877"),s=Object(o["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"59c663fa",null);t["default"]=s.exports},"8d0d":function(e,t,a){"use strict";a("8fba")},"8fba":function(e,t,a){},9156:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("e9c4"),a("07ac");var i=n(a("5530")),r={name:"UpdateKeyData",components:{},props:{value:{type:Boolean,default:!1},editData:{type:Object,default:function(){}}},data:function(){return{model:{},rules:{}}},computed:{},watch:{editData:{handler:function(e){this.model=(0,i.default)({},e.obj)}}},created:function(){},mounted:function(){},methods:{handleCancel:function(){this.$emit("input",!1)},handleOk:function(){var e=this;if(this.isObjectValueEqual(this.model,this.editData.obj))this.handleCancel();else{var t={id:this.editData.id,virtual_account_id:this.editData.virtual_account_id,data:JSON.stringify(this.model)};this.$api.virtualAccountApi.updateVirData(t).then((function(t){0===t.error&&(e.$Message.success("修改成功"),e.$emit("getList"))})),this.handleCancel()}},isObjectValueEqual:function(e,t){var a=Object.values(e),n=Object.values(t);if(a.length!==n.length)return!1;for(var i=0;i<a.length;i++)if(a[i]!==n[i])return!1;return!0}}};t.default=r},9518:function(e,t,a){e.exports=a.p+"static/dist/shop/img/address.png"},9729:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ac1f"),a("841c"),a("d3b7"),a("159b"),a("14d9"),a("d81d");var i=n(a("5530")),r={name:"index",components:{},props:{},data:function(){return{loading:!1,total:1,page:{pageSize:10,pageNumber:1},search:{keyword:""},isSelectAll:!1,selectRows:[],data:[],columns:[{type:"selection",width:40,align:"center"},{title:"卡密库名称",key:"name"},{title:"总库存",key:"stock"},{title:"已售",key:"sell_count"},{title:"创建时间",key:"created_at"},{title:"删除时间",key:"updated_at"},{title:"操作",key:"action",width:200,slot:"action"}]}},computed:{selectDisabled:function(){return 0===this.selectRows.length},noViewPerm:function(){return!this.$getPermMap("virtualAccountData.index.view")},noManagePerm:function(){return!this.$getPermMap("virtualAccount.recycleBin.manage")}},created:function(){},mounted:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0;var t=(0,i.default)((0,i.default)({},this.search),{},{pagesize:this.page.pageSize,page:this.page.pageNumber});this.$api.virtualAccountApi.recycleList(t).then((function(t){e.loading=!1,0===t.error&&(e.data=t.list,e.total=t.total)}))},handleSearch:function(){this.refreshTable()},handleReset:function(){this.search={keyword:""},this.refreshTable()},refreshTable:function(){this.page={pageSize:10,pageNumber:1},this.$refs["page"].reset(),this.getList()},selectChange:function(e){this.selectRows=e,this.isSelectAll=this.selectRows.length===this.data.length},checkboxChange:function(e){var t=this;this.$refs["table"].selectAll(e),this.data.forEach((function(a,n){t.$set(t.data[n],"_checked",e)})),this.selectRows=e?this.data:[]},initFooterData:function(){this.isSelectAll=!1,this.selectRows=[]},changePage:function(e){this.page=e,this.getList(),this.initFooterData()},toData:function(e){this.$router.push({path:"/virtualAccount/library/data/list",query:{id:e}})},handleRecover:function(e,t){var a=this;"1"===e&&(t=this.selectRows.map((function(e){return e.id}))),this.$Modal.confirm({title:"提示",content:"是否恢复卡密库",onOk:function(){a.$api.virtualAccountApi.recycleBinRecover({id:t}).then((function(e){0===e.error&&(a.$Message.success("恢复成功"),a.selectRows=[],a.isSelectAll=!1,a.getList())}))}})},handleDelete:function(e,t){var a=this;"1"===e&&(t=this.selectRows.map((function(e){return e.id}))),this.$Modal.confirm({title:"提示",content:"是否彻底删除卡密库",onOk:function(){a.$api.virtualAccountApi.recycleBinDelete({id:t}).then((function(e){0===e.error&&(a.$Message.success("删除成功"),a.selectRows=[],a.isSelectAll=!1,a.getList())}))}})}}};t.default=r},"99f8":function(e,t,a){"use strict";a.r(t);var n=a("e8ec"),i=a("a94a");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("c7ee");var o=a("2877"),s=Object(o["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"c64cde0c",null);t["default"]=s.exports},"9c4f":function(e,t,a){"use strict";a.r(t);var n=a("d47d"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},a00f:function(e,t,a){},a2f7:function(e,t,a){"use strict";a.r(t);var n=a("f1a0"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},a4097:function(e,t,a){"use strict";a.r(t);var n=a("d676"),i=a("a2f7");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("0df3");var o=a("2877"),s=Object(o["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"031d859b",null);t["default"]=s.exports},a4a8:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("kdx-modal-frame",{attrs:{value:e.value,title:"快速导入数据",cancelText:"关闭",okText:"导入"},on:{"on-cancel":e.handleCancel,"on-ok":e.handleOk}},[t("div",{staticClass:"content"},[t("kdx-hint-alert",{staticStyle:{"margin-bottom":"10px"}},[t("p",[e._v("一条数据为一行，一条数据内包含多个字段时需要用英文“, ”隔开。添加多条时需要进行换行添加。")])]),t("Input",{attrs:{type:"textarea",autosize:{minRows:12},placeholder:""},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}})],1)])};t.render=a;var n=[];t.staticRenderFns=n},a5cb:function(e,t,a){"use strict";a("2e1e")},a94a:function(e,t,a){"use strict";a.r(t);var n=a("72ed"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},a955:function(e,t,a){"use strict";a.r(t);var n=a("be49"),i=a("b839");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("55d4");var o=a("2877"),s=Object(o["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"e605893c",null);t["default"]=s.exports},b1c6:function(e,t,a){e.exports=a.p+"static/dist/shop/img/info.png"},b839:function(e,t,a){"use strict";a.r(t);var n=a("7837"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},ba67:function(e,t,a){"use strict";a.r(t);var n=a("4d83"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},be00:function(e,t,a){},be49:function(e,t,a){"use strict";var n=a("01a87");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},bed7:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("4e82");var n=function(){var e=this,t=e._self._c;return t("kdx-modal-frame",{attrs:{value:e.value,title:"修改权重值"},on:{"on-cancel":e.handleCancel,"on-ok":e.handleOk}},[t("div",{staticClass:"content"},[t("Form",{ref:"form",attrs:{model:e.model,"label-width":140}},[t("FormItem",{attrs:{label:"权重："}},[t("kdx-rr-input",{staticClass:"width-250",attrs:{number:"",fixed:0},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1)],1)],1)])};t.render=n;var i=[];t.staticRenderFns=i},c6fe:function(e,t,a){"use strict";a.r(t);var n=a("e2f5"),i=a("40ac");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("3e94");var o=a("2877"),s=Object(o["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"2a6058ee",null);t["default"]=s.exports},c7ee:function(e,t,a){"use strict";a("d37d")},cc6e4:function(e,t,a){"use strict";var n=a("7d63");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},ce15:function(e,t,a){},d28e:function(e,t,a){},d37d:function(e,t,a){},d47d:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("2909"));a("a9e3"),a("d81d"),a("a434"),a("99af"),a("4e82"),a("14d9"),a("d3b7"),a("159b");var r=n(a("c6fe")),o=n(a("d530")),s={name:"DataTable",components:{UpdateKeyData:r.default,UpdateSort:o.default},props:{type:{type:String,default:"notSale"},virtual_account_id:{type:String,default:""},tableHeader:{type:Array,default:function(){return[]}},list:{type:Array,default:function(){return[]}},pageSize:{type:Number,default:10},current:{type:Number,default:1},total:{type:Number,default:0}},data:function(){var e=this;this.$createElement;return{loading:!1,isSelectAll:!1,selectRows:[],sortID:"",updateKeyDataModel:!1,updateSortModel:!1,editData:{},columns:[{title:"状态",key:"status",render:function(e,t){return e("div",{class:"1"===t.row.status?"success-color":"danger-color"},["0"===t.row.status?"未出售":"1"===t.row.status?"已出售":"待支付"])}},{title:"导入时间",key:"created_at"},{title:"订单编号",key:"order_no",render:function(t,a){return t("div",{class:"rr-brand-color pointer",on:{click:function(){e.checkDetail(a.row.order_id,a.row.order_status)}}},[a.row.order_no])}},{title:"下单时间",key:"order_created_at"}]}},computed:{noDataManagePerm:function(){return!this.$getPermMap("virtualAccountData.index.manage")},selectDisabled:function(){return 0===this.selectRows.length},handleColumn:function(){var e=this,t=this.$createElement,a=this.tableHeader.map((function(a){return{title:"",key:"value",slot:"key",renderHeader:function(){return t("div",[a])},render:function(t,a){return t("div",[a.row["value".concat("sale"===e.type?a.column._index+1:a.column._index-1)]||"-"])}}})),n=(0,i.default)(this.columns);if("sale"===this.type)n.splice.apply(n,[0,0].concat((0,i.default)(a)));else if("notSale"===this.type){var r=[{type:"selection",width:40,align:"center"},{title:"权重值",key:"sort",render:function(t,a){return t("div",[t("div",{class:"sort flex",style:{display:e.sortID!==a.row.id?"block":"none"}},[t("span",[a.row.sort]),t("span",{class:"iconfont icon-shangpinliebiao-bianji icon",on:{click:function(){e.changeSort(a.row.id)}}})]),t("kdx-rr-input",{ref:"update_sort",attrs:{id:"update_sort".concat(a.row.id),type:"text",number:!0,fixed:0,autofocus:!0,placeholder:"请输入"},class:"width-70",style:{display:e.sortID===a.row.id?"block":"none"},on:{"on-blur":function(t){e.endUpdateSort(t,a.row)}},model:{value:e.list[a.index].sort,callback:function(t){e.$set(e.list[a.index],"sort",t)}}})])}}],o={title:"操作",key:"action",width:100,slot:"action"};n.splice.apply(n,[0,0].concat(r)),n.splice.apply(n,[2,0].concat((0,i.default)(a))),n.push(o)}return n}},created:function(){},mounted:function(){},methods:{getList:function(){this.$emit("getList")},changeSort:function(e){this.sortID=e,this.$nextTick((function(){document.getElementById("update_sort".concat(e)).getElementsByTagName("input")[0].focus()}))},endUpdateSort:function(e,t){this.sortID=-1,this.updateData({id:t.id,sort:t.sort},"修改成功")},updateData:function(e,t){var a=this;this.$api.virtualAccountApi.changeVirtualSort(e).then((function(e){0===e.error&&(a.$Message.success(t),a.selectRows=[],a.isSelectAll=!1,a.getList())}))},bathChangeSort:function(e){var t={id:this.selectRows.map((function(e){return e.id})),sort:e};this.updateData(t,"修改成功")},updateSort:function(){this.selectRows.length&&(this.updateSortModel=!0)},handleEdit:function(e){var t={};for(var a in e)-1!==a.indexOf("value")&&(t[a]=e[a]);this.editData={id:e.id,virtual_account_id:this.virtual_account_id,tableHeader:this.tableHeader,obj:t},this.updateKeyDataModel=!0},handleDelete:function(e,t){var a=this;"1"===e&&(t=this.selectRows.map((function(e){return e.id}))),this.$Modal.confirm({title:"提示",content:"您确认删除卡密数据",onOk:function(){a.updateData({id:t,is_delete:1},"删除成功")}})},changePage:function(e){this.$emit("on-page-change",e)},handleRefresh:function(){this.$emit("on-refresh"),this.reset()},reset:function(e){this.$refs["page"].reset(e)},selectChange:function(e){this.selectRows=e,this.isSelectAll=this.selectRows.length===this.list.length},checkboxChange:function(e){var t=this;this.$refs["table"].selectAll(e),this.list.forEach((function(a,n){t.$set(t.list[n],"_checked",e)})),this.selectRows=e?this.data:[]},checkDetail:function(e,t){var a="";"10"==t||"11"==t?a="/order/detail/send":"0"==t?a="/order/detail/payment":"20"==t?a="/order/detail/receive":"30"==t?a="/order/detail/achieve":"-1"==t&&(a="/order/detail/close"),this.$utils.openNewWindowPage(a,{id:e})}}};t.default=s},d530:function(e,t,a){"use strict";a.r(t);var n=a("081f"),i=a("64b7");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("2441");var o=a("2877"),s=Object(o["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"3e965a3c",null);t["default"]=s.exports},d676:function(e,t,a){"use strict";var n=a("dc7e");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},dc7e:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("b0c0");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"base-info"},[t("Form",{ref:"form",attrs:{model:e.model,rules:e.rules,"label-width":120}},[t("kdx-form-title",[e._v("基础信息")]),t("FormItem",{attrs:{label:"卡密库名称：",prop:"name",error:e.nameError}},[t("Input",{staticClass:"width-340",attrs:{maxlength:"20","show-word-limit":"",placeholder:"如：游戏点卡"},on:{"on-blur":e.checkVirtualName},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"使用说明："}},[t("RadioGroup",{model:{value:e.model.use_description,callback:function(t){e.$set(e.model,"use_description",t)},expression:"model.use_description"}},[t("Radio",{attrs:{label:1}},[e._v("开启")]),t("Radio",{attrs:{label:0}},[e._v("关闭 "),t("kdx-hint-tooltip",{staticStyle:{"margin-left":"-6px"},attrs:{type:"image",image:a("b1c6")}})],1)],1),1===e.model.use_description?t("div",{staticClass:"bg-color"},[t("FormItem",{attrs:{label:"文字标题：",prop:"use_description_title"}},[t("Input",{staticClass:"width-340",attrs:{maxlength:"20","show-word-limit":"",placeholder:"请输入使用说明标题"},model:{value:e.model.use_description_title,callback:function(t){e.$set(e.model,"use_description_title",t)},expression:"model.use_description_title"}})],1),t("FormItem",{attrs:{label:"说明内容：",prop:"use_description_remark"}},[t("Input",{staticClass:"width-340",attrs:{type:"textarea",rows:1,autosize:"",maxlength:"50","show-word-limit":"",placeholder:"请输入说明内容"},model:{value:e.model.use_description_remark,callback:function(t){e.$set(e.model,"use_description_remark",t)},expression:"model.use_description_remark"}})],1)],1):e._e()],1),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"使用地址："}},[t("RadioGroup",{model:{value:e.model.use_address,callback:function(t){e.$set(e.model,"use_address",t)},expression:"model.use_address"}},[t("Radio",{attrs:{label:1}},[e._v("开启")]),t("Radio",{attrs:{label:0}},[e._v("关闭")])],1),t("kdx-hint-text",[t("span",[e._v("开启后，手机浏览器H5端用户在完成订单后，可直接点击跳转到相应卡密使用的地址。")]),t("kdx-hint-tooltip",{attrs:{type:"image",image:a("9518")}})],1),1===e.model.use_address?t("div",{staticClass:"bg-color"},[t("FormItem",{attrs:{label:"文字标题：",prop:"use_address_title"}},[t("Input",{staticClass:"width-340",attrs:{maxlength:"20","show-word-limit":"",placeholder:"请输入使用说明标题"},model:{value:e.model.use_address_title,callback:function(t){e.$set(e.model,"use_address_title",t)},expression:"model.use_address_title"}})],1),t("FormItem",{attrs:{label:"链接地址：",prop:"use_address_address"}},[t("Input",{staticClass:"width-340",attrs:{placeholder:"支持http或https"},model:{value:e.model.use_address_address,callback:function(t){e.$set(e.model,"use_address_address",t)},expression:"model.use_address_address"}})],1)],1):e._e()],1),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"发送顺序："}},[t("RadioGroup",{model:{value:e.model.sequence,callback:function(t){e.$set(e.model,"sequence",t)},expression:"model.sequence"}},[t("Radio",{attrs:{label:0}},[e._v("按最新导入发送")]),t("Radio",{attrs:{label:1}},[e._v("按卡密权重值发送")])],1),0===e.model.sequence?t("kdx-hint-text",[e._v("按照最新的添加时间进行发送，时间相同时按照自增ID倒叙依次发送")]):e._e(),1===e.model.sequence?t("kdx-hint-text",[e._v("新增卡密数据默认权重为0，在不改变卡密权重时，按照数据库中的自增ID进行发送，权重值数字越大，权重越大。")]):e._e()],1),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"邮箱发送："}},[t("RadioGroup",{model:{value:e.model.mailer,callback:function(t){e.$set(e.model,"mailer",t)},expression:"model.mailer"}},[t("Radio",{attrs:{label:1,disabled:e.mailer_status}},[e._v("开启")]),t("Radio",{attrs:{label:0,disabled:e.mailer_status}},[e._v("关闭")])],1),t("kdx-hint-text",[e.mailer_status?t("div",[t("span",{staticClass:"danger-color marginR-10"},[e._v("邮箱配置暂未开启，请前往消息通知进行配置")]),t("Button",{staticClass:"marginR-10",attrs:{type:"text"},on:{click:e.toSet}},[e._v("立即配置")]),t("Button",{attrs:{type:"text"},on:{click:e.getMailer}},[e._v("刷新")]),t("div",[t("span",[e._v("开启后，支持卡密信息已邮件形式发送到用户邮箱。")])])],1):t("div",[t("span",[e._v("开启后，支持卡密信息已邮件形式发送到用户邮箱。")]),t("Button",{staticClass:"marginR-10",attrs:{type:"text"},on:{click:e.toSet}},[e._v("立即配置")]),t("Button",{attrs:{type:"text"},on:{click:e.getMailer}},[e._v("刷新")])],1)])],1)],1)],1)};t.render=n;var i=[];t.staticRenderFns=i},e231:function(e,t,a){"use strict";var n=a("22ff");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},e2a3:function(e,t,a){"use strict";var n=a("08f0");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},e2f5:function(e,t,a){"use strict";var n=a("2a1f");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},e386:function(e,t,a){"use strict";a("f30a0")},e8ec:function(e,t,a){"use strict";var n=a("a4a8");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},eaaa:function(e,t,a){},f1a0:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("5530"));a("d9e2"),a("b0c0"),a("d3b7");var r={name:"BaseInfo",components:{},props:{baseInfo:{type:Object,default:function(){}},disabled:{type:Boolean,default:!1},mailer_status:{type:Boolean,default:!1}},data:function(){var e=this;return{nameError:"",oldName:"",model:{name:"",use_description:0,use_description_title:"使用说明",use_description_remark:"",use_address:0,use_address_title:"使用地址",use_address_address:"",sequence:0,mailer:0},rules:{name:[{required:!0,message:"卡密库名称必填"},{validator:function(t,a,n){e.nameError?n(new Error("卡密库名称已存在")):n()},trigger:"blur"}],use_description_title:[{required:!0,message:"使用说明标题必填"}],use_description_remark:[{required:!0,message:"使用说明必填"}],use_address_title:[{required:!0,message:"使用地址标题必填"}],use_address_address:[{required:!0,message:"使用地址必填"}]}}},computed:{},watch:{baseInfo:{handler:function(e){this.oldName=e.name,this.model=Object.assign({},e)}}},created:function(){},mounted:function(){},methods:{getMailer:function(){this.$emit("getMailer")},checkVirtualName:function(e){var t=this;if((e.target.value!==this.oldName||!this.disabled)&&e.target.value){var a={name:e.target.value};this.nameError="",this.$api.virtualAccountApi.checkvirtualAccounName(a,{nomessage:!0}).then((function(e){0===e.error?t.nameError="":t.nameError="卡密库名称已存在"}))}},validateForm:function(){var e=this;return new Promise((function(t,a){e.$refs["form"].validate((function(e){e?t(e):a()}))}))},getParams:function(){return(0,i.default)({},this.model)},toSet:function(){this.$utils.openNewWindowPage("/notice/email/index")}}};t.default=r},f244:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ac1f"),a("841c"),a("14d9");var i=n(a("5530")),r={name:"list",components:{},props:{},data:function(){this.$createElement;return{loading:!1,total:1,page:{pageSize:10,pageNumber:1},search:{keyword:""},data:[],columns:[{title:"卡密库名称",key:"name"},{title:"总库存",key:"stock"},{title:"剩余库存",key:"remaining_count"},{title:"邮箱状态",key:"mailer",render:function(e,t){return e("div",{class:"0"===t.row.mailer?"danger-color":"success-color"},["0"===t.row.mailer?"已关闭":"已开启"])}},{title:"创建时间",key:"created_at"},{title:"操作",key:"action",width:280,slot:"action"}]}},computed:{noManagePerm:function(){return!this.$getPermMap("virtualAccount.index.manage")},noDataViewPerm:function(){return!this.$getPermMap("virtualAccountData.index.view")},noDataManagePerm:function(){return!this.$getPermMap("virtualAccountData.index.manage")}},created:function(){},mounted:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0;var t=(0,i.default)((0,i.default)({},this.search),{},{pagesize:this.page.pageSize,page:this.page.pageNumber});this.$api.virtualAccountApi.virtualAccountList(t).then((function(t){e.loading=!1,0===t.error&&(e.data=t.list,e.total=t.total)}))},handleSearch:function(){this.refreshTable()},handleReset:function(){this.search={keyword:""},this.refreshTable()},refreshTable:function(){this.page={pageSize:10,pageNumber:1},this.$refs["page"].reset(),this.getList()},handleClick:function(e,t){var a="/virtualAccount/library/edit";"addData"===t?a="/virtualAccount/library/data/index":"viewData"===t&&(a="/virtualAccount/library/data/list"),this.$router.push({path:a,query:{id:e}})},handleDelete:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"是否删除该卡密库",onOk:function(){t.$api.virtualAccountApi.virtualAccountDelete({id:e}).then((function(e){0===e.error&&(t.$Message.success("删除成功"),t.getList())}))}})},changePage:function(e){this.page=e,this.getList()}}};t.default=r},f30a0:function(e,t,a){},f5bd:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("ac1f"),a("841c");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"virtual-account-list"},[t("kdx-header-bar",[t("Form",{ref:"form",attrs:{model:e.search,"label-width":100,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormItem",{attrs:{label:"卡密库名称："}},[t("Input",{staticClass:"width-340",attrs:{type:"text",placeholder:"请输入卡密库名称"},on:{"on-enter":e.handleSearch},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,"keyword",t)},expression:"search.keyword"}})],1),t("div",{staticClass:"ivu-form-item-btn"},[t("Button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")]),t("Button",{attrs:{type:"text"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-list"},[t("Table",{ref:"table",attrs:{columns:e.columns,data:e.data},on:{"on-selection-change":e.selectChange},scopedSlots:e._u([{key:"action",fn:function(a){var n=a.row;return[t("div",[t("Button",{staticClass:"marginR-10",attrs:{type:"text",disabled:e.noViewPerm},on:{click:function(t){return e.toData(n.id)}}},[e._v("查看数据")]),t("Button",{staticClass:"marginR-10",attrs:{type:"text",disabled:e.noManagePerm},on:{click:function(t){return e.handleRecover("0",n.id)}}},[e._v("恢复")]),t("Button",{attrs:{type:"text",disabled:e.noManagePerm},on:{click:function(t){return e.handleDelete("0",n.id)}}},[e._v("彻底删除")])],1)]}}])}),e.data.length>0?t("div",{staticClass:"footer-action"},[t("Checkbox",{on:{"on-change":e.checkboxChange},model:{value:e.isSelectAll,callback:function(t){e.isSelectAll=t},expression:"isSelectAll"}}),t("Button",{attrs:{disabled:e.selectDisabled||e.noManagePerm},on:{click:function(t){return e.handleRecover("1")}}},[e._v("恢复")]),t("Button",{attrs:{disabled:e.selectDisabled||e.noManagePerm},on:{click:function(t){return e.handleDelete("1")}}},[e._v("彻底删除")])],1):e._e(),t("div",{staticClass:"footer-page"},[t("kdx-page-component",{ref:"page",attrs:{total:e.total},on:{"on-change":e.changePage}})],1)],1),e._t("default")],2)};t.render=n;var i=[];t.staticRenderFns=i},f923:function(e,t,a){"use strict";a.r(t);var n=a("e2a3"),i=a("9c4f");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("7def");var o=a("2877"),s=Object(o["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"19d142a4",null);t["default"]=s.exports}}]);