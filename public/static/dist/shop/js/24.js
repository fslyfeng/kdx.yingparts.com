(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{"0863":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("d3b7"),n("159b"),n("d81d"),n("ddb0"),n("14d9"),n("ac1f"),n("5319");var a=n("2569"),i={},r=[];a.keys().map((function(e){return"./index.js"!=e?(r.push(e.replace(/(\.\/|\.js)/g,"").toLowerCase()),a(e).default):""})).forEach((function(e,t){i[r[t]]=e}));var o=i;t.default=o},2569:function(e,t,n){var a={"./Coupon.js":"90df","./Diyform.js":"3b47","./Goods.js":"70b7","./index.js":"0863"};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id="2569"},"257e":function(e,t,n){"use strict";function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.r(t),n.d(t,"default",(function(){return a}))},"262ed":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var a=n("b380");function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Object(a["a"])(e,t)}},"264c":function(e,t,n){"use strict";var a=n("f87d");n.o(a,"render")&&n.d(t,"render",(function(){return a["render"]})),n.o(a,"staticRenderFns")&&n.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"2caf":function(e,t,n){"use strict";function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}n.r(t),n.d(t,"default",(function(){return o}));var i=n("d967"),r=n("99de");function o(e){var t=Object(i["a"])();return function(){var n,i=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(r["default"])(this,n)}}},"3b47":function(e,t,n){var a=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("d4ec")),r=a(n("bee2")),o=a(n("365c")),u=function(){function e(){(0,i.default)(this,e)}return(0,r.default)(e,[{key:"update",value:function(e){console.log(e.id,e,o.default)}}]),e}(),d=new u;t.default=d},"70b7":function(e,t,n){var a=n("dbce").default,i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("d9e2"),n("d3b7"),n("159b"),n("14d9"),n("d81d"),n("4de4"),n("99af"),n("a15b");var r=i(n("99de")),o=i(n("257e")),u=i(n("5530")),d=i(n("262ed")),c=i(n("2caf")),s=i(n("d4ec")),l=i(n("bee2")),f=i(n("365c")),p=a(n("d1be")),h=function(){function e(){(0,s.default)(this,e)}return(0,l.default)(e,[{key:"getGoodsList",value:function(){throw new Error("Please implement it in a subclass")}}]),e}(),m=function(e){(0,d.default)(n,e);var t=(0,c.default)(n);function n(e){var a;return(0,s.default)(this,n),a=t.call(this,e),a.getParams=function(e){var t={0:{key:"",by:"desc"},1:{key:"sales",by:"desc"},2:{key:"price",by:"desc"},3:{key:"price",by:"asc"}},n={label_field:"",sort:t[e.params.goodssort].key,by:t[e.params.goodssort].by},a=[];switch(e.params.goodsdata+""){case"0":e.data.forEach((function(e){e.gid&&a.push(e.gid)})),n=a.length?{ids:a,sort:"",by:"",page:1,pagesize:e.data.length}:null;break;case"1":n=e.params.cateid?(0,u.default)((0,u.default)({},n),{},{category_id:e.params.cateid,page:1,pagesize:e.data.length}):null;break;case"2":n=e.params.groupid?(0,u.default)((0,u.default)({},n),{},{group_id:e.params.groupid,page:1,pagesize:e.data.length}):null;break;case"3":case"is_new":n=(0,u.default)((0,u.default)({},n),{},{is_new:1,page:1,pagesize:e.data.length});break;case"4":case"is_hot":n=(0,u.default)((0,u.default)({},n),{},{is_hot:1,page:1,pagesize:e.data.length});break;case"5":case"is_recommand":n=(0,u.default)((0,u.default)({},n),{},{is_recommand:1,page:1,pagesize:e.data.length});break}return n&&(n.get_activity=1),n},a.getGoodsList=function(e){return new Promise((function(t){var n=e.data;if(n&&n.length){var i=a.getParams(e);if(!i)return;f.default.goodsApi.goodsList(i).then((function(e){if(0==e.error){var n=e.list.filter((function(e){return e})).map((function(e){var t,n,a,i={thumb:p.media(e.thumb),price:parseFloat(null!==(t=e.activities)&&void 0!==t&&t.member_price?null===(n=e.activities)||void 0===n?void 0:n.member_price:e.price),productprice:parseFloat(e.original_price),title:e.title,sales:e.sales,gid:e.id,bargain:0,credit:0,ctype:1,stock:e.stock,sub_name:e.sub_name,commission:(null===(a=e.activities)||void 0===a?void 0:a.commission)||null,has_option:e.has_option,goodstype:e.type,activities:null===e||void 0===e?void 0:e.activities,type:e.type};return i}));t(n)}else t([])}))}}))},a}return(0,l.default)(n)}(h),v=function(e){(0,d.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,i=new Array(a),u=0;u<a;u++)i[u]=arguments[u];return(0,r.default)(e,(e=t.call.apply(t,[this].concat(i)),e.getGoodsList=function(t){return new Promise((function(n){var a={status:"1"};"0"==t.params.creditgoodsdata&&(a.id=t.data.map((function(e){return e.id})).join(","),a.pagesize=t.data.length),f.default.creditShopApi.getList(a).then((function(t){if(0===t.error){var a=t.list.map((function(t){return e.adapterData(t)}));n(a),console.log(a,"listlist")}})).catch()}))},(0,o.default)(e)))}return(0,l.default)(n,[{key:"adapterData",value:function(e){var t=e.id,n=e.thumb,a=e.sale,i=e.type,r=e.credit_shop_stock,o={id:t,gid:t,thumb:n,act_type:i,sales:+a,stock:r,credit_shop_credit:e.credit_shop_credit,credit_shop_price:e.credit_shop_price,bargain:0,credit:0,ctype:0,type:i};if("1"==e.type){var d=e.coupon_name,c=e.content,s=e.coupon_sale_type,l=e.shop_coupon_balance,f=e.shop_coupon_credit;o=(0,u.default)((0,u.default)({},o),{},{title:d,sub_title:c,coupon_sale_type:s,shop_coupon_balance:l,shop_coupon_credit:f})}else{var p,h,m,v,b=e.title,_=e.sub_title,g=e.has_option,y=e.price,w=e.goods_type;if(o=(0,u.default)((0,u.default)({},o),{},{title:b,sub_title:_,has_option:g,type:w,productprice:y}),"1"==g)o.credit_shop_credit=null===(p=e.rules)||void 0===p||null===(h=p.min)||void 0===h?void 0:h.credit_shop_credit,o.credit_shop_price=null===(m=e.rules)||void 0===m||null===(v=m.min)||void 0===v?void 0:v.credit_shop_price}return o}}]),n}(h),b=function(){function e(){(0,s.default)(this,e)}return(0,l.default)(e,[{key:"update",value:function(e){var t;"0"==e.params.goodstype?t=new m:"1"==e.params.goodstype&&(t=new v),t.getGoodsList(e).then((function(t){e.data=t.map((function(e){return(0,u.default)((0,u.default)({},e),{},{id:e.gid})}))}))}}]),e}(),_=new b;t.default=_},"90df":function(e,t,n){var a=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("d4ec")),r=a(n("bee2")),o=a(n("365c")),u=function(){function e(){(0,i.default)(this,e)}return(0,r.default)(e,[{key:"update",value:function(e){console.log(e.id,e,o.default)}}]),e}(),d=new u;t.default=d},"99de":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return r}));var a=n("53ca"),i=n("257e");function r(e,t){if(t&&("object"===Object(a["default"])(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Object(i["default"])(e)}},c6b4:function(e,t,n){var a=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("5530")),r=n("2f62"),o=a(n("f54f")),u=a(n("0863")),d={props:{item:{type:[Object,Array],default:null},lazyUpdate:{type:Boolean,default:!1}},data:function(){return{modalShow:!1,permsChecker:{},moving:!1,updater:null}},computed:(0,i.default)((0,i.default)({chooseable:function(){return"diymenu"!=this.item.id}},(0,r.mapState)("decorate",{currentModal:function(e){return e.currentModal},onlyOneComponent:function(e){return e.onlyOneComponent},errorInfo:function(e){return e.errorInfo}})),{},{activeItem:function(){return this.currentModal===this.item&&!this.onlyOneComponent},showDel:function(){return!this.onlyOneComponent&&(this.currentModal==this.item||this.moving&&this.chooseable)&&this.currentModal.params&&!1!==this.item.params.delable}}),watch:{lazyUpdate:{immediate:!0,handler:function(){this.isEdit="edit"==this.$route.query.type,this.isEdit&&this.lazyUpdate&&(this.updater=u.default[this.item.id],this.updater&&"function"==typeof this.updater.update&&this.updater.update(this.item,this.$slots.default[0]))}},activeItem:function(e){e||(this.modalShow=!1)}},created:function(){this.permsChecker=(0,o.default)()},methods:(0,i.default)((0,i.default)({},(0,r.mapMutations)("decorate",["changeFocus","delModal"])),{},{delTmp:function(){this.modalShow=!0},sureHandler:function(){this.delModal({item:this.item,pageId:this.$route.params.page}),this.modalShow=!1},cancelHandler:function(){this.modalShow=!1},clickTmp:function(e){var t=this;if(document.getElementById("forFocus").focus(),e!==this.currentModal){if("diymenu"==e.id)return;this.$emit("beforeChange",e),this.$nextTick((function(){t.changeFocus({item:e,pageId:t.$route.params.page})}))}},mouseEnter:function(){this.moving=!0},mouseLeave:function(){this.moving=!1}})};t.default=d},de68:function(e,t,n){"use strict";n.r(t);var a=n("c6b4"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=i.a},df776:function(e,t,n){"use strict";n.r(t);var a=n("264c"),i=n("de68");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n("fe76");var o=n("2877"),u=Object(o["a"])(i["default"],a["render"],a["staticRenderFns"],!1,null,"5396a504",null);t["default"]=u.exports},eebc:function(e,t,n){},f87d:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var n=function(){var e=this,t=e._self._c;return t("div",{key:e.item._comIndex_,ref:"dragItem",staticClass:"drag-item",class:[{"active-item":e.activeItem,chooseable:e.chooseable,errorInfo:e.errorInfo&&e.errorInfo._comIndex_==e.item._comIndex_},e.item._comIndex_],on:{mouseenter:e.mouseEnter,mouseleave:e.mouseLeave,"!click":function(t){return e.clickTmp(e.item)}}},[e._t("default"),e.showDel?t("span",{staticClass:"del",attrs:{"data-html2canvas-ignore":""},on:{click:function(t){return t.stopPropagation(),e.delTmp(e.item)}}},[e._v("删除")]):e._e(),e.modalShow&&e.activeItem?t("div",{staticClass:"del-modal",attrs:{"data-html2canvas-ignore":""}},[t("div",{staticClass:"del-title"},[e._v("确认删除该组件吗？")]),t("div",{staticClass:"modal-btn-group"},[t("div",{staticClass:"modal-btn sure",on:{click:e.sureHandler}},[e._v("确认")]),t("div",{staticClass:"modal-btn cancel",on:{click:e.cancelHandler}},[e._v("取消")])])]):e._e(),t("i",{staticClass:"left-border border",attrs:{"data-html2canvas-ignore":""}}),t("i",{staticClass:"right-border border",attrs:{"data-html2canvas-ignore":""}})],2)};t.render=n;var a=[];t.staticRenderFns=a},fe76:function(e,t,n){"use strict";n("eebc")}}]);