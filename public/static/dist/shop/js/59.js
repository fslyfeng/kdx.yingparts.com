(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[59],{"0753":function(e,t,s){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,s("b0c0");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"remote-storage-ftp"},[t("kdx-hint-alert",{attrs:{"show-icon":!1}},[e._v("如果切换到七牛云存储后，需要将原有设置的附件传输至七牛云存储，相关工具： "),t("a",{attrs:{href:"https://developer.qiniu.com/sdk#tool",target:"_blank"}},[e._v("官方工具")]),t("div",{staticClass:"old-url-box"},[t("div",{staticClass:"label"},[e._v(" 当前店铺的附件地址： ")]),t("div",{staticClass:"old-url"},e._l(e.oldStorageUrl,(function(s,a){return t("div",{key:a,staticClass:"old-url-item"},[e._v(" "+e._s(s)+"； ")])})),0)])]),t("Form",{ref:"form",attrs:{model:e.model,rules:e.rules,"label-width":150}},[t("FormItem",{attrs:{label:"AccessKey：",prop:"access_key"}},[t("Input",{staticClass:"width-250",on:{"on-blur":e.blurData},model:{value:e.model.access_key,callback:function(t){e.$set(e.model,"access_key",t)},expression:"model.access_key"}}),t("kdx-hint-text",[e._v("用于签名的公钥，从 "),t("a",{attrs:{href:"https://portal.qiniu.com/user/key",target:"_blank"}},[e._v(" https://portal.qiniu.com/user/key ")]),e._v("获取 ")])],1),t("FormItem",{attrs:{label:"SecretKey：",prop:"secret_key"}},[t("Input",{staticClass:"width-250",on:{"on-blur":e.blurData},model:{value:e.model.secret_key,callback:function(t){e.$set(e.model,"secret_key",t)},expression:"model.secret_key"}}),t("kdx-hint-text",[e._v("用于签名的公钥，从 "),t("a",{attrs:{href:"https://portal.qiniu.com/user/key",target:"_blank"}},[e._v(" https://portal.qiniu.com/user/key ")]),e._v("获取 ")])],1),t("FormItem",{attrs:{label:"存储空间(Bucket)：",prop:"bucket"}},[t("Input",{staticClass:"width-250",on:{"on-blur":e.blurData},model:{value:e.model.bucket,callback:function(t){e.$set(e.model,"bucket",t)},expression:"model.bucket"}}),t("kdx-hint-text",[e._v("空间名称，请保证为公开空间")])],1),t("FormItem",{attrs:{label:"访问URL：",prop:"url"}},[t("Select",{staticClass:"url-http-select",staticStyle:{width:"80px"},model:{value:e.model.scheme,callback:function(t){e.$set(e.model,"scheme",t)},expression:"model.scheme"}},[t("Option",{attrs:{value:"http://"}},[e._v("http://")]),t("Option",{attrs:{value:"https://"}},[e._v("https://")])],1),t("Select",{staticStyle:{width:"170px"},model:{value:e.model.url,callback:function(t){e.$set(e.model,"url",t)},expression:"model.url"}},e._l(e.optionData.url,(function(s,a){return t("Option",{key:a,attrs:{value:s.id}},[e._v(" "+e._s(s.name)+" ")])})),1),t("kdx-hint-text",[e._v("访问域名，请以http://或者https://开头")])],1),"shop"===e.mode?t("FormItem",{attrs:{label:"图片自动压缩："}},[t("RadioGroup",{model:{value:e.model.image_compression,callback:function(t){e.$set(e.model,"image_compression",t)},expression:"model.image_compression"}},[t("Radio",{attrs:{label:1}},[t("span",[e._v("启用")])]),t("Radio",{attrs:{label:0}},[t("span",[e._v("不启用")])])],1),t("kdx-hint-text",[e._v("启用自动压缩可以减少流量消耗，提高用户端访问速度")]),1===+e.model.image_compression?t("div",{staticClass:"next-box"},[t("FormItem",{attrs:{label:"压缩规则："}},[t("RadioGroup",{model:{value:e.model.image_compression_rule.is_default,callback:function(t){e.$set(e.model.image_compression_rule,"is_default",t)},expression:"model.image_compression_rule.is_default"}},[t("Radio",{attrs:{label:1}},[t("span",[e._v("系统默认")])]),t("Radio",{attrs:{label:0}},[t("span",[e._v("自定义")])])],1)],1),0===+e.model.image_compression_rule.is_default?t("FormItem",{attrs:{label:"图片样式代码："}},[t("Input",{staticClass:"width-250",attrs:{placeholder:"请输入压缩代码"},model:{value:e.model.image_compression_rule.rule,callback:function(t){e.$set(e.model.image_compression_rule,"rule",t)},expression:"model.image_compression_rule.rule"}}),t("kdx-hint-tooltip",{attrs:{type:"text"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"tooltip-header"},[t("i",{staticClass:"iconfont icon-icon-test",staticStyle:{"vertical-align":"-1px","margin-left":"5px"}}),t("span",{staticClass:"hint-text"},[e._v("代码获取说明")])])]},proxy:!0}],null,!1,186440304)},[t("div",{staticClass:"storage-hint-tooltip"},[t("p",{staticClass:"title"},[e._v("七牛云图片压缩使用说明")]),t("div",{staticClass:"item"},[t("p",{staticClass:"number"},[e._v(" 1. ")]),t("p",{staticClass:"text"},[e._v(" 到www.qiniu.com登录您的七牛云存储账号 ")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"number"},[e._v(" 2. ")]),t("p",{staticClass:"text"},[e._v(" 进入【管理控制台】 ")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"number"},[e._v(" 3. ")]),t("p",{staticClass:"text"},[e._v(" 点击左侧导航中【对象存储】 ")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"number"},[e._v(" 4. ")]),t("p",{staticClass:"text"},[e._v(" 选择【图片样式】选项卡 ")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"number"},[e._v(" 5. ")]),t("p",{staticClass:"text"},[e._v(" 点击【新建图片样式】 ")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"number"},[e._v(" 6. ")]),t("p",{staticClass:"text"},[e._v(" 按照您的要求，创建您的图片压缩规则 ")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"number"},[e._v(" 7. ")]),t("p",{staticClass:"text"},[e._v(" 保存完成后，到【图片样式】选项卡中，复制该样式的 “处理接口”代码，在管理端的操作弹窗中粘贴保存即可 ")])])])])],1):e._e()],1):e._e()],1):e._e()],1)],1)};t.render=a;var r=[];t.staticRenderFns=r},"0761":function(e,t,s){"use strict";s.r(t);var a=s("4278"),r=s("3972");for(var i in r)["default"].indexOf(i)<0&&function(e){s.d(t,e,(function(){return r[e]}))}(i);s("2b40");var n=s("2877"),o=Object(n["a"])(r["default"],a["render"],a["staticRenderFns"],!1,null,"0aa67910",null);t["default"]=o.exports},"09ab":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"remote-storage-ftp"},[t("kdx-hint-alert",{attrs:{"show-icon":!1}},[e._v(" 如果切换到COS后，需要将原有设置的附件传输至腾讯COS, 相关工具： "),t("a",{attrs:{href:"https://developer.aliyun.com/ask/191405?spm=a2c6h.13524658",target:"_blank"}},[e._v("官方工具")]),t("div",{staticClass:"old-url-box"},[t("div",{staticClass:"label"},[e._v(" 当前店铺的附件地址： ")]),t("div",{staticClass:"old-url"},e._l(e.oldStorageUrl,(function(s,a){return t("div",{key:a,staticClass:"old-url-item"},[e._v(" "+e._s(s)+"； ")])})),0)])]),t("Form",{ref:"form",attrs:{model:e.model,rules:e.rules,"label-width":150}},[t("FormItem",{attrs:{label:"App ID：",prop:"app_id"}},[t("Input",{staticClass:"width-250",model:{value:e.model.app_id,callback:function(t){e.$set(e.model,"app_id",t)},expression:"model.app_id"}}),t("kdx-hint-text",[e._v("App ID 是您项目的ID")])],1),t("FormItem",{attrs:{label:"Secret ID：",prop:"secret_id"}},[t("Input",{staticClass:"width-250",model:{value:e.model.secret_id,callback:function(t){e.$set(e.model,"secret_id",t)},expression:"model.secret_id"}}),t("kdx-hint-text",[e._v("Secret ID 是您项目的安全秘钥，具有该账户完全的权限，请妥善保管")])],1),t("FormItem",{attrs:{label:"Secret Key：",prop:"secret_key"}},[t("Input",{staticClass:"width-250",attrs:{search:"","enter-button":"获取Buckets"},on:{"on-search":e.getBucket},model:{value:e.model.secret_key,callback:function(t){e.$set(e.model,"secret_key",t)},expression:"model.secret_key"}}),t("kdx-hint-text",[e._v("Secret Key 是您项目的安全秘钥，具有该账户完全的权限，请妥善保管")])],1),t("FormItem",{attrs:{label:"存储空间(Bucket)：",prop:"bucket"}},[t("Select",{staticClass:"width-250",on:{"on-change":e.getRegion},model:{value:e.model.bucket,callback:function(t){e.$set(e.model,"bucket",t)},expression:"model.bucket"}},e._l(e.option.bucket,(function(s){return t("Option",{key:s.bucket,attrs:{value:s.bucket}},[e._v(e._s(s.bucket))])})),1),t("kdx-hint-text",[e._v("请保证空间属性为 公有读私有写")])],1),t("FormItem",{attrs:{label:"地域：",prop:"region"}},[t("Select",{staticClass:"width-250",model:{value:e.model.region,callback:function(t){e.$set(e.model,"region",t)},expression:"model.region"}},e._l(e.option.region,(function(s,a){return t("Option",{key:a,attrs:{value:s.region}},[e._v(e._s(s.region))])})),1),t("kdx-hint-text",[e._v("存储空间(Bucket)所在的地域")])],1),t("FormItem",{attrs:{label:"自定义访问URL：",prop:"url"}},[t("Input",{staticClass:"width-250",model:{value:e.model.url,callback:function(t){e.$set(e.model,"url",t)},expression:"model.url"}},[t("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.model.scheme,callback:function(t){e.$set(e.model,"scheme",t)},expression:"model.scheme"}},[t("Option",{attrs:{value:"http://"}},[e._v("http://")]),t("Option",{attrs:{value:"https://"}},[e._v("https://")])],1)],1),t("kdx-hint-text",[e._v("自定义访问域名，请以 http:// 或 https:// 开头，如不填写会使用OSS默认域名")])],1)],1)],1)};t.render=s;var a=[];t.staticRenderFns=a},"0d32":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={name:"CheckLabel",props:{checked:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1}},methods:{handleClick:function(){this.disabled||this.$emit("on-change",!this.checked)}}};t.default=s},"10fe":function(e,t,s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,s("d3b7");var a={name:"FTP",props:{oldStorageUrl:{type:Array,default:function(){return[]}},mode:{type:String,default:""}},data:function(){return{model:{host:"",port:"",username:"",password:"",url:"",scheme:"http://",path:"",timeout:"",passive_mode:"1",ssl:"1"},rules:{host:[{required:!0,message:"服务器地址必填"}],port:[{required:!0,message:"端口必填"}],username:[{required:!0,message:"账号必填"}],password:[{required:!0,message:"密码必填"}]}}},methods:{validate:function(){var e=this;return new Promise((function(t){e.$refs["form"].validate().then((function(e){return t(e)}))}))},getModel:function(){return this.model},resetModel:function(e){this.model=Object.assign({host:"",port:"",username:"",password:"",url:"",scheme:"http://",path:"",timeout:"",passive_mode:"1",ssl:"1"},e)}}};t.default=a},1513:function(e,t,s){},"2aec":function(e,t,s){"use strict";s.r(t);var a=s("8d21b"),r=s("86bb");for(var i in r)["default"].indexOf(i)<0&&function(e){s.d(t,e,(function(){return r[e]}))}(i);s("7bbd");var n=s("2877"),o=Object(n["a"])(r["default"],a["render"],a["staticRenderFns"],!1,null,"70d24839",null);t["default"]=o.exports},"2b40":function(e,t,s){"use strict";s("d33f")},"30b1":function(e,t,s){"use strict";s.r(t);var a=s("950d"),r=s("d896");for(var i in r)["default"].indexOf(i)<0&&function(e){s.d(t,e,(function(){return r[e]}))}(i);s("3f08");var n=s("2877"),o=Object(n["a"])(r["default"],a["render"],a["staticRenderFns"],!1,null,"abdf171c",null);t["default"]=o.exports},3972:function(e,t,s){"use strict";s.r(t);var a=s("10fe"),r=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){s.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},"39b0":function(e,t,s){"use strict";var a=s("0753");s.o(a,"render")&&s.d(t,"render",(function(){return a["render"]})),s.o(a,"staticRenderFns")&&s.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"3f08":function(e,t,s){"use strict";s("1513")},"3f5d":function(e,t,s){"use strict";s.r(t);var a=s("987d"),r=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){s.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},4278:function(e,t,s){"use strict";var a=s("9e89");s.o(a,"render")&&s.d(t,"render",(function(){return a["render"]})),s.o(a,"staticRenderFns")&&s.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]}))},4438:function(e,t,s){"use strict";s.r(t);var a=s("e9c8"),r=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){s.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},"44d4":function(e,t,s){"use strict";s("5e17")},4744:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var s=function(){var e=this,t=e._self._c;return t("kdx-content-bar",{attrs:{loading:e.loading},scopedSlots:e._u([{key:"btn",fn:function(){return[t("Button",{staticClass:"primary-long",on:{click:e.handleSave}},[e._v("保存")])]},proxy:!0}])},[t("div",{staticClass:"remote-storage"},[t("div",{staticClass:"header"},[t("kdx-form-title",{attrs:{"has-margin":!1},scopedSlots:e._u([{key:"text",fn:function(){return[e._v("默认所有店铺使用此远程存储")]},proxy:!0}])},[e._v(" 全局配置 ")]),t("kdx-hint-alert",{attrs:{"show-icon":!1}},[t("div",{staticClass:"alert-box"},[t("div",{staticClass:"left title"},[e._v(" 温馨提示： ")]),t("div",{staticClass:"right"},[t("p",{staticClass:"title success-title"},[e._v("推荐使用远程存储")]),t("p",[e._v(" 对接FTP和七牛存等任意远程存储器，将降低对服务器加载图片的压力，提升商城的运行加载速度 ")])])])])],1),t("storage-info",{ref:"storage_info",attrs:{type:e.type},on:{"update:type":function(t){e.type=t}}})],1)])};t.render=s;var a=[];t.staticRenderFns=a},"4a3f4":function(e,t,s){"use strict";s.r(t);var a=s("bd12"),r=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){s.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},"5d8d":function(e,t,s){"use strict";s.r(t);var a=s("8a72"),r=s("4a3f4");for(var i in r)["default"].indexOf(i)<0&&function(e){s.d(t,e,(function(){return r[e]}))}(i);s("e5b7");var n=s("2877"),o=Object(n["a"])(r["default"],a["render"],a["staticRenderFns"],!1,null,"2d271302",null);t["default"]=o.exports},"5ddde":function(e,t,s){"use strict";var a=s("c109");s.o(a,"render")&&s.d(t,"render",(function(){return a["render"]})),s.o(a,"staticRenderFns")&&s.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"5e17":function(e,t,s){},"6b7b":function(e,t,s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,s("d3b7"),s("b0c0");var a={name:"FTP",props:{mode:{type:String},oldStorageUrl:{type:Array,default:function(){return[]}}},data:function(){return{model:{access_key:"",secret_key:"",bucket:"",url:"",scheme:"http://"},rules:{access_key:[{required:!0,message:"Access Key ID必填"}],secret_key:[{required:!0,message:"Access Key Secret必填"}],bucket:[{required:!0,message:"存储空间（Bucket）必填"}]},option:{bucket:[]}}},methods:{validate:function(){var e=this;return new Promise((function(t){e.$refs["form"].validate().then((function(e){return t(e)}))}))},getModel:function(){return this.model},getBucket:function(){var e=this;if(this.model.access_key&&this.model.secret_key){var t="storage"===this.$route.name?0:this.$route.query.id,s={access_key:this.model.access_key,secret_key:this.model.secret_key,shop_id:t};this.$api.systemApi.getAliBucket(s).then((function(t){0===t.error&&(e.option.bucket=t.bucket_list||[])}))}},resetModel:function(e){var t={};"shop"===this.mode&&(t={image_compression:0,image_compression_rule:{is_default:0,rule:""}}),this.model=Object.assign({access_key:"",secret_key:"",bucket:"",url:"",scheme:"http://"},t,e),this.getBucket()}}};t.default=a},7615:function(e,t,s){"use strict";s.r(t);var a=s("39b0"),r=s("d900");for(var i in r)["default"].indexOf(i)<0&&function(e){s.d(t,e,(function(){return r[e]}))}(i);s("c8ea");var n=s("2877"),o=Object(n["a"])(r["default"],a["render"],a["staticRenderFns"],!1,null,"1a6b40d0",null);t["default"]=o.exports},"7a85":function(e,t,s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,s("d3b7"),s("b0c0"),s("d81d");var a={name:"FTP",props:{mode:{type:String},oldStorageUrl:{type:Array,default:function(){return[]}}},data:function(){return{model:{access_key:"",secret_key:"",bucket:"",url:"",scheme:"http://",image_compression:0,image_compression_rule:{is_default:0,rule:""}},rules:{access_key:[{required:!0,message:"AccessKey必填"}],secret_key:[{required:!0,message:"SecretKey必填"}],bucket:[{required:!0,message:"存储空间(Bucket)必填"}],url:[{required:!0,message:"访问URL必填"}]},loading:!1,optionData:{url:[]}}},methods:{validate:function(){var e=this;return new Promise((function(t){e.$refs["form"].validate().then((function(e){return t(e)}))}))},getModel:function(){return this.model},blurData:function(){if(this.model.access_key&&this.model.secret_key&&this.model.bucket){var e="storage"===this.$route.name?0:this.$route.query.id,t={access_key:this.model.access_key,secret_key:this.model.secret_key,bucket:this.model.bucket,shop_id:e};this.getUrl(t)}},getUrl:function(e){var t=this;this.$api.systemApi.getQiniuUrl(e).then((function(e){var s=e.error,a=e.domain_list,r=void 0===a?[]:a;0===s&&(t.optionData.url=r.map((function(e){return{id:e,name:e}})))}))},resetModel:function(e){var t={};"shop"===this.mode&&(t={image_compression:0,image_compression_rule:{is_default:1,rule:""}}),this.model=Object.assign({access_key:"",secret_key:"",bucket:"",url:"",scheme:"http://"},t,e),this.blurData()},handleSetting:function(){this.$refs["photo_compression"].setValue()},checkUsing:function(){this.$refs["use_direction"].setValue()}}};t.default=a},"7bbd":function(e,t,s){"use strict";s("f8c8")},"7bda":function(e,t,s){"use strict";s.r(t);var a=s("982f"),r=s("3f5d");for(var i in r)["default"].indexOf(i)<0&&function(e){s.d(t,e,(function(){return r[e]}))}(i);s("9ee68");var n=s("2877"),o=Object(n["a"])(r["default"],a["render"],a["staticRenderFns"],!1,null,"9c2cd4f0",null);t["default"]=o.exports},"86bb":function(e,t,s){"use strict";s.r(t);var a=s("6b7b"),r=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){s.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},"8a72":function(e,t,s){"use strict";var a=s("4744");s.o(a,"render")&&s.d(t,"render",(function(){return a["render"]})),s.o(a,"staticRenderFns")&&s.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"8d21b":function(e,t,s){"use strict";var a=s("e840");s.o(a,"render")&&s.d(t,"render",(function(){return a["render"]})),s.o(a,"staticRenderFns")&&s.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"950d":function(e,t,s){"use strict";var a=s("c8d4");s.o(a,"render")&&s.d(t,"render",(function(){return a["render"]})),s.o(a,"staticRenderFns")&&s.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"982f":function(e,t,s){"use strict";var a=s("09ab");s.o(a,"render")&&s.d(t,"render",(function(){return a["render"]})),s.o(a,"staticRenderFns")&&s.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"987d":function(e,t,s){var a=s("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(s("2909"));s("d3b7"),s("b0c0"),s("4de4");var i={name:"FTP",props:{oldStorageUrl:{type:Array,default:function(){return[]}},mode:{type:String,default:""}},data:function(){return{model:{app_id:"",secret_id:"",secret_key:"",bucket:"",region:"",url:"",scheme:"http://"},rules:{app_id:[{required:!0,message:"APP ID必填"}],secret_id:[{required:!0,message:"Secret ID必填"}],secret_key:[{required:!0,message:"Secret Key必填"}],bucket:[{required:!0,message:"存储空间(Bucket)必填"}],region:[{required:!0,message:"地域必填"}]},option:{bucket:[],region:[]}}},methods:{validate:function(){var e=this;return new Promise((function(t){e.$refs["form"].validate().then((function(e){return t(e)}))}))},getModel:function(){return this.model},getBucket:function(){var e=this;if(this.model.app_id&&this.model.secret_id&&this.model.secret_key){var t="storage"===this.$route.name?0:this.$route.query.id,s={app_id:this.model.app_id,secret_id:this.model.secret_id,secret_key:this.model.secret_key,shop_id:t};this.$api.systemApi.getTencentBucket(s).then((function(t){0===t.error&&(e.option.bucket=t.bucket_list||[],e.getRegion("res"))}))}},getRegion:function(e){var t,s=this;null!==(t=this.option.bucket)&&void 0!==t&&t.length?this.model.bucket?this.option.region=this.option.bucket.filter((function(e){return e.bucket===s.model.bucket})):this.option.region=(0,r.default)(this.option.bucket):this.option.region=[],"res"!==e&&(this.model.region="")},resetModel:function(e){this.model=Object.assign({app_id:"",secret_id:"",secret_key:"",bucket:"",region:"",url:"",scheme:"http://"},e),this.getBucket()}}};t.default=i},"9e89":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"remote-storage-ftp"},[t("kdx-hint-alert",{attrs:{"show-icon":!1}},[t("p",[e._v("如果切换到FTP后，需要将原有设置的附件传输至相应的FTP中")]),t("div",{staticClass:"old-url-box"},[t("div",{staticClass:"label"},[e._v(" 当前店铺的附件地址： ")]),"shop"===e.mode&&e.oldStorageUrl.length?t("div",{staticClass:"old-url"},e._l(e.oldStorageUrl,(function(s,a){return t("div",{key:a,staticClass:"old-url-item"},[e._v(" "+e._s(s)+"； ")])})),0):e._e()])]),t("Form",{ref:"form",attrs:{model:e.model,rules:e.rules,"label-width":140}},[t("FormItem",{attrs:{label:"服务器地址：",prop:"host"}},[t("Input",{staticClass:"width-250",model:{value:e.model.host,callback:function(t){e.$set(e.model,"host",t)},expression:"model.host"}})],1),t("FormItem",{attrs:{label:"端口：",prop:"port"}},[t("Input",{staticClass:"width-250",model:{value:e.model.port,callback:function(t){e.$set(e.model,"port",t)},expression:"model.port"}})],1),t("FormItem",{attrs:{label:"账号：",prop:"username"}},[t("Input",{staticClass:"width-250",model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),t("FormItem",{attrs:{label:"密码：",prop:"password"}},[t("Input",{staticClass:"width-250",model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1),t("FormItem",{attrs:{label:"访问URL：",prop:"url"}},[t("Input",{staticClass:"width-250",model:{value:e.model.url,callback:function(t){e.$set(e.model,"url",t)},expression:"model.url"}},[t("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.model.scheme,callback:function(t){e.$set(e.model,"scheme",t)},expression:"model.scheme"}},[t("Option",{attrs:{value:"http://"}},[e._v("http://")]),t("Option",{attrs:{value:"https://"}},[e._v("https://")])],1)],1),t("kdx-hint-text",[e._v("访问域名，请以http://或者https://开头")])],1),t("FormItem",{attrs:{label:"附件目录：",prop:"path"}},[t("Input",{staticClass:"width-250",model:{value:e.model.path,callback:function(t){e.$set(e.model,"path",t)},expression:"model.path"}}),t("kdx-hint-text",[e._v("远程附件目录的绝对路径，默认为FTP主目录")])],1),t("FormItem",{attrs:{label:"超时时间：",prop:"timeout"}},[t("Input",{staticClass:"width-250",model:{value:e.model.timeout,callback:function(t){e.$set(e.model,"timeout",t)},expression:"model.timeout"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("秒")])]),t("kdx-hint-text",[e._v("0为服务器默认")])],1),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"被动模式：",prop:"passive_mode"}},[t("RadioGroup",{model:{value:e.model.passive_mode,callback:function(t){e.$set(e.model,"passive_mode",t)},expression:"model.passive_mode"}},[t("Radio",{attrs:{label:1}},[e._v("是")]),t("Radio",{attrs:{label:0}},[e._v("否")])],1)],1),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"SSL：",prop:"ssl"}},[t("RadioGroup",{model:{value:e.model.ssl,callback:function(t){e.$set(e.model,"ssl",t)},expression:"model.ssl"}},[t("Radio",{attrs:{label:1}},[e._v("是")]),t("Radio",{attrs:{label:0}},[e._v("否")])],1)],1)],1)],1)};t.render=s;var a=[];t.staticRenderFns=a},"9ee68":function(e,t,s){"use strict";s("b4d80")},b4d80:function(e,t,s){},bd12:function(e,t,s){var a=s("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(s("ade3")),i=a(s("15fd")),n=a(s("e395")),o=["type"],l={name:"index",components:{StorageInfo:n.default},data:function(){return{type:"local",loading:!1}},created:function(){this.getData()},methods:{setLabelStatus:function(e){this.type=e},getData:function(){var e=this;this.loading=!0,this.$api.systemApi.getStorage().then((function(t){if(e.loading=!1,0===t.error){var s=t.settings,a=s.type,r=(0,i.default)(s,o);e.type=a,e.$refs["storage_info"].resetData(r)}}))},handleSave:function(){var e=this;"local"===this.type?this.$api.systemApi.setStorage({type:this.type}).then((function(t){0===t.error&&(e.$Message.success("本地存储保存成功"),e.getData())})):this.$refs["storage_info"].validate().then((function(t){if(t){var s,a=(s={},(0,r.default)(s,e.type,e.$refs["storage_info"].getModel()),(0,r.default)(s,"type",e.type),s);e.$api.systemApi.setStorage(a).then((function(t){0===t.error&&(e.$Message.success("本地存储保存成功"),e.getData())}))}}))}}};t.default=l},c109:function(e,t,s){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,s("b0c0");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"storage-info"},[e._l(e.option,(function(s){return t("check-label",{key:s.key,attrs:{"show-icon":"",checked:e.type===s.key},on:{"on-change":function(t){return e.setLabelStatus(s.key)}}},[e._v(e._s(s.name)+" ")])})),t("div",{staticClass:"label-box"},["local"===e.type&&"shop"===e.mode&&e.oldStorageUrl.length?t("div",{staticClass:"local"},[t("kdx-hint-alert",{attrs:{"show-icon":!1}},[t("div",{staticClass:"old-url-box"},[t("div",{staticClass:"label"},[e._v(" 当前店铺的附件地址： ")]),t("div",{staticClass:"old-url"},e._l(e.oldStorageUrl,(function(s,a){return t("div",{key:a,staticClass:"old-url-item"},[e._v(" "+e._s(s)+"； ")])})),0)])])],1):e._e(),"ftp"===e.type?t("ftp",{ref:"ftp",attrs:{mode:e.mode,oldStorageUrl:e.oldStorageUrl}}):"qiniu"===e.type?t("qi-niu",{ref:"qiniu",attrs:{mode:e.mode,oldStorageUrl:e.oldStorageUrl}}):"oss"===e.type?t("ali",{ref:"oss",attrs:{mode:e.mode,oldStorageUrl:e.oldStorageUrl}}):"cos"===e.type?t("tencent",{ref:"cos",attrs:{mode:e.mode,oldStorageUrl:e.oldStorageUrl}}):e._e()],1)],2)};t.render=a;var r=[];t.staticRenderFns=r},c1cf:function(e,t,s){},c8d4:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"check-label"},[t("div",{staticClass:"label-item",class:{"label-checked":e.checked,"label-disabled":e.disabled},on:{click:e.handleClick}},[t("span",[e._t("default")],2),e.showIcon?t("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-chenggong-shixin"}}):e._e()],1)])};t.render=s;var a=[];t.staticRenderFns=a},c8ea:function(e,t,s){"use strict";s("db2b")},d33f:function(e,t,s){},d896:function(e,t,s){"use strict";s.r(t);var a=s("0d32"),r=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){s.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},d900:function(e,t,s){"use strict";s.r(t);var a=s("7a85"),r=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){s.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},db2b:function(e,t,s){},e395:function(e,t,s){"use strict";s.r(t);var a=s("5ddde"),r=s("4438");for(var i in r)["default"].indexOf(i)<0&&function(e){s.d(t,e,(function(){return r[e]}))}(i);s("44d4");var n=s("2877"),o=Object(n["a"])(r["default"],a["render"],a["staticRenderFns"],!1,null,"6dc60d9e",null);t["default"]=o.exports},e5b7:function(e,t,s){"use strict";s("c1cf")},e840:function(e,t,s){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,s("b0c0"),s("99af");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"remote-storage-ali"},[t("kdx-hint-alert",{attrs:{"show-icon":!1}},[t("p",{staticClass:"ali-text"},[e._v(" 如果切换到OSS后，需要将原有设置的附件传输至阿里云OSS ")]),t("p",{staticClass:"ali-text"},[e._v(" 相关工具： "),t("a",{attrs:{href:"https://market.aliyun.com/products/53690006/cmgj000281.html#sku=biaozhunban",target:"_blank"}},[e._v(" 官方推荐OSS客户端工具（Windows版） ")]),t("a",{attrs:{href:"https://developer.aliyun.com/ask/191405?spm=a2c6h.13524658",target:"_blank"}},[e._v(" 其他官方推荐工具 ")])]),t("div",{staticClass:"old-url-box"},[t("div",{staticClass:"label"},[e._v(" 当前店铺的附件地址： ")]),t("div",{staticClass:"old-url"},e._l(e.oldStorageUrl,(function(s,a){return t("div",{key:a,staticClass:"old-url-item"},[e._v(" "+e._s(s)+"； ")])})),0)])]),t("Form",{ref:"form",attrs:{model:e.model,rules:e.rules,"label-width":160}},[t("FormItem",{attrs:{label:"Access Key ID：",prop:"access_key"}},[t("Input",{staticClass:"width-250",model:{value:e.model.access_key,callback:function(t){e.$set(e.model,"access_key",t)},expression:"model.access_key"}}),t("kdx-hint-text",[e._v("Access Key ID是您访问阿里云API的密钥。")])],1),t("FormItem",{attrs:{label:"Access Key Secret：",prop:"secret_key"}},[t("Input",{staticClass:"width-340",attrs:{search:"","enter-button":"获取Buckets"},on:{"on-search":e.getBucket},model:{value:e.model.secret_key,callback:function(t){e.$set(e.model,"secret_key",t)},expression:"model.secret_key"}}),t("kdx-hint-text",[e._v(" Access Key Secret是您访问阿里云API的密钥。 ")])],1),t("FormItem",{attrs:{label:"存储空间(Bucket)：",prop:"bucket"}},[t("Select",{staticClass:"width-250",model:{value:e.model.bucket,callback:function(t){e.$set(e.model,"bucket",t)},expression:"model.bucket"}},e._l(e.option.bucket,(function(s){return t("Option",{key:s.name,attrs:{value:s.bucket}},[e._v(" "+e._s("".concat(s.bucket,"(").concat(s.data_center,")"))+" ")])})),1),t("kdx-hint-text",[e._v("请保证存储空间(Bucket),为可公共读取的")])],1),t("FormItem",{attrs:{label:"自定义访问URL：",prop:"url"}},[t("Input",{staticClass:"width-250",model:{value:e.model.url,callback:function(t){e.$set(e.model,"url",t)},expression:"model.url"}},[t("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.model.scheme,callback:function(t){e.$set(e.model,"scheme",t)},expression:"model.scheme"}},[t("Option",{attrs:{value:"http://"}},[e._v("http://")]),t("Option",{attrs:{value:"https://"}},[e._v("https://")])],1)],1),t("kdx-hint-text",[e._v(" 自定义访问域名，请以 http:// 或 https:// 开头，如不填写会使用OSS默认域名 ")])],1),"shop"===e.mode?t("FormItem",{attrs:{label:"图片自动压缩："}},[t("RadioGroup",{model:{value:e.model.image_compression,callback:function(t){e.$set(e.model,"image_compression",t)},expression:"model.image_compression"}},[t("Radio",{attrs:{label:1}},[t("span",[e._v("启用")])]),t("Radio",{attrs:{label:0}},[t("span",[e._v("不启用")])])],1),t("kdx-hint-text",[e._v("启用自动压缩可以减少流量消耗，提高用户端访问速度")]),1===+e.model.image_compression?t("div",{staticClass:"next-box"},[t("FormItem",{attrs:{label:"压缩规则："}},[t("RadioGroup",{model:{value:e.model.image_compression_rule.is_default,callback:function(t){e.$set(e.model.image_compression_rule,"is_default",t)},expression:"model.image_compression_rule.is_default"}},[t("Radio",{attrs:{label:1}},[t("span",[e._v("系统默认")])]),t("Radio",{attrs:{label:0}},[t("span",[e._v("自定义")])])],1)],1),0===+e.model.image_compression_rule.is_default?t("FormItem",{attrs:{label:"图片样式代码："}},[t("Input",{staticClass:"width-250",attrs:{placeholder:"请输入压缩代码"},model:{value:e.model.image_compression_rule.rule,callback:function(t){e.$set(e.model.image_compression_rule,"rule",t)},expression:"model.image_compression_rule.rule"}}),t("kdx-hint-tooltip",{attrs:{type:"text"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"tooltip-header"},[t("i",{staticClass:"iconfont icon-icon-test",staticStyle:{"vertical-align":"-1px","margin-left":"5px"}}),t("span",{staticClass:"hint-text"},[e._v("代码获取说明")])])]},proxy:!0}],null,!1,186440304)},[t("div",{staticClass:"storage-hint-tooltip"},[t("p",{staticClass:"title"},[e._v("阿里云OSS图片压缩使用说明")]),t("div",{staticClass:"item"},[t("p",{staticClass:"number"},[e._v(" 1. ")]),t("p",{staticClass:"text"},[e._v(" 到https://www.aliyun.com/登录您的阿里云存储账号 ")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"number"},[e._v(" 2. ")]),t("p",{staticClass:"text"},[e._v(" 进入【控制台】 ")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"number"},[e._v(" 3. ")]),t("p",{staticClass:"text"},[e._v(" 点击【对象存储OSS】 ")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"number"},[e._v(" 4. ")]),t("p",{staticClass:"text"},[e._v(" 在左侧存储空间中，选择您正在使用的Bucket，点击进入 ")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"number"},[e._v(" 5. ")]),t("p",{staticClass:"text"},[e._v(" 点击【图片处理】 ")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"number"},[e._v(" 6. ")]),t("p",{staticClass:"text"},[e._v(" 点击【新建样式】，按照您的要求，创建您的图片压缩规则 ")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"number"},[e._v(" 7. ")]),t("p",{staticClass:"text"},[e._v(" 保存完成后，到【图片处理】选项卡中，复制该样式的代码，在管理端的操作弹窗中粘贴保存即可。 ")])])])])],1):e._e()],1):e._e()],1):e._e()],1)],1)};t.render=a;var r=[];t.staticRenderFns=r},e9c8:function(e,t,s){var a=s("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(s("30b1")),i=a(s("0761")),n=a(s("7615")),o=a(s("2aec")),l=a(s("7bda")),c={name:"index",components:{CheckLabel:r.default,Ftp:i.default,QiNiu:n.default,Ali:o.default,Tencent:l.default},props:{type:{type:String,default:"local"},mode:{type:String,default:""},oldStorageUrl:{type:Array,default:function(){return[]}}},data:function(){return{data:{ftp:{},qiniu:{},oss:{},cos:{}},option:[{key:"local",name:"本地存储"},{key:"ftp",name:"FTP"},{key:"qiniu",name:"七牛云存储"},{key:"oss",name:"阿里云OSS"},{key:"cos",name:"腾讯云COS"}]}},watch:{type:{handler:function(){this.setData()},immediate:!0}},methods:{setLabelStatus:function(e){this.$emit("update:type",e)},resetData:function(e){this.data=e,this.setData()},validate:function(){return this.$refs[this.type].validate()},getModel:function(){return this.$refs[this.type].getModel()},setData:function(){var e=this;"local"!==this.type&&this.$nextTick((function(){e.$refs[e.type].resetModel(e.data[e.type])}))}}};t.default=c},f8c8:function(e,t,s){}}]);