(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[129],{1708:function(e,t,n){"use strict";n.r(t);var a=n("ee09"),s=n("a6d9");for(var r in s)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return s[e]}))}(r);n("59a7");var i=n("2877"),o=Object(i["a"])(s["default"],a["render"],a["staticRenderFns"],!1,null,"0f6328dc",null);t["default"]=o.exports},"1c72":function(e,t,n){"use strict";var a=n("6fd6");n.o(a,"render")&&n.d(t,"render",(function(){return a["render"]})),n.o(a,"staticRenderFns")&&n.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"2f67":function(e,t,n){"use strict";n("cbf9d")},"59a7":function(e,t,n){"use strict";n("71dd")},6276:function(e,t,n){"use strict";n.r(t);var a=n("e726"),s=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=s.a},"6fd6":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"order-detail-refund"},[t("Card",[t("Steps",{attrs:{current:e.getCurrent,status:e.getStatus}},[t("Step",{attrs:{title:"客户申请维权",content:e.refund_info.created_at}}),t("Step",{attrs:{title:"处理维权",content:e._f("getTime")(e.refund_info.seller_accept_time)}}),e.showCustom?t("Step",{attrs:{title:"客户退回商品",content:e._f("getTime")(e.refund_info.member_express_time)}}):e._e(),t("Step",{attrs:{title:e.step.lastTitle,content:e._f("getTime")(e.refund_info.finish_time)}})],1)],1),t("div",{staticClass:"order-detail-content"},[e.info.refund_info?t("refund-detail",{attrs:{data:e.info}},[t("refund-modal",{attrs:{visible:e.modal.refundModal,data:e.info,status:e.refund_info.status}})],1):e._e()],1),t("div",{staticClass:"order-detail-con"},[t("ul",{staticClass:"detail_tab"},[t("li",{staticClass:"tab",class:{active:0==e.clickIndex},on:{click:function(t){return e.clickTab(0)}}},[e._v("商品信息")]),e.commission_info?t("li",{staticClass:"tab",class:{active:1==e.clickIndex},on:{click:function(t){return e.clickTab(1)}}},[e._v("分销商信息")]):e._e(),e.form.content?t("li",{staticClass:"tab",class:{active:2==e.clickIndex},on:{click:function(t){return e.clickTab(2)}}},[e._v("表单信息")]):e._e()]),e.form.content&&2==e.clickIndex?t("form-info",{attrs:{data:e.form.content,isShow:!1}}):e._e(),e.commission_info&&1==e.clickIndex?t("distributor-information",{attrs:{info:e.commission_info},on:{edit:e.editCommision}}):e._e(),0==e.clickIndex?t("order-detail-list",{attrs:{"is-refund":"",data:e.info},on:{"on-change-goods-info":e.changeGoodsInfo}}):e._e(),t("commission-edit",{attrs:{orderId:e.id,orderNo:e.orderNo,memberId:e.member_id,visible:e.visible},on:{"update:visible":function(t){e.visible=t},"on-success":e.getData}})],1)],1)};t.render=n;var a=[];t.staticRenderFns=a},"71dd":function(e,t,n){},a6d9:function(e,t,n){"use strict";n.r(t);var a=n("c2ff"),s=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=s.a},c2ff:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("a9e3"),n("d3b7");var a={name:"RefundModal",props:{visible:{type:Number,default:0},data:{type:Object,default:function(){}}},data:function(){return{value:!1,model:{type:"0",address:"",style:""},address:{list:[]},rules:{address:[{required:!0,message:"请选择退货地址"}]}}},computed:{getStatus:function(){return this.data.refund_info?this.data.refund_info.status:0}},watch:{visible:function(){this.value=!0,this.getAddress()},getStatus:{handler:function(e){e>0&&(this.model.type="1")},immediate:!0}},methods:{getAddress:function(){var e=this;this.address.list.length||this.$api.settingApi.getAllRefundAddress().then((function(t){0===t.error&&(e.address.list=t.list)}))},handleCancel:function(){this.value=!1,this.$refs.form.resetFields()},handleOk:function(){var e=this.model.type,t=this.data,n=t.id,a=t.refund_type,s=t.refund_info.order_goods_id,r={order_id:n};"2"==a&&(r.order_goods_id=s),"2"===e?(this.model.reason&&(r.reject_reason=this.model.reason),this.rejectHandler(r)):"3"===e?this.manualHandler(r):"1"===e?this.autoHandler(r):(r.refund_address_id=this.model.address,this.agreeHandler(r))},agreeHandler:function(e){var t=this;this.$refs.form.validate((function(n){n&&t.$api.orderApi.agreeReturn(e).then((function(e){0===e.error&&(t.$Message.success("操作成功"),t.$parent.$parent.getData())})).finally((function(){t.value=!1}))}))},autoHandler:function(e){var t=this;this.$api.orderApi.autoRefund(e).then((function(e){0===e.error&&(t.$Message.success("操作成功"),t.$parent.$parent.getData())})).finally((function(){t.value=!1}))},manualHandler:function(e){var t=this;this.$api.orderApi.manualRefund(e).then((function(e){0===e.error&&(t.$Message.success("操作成功"),t.$parent.$parent.getData())})).finally((function(){t.value=!1}))},rejectHandler:function(e){var t=this;this.$api.orderApi.refundRejectOrder(e).then((function(e){0===e.error&&(t.$Message.success("操作成功"),t.$parent.$parent.getData())})).finally((function(){t.value=!1}))}}};t.default=a},cbf9d:function(e,t,n){},e726:function(e,t,n){var a=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(n("39c2")),r=a(n("1708")),i=a(n("f8a2")),o=a(n("ca29")),d=a(n("1c03")),l=a(n("fa75")),u=a(n("5791")),c={name:"index",mixins:[u.default],components:{RefundDetail:s.default,RefundModal:r.default,DistributorInformation:i.default,OrderDetailList:o.default,CommissionEdit:d.default,FormInfo:l.default},computed:{getCurrent:function(){var e=this.status;return-1===this.status?3:(10!==this.status&&11!==this.status||(e=3,this.showCustom||e--),3===this.status&&(e=2),e+1)},showCustom:function(){return-1!==this.status&&!!(10!==this.status&&11!==this.status||this.refund_info.member_express_sn)}},watch:{status:function(e){this.step.lastTitle=0<=e&&e<=3?"退货退款完成":10===e||11===e?"退货退款成功":"退货退款失败"}},data:function(){return{clickIndex:0}},methods:{clickTab:function(e){this.clickIndex=e}}};t.default=c},ee09:function(e,t,n){"use strict";var a=n("efb1");n.o(a,"render")&&n.d(t,"render",(function(){return a["render"]})),n.o(a,"staticRenderFns")&&n.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]}))},eec4:function(e,t,n){"use strict";n.r(t);var a=n("1c72"),s=n("6276");for(var r in s)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return s[e]}))}(r);n("2f67");var i=n("2877"),o=Object(i["a"])(s["default"],a["render"],a["staticRenderFns"],!1,null,"e913a208",null);t["default"]=o.exports},efb1:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var n=function(){var e=this,t=e._self._c;return t("kdx-modal-frame",{attrs:{title:"维权处理",width:700},on:{"on-cancel":e.handleCancel,"on-ok":e.handleOk},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("Form",{ref:"form",staticClass:"order-refund-detail-refund-modal",attrs:{"label-width":120,model:e.model,rules:e.rules}},[t("FormItem",{staticClass:"r-form-item-text",attrs:{label:"维权类型："}},[t("kdx-tag-label",{attrs:{type:"danger",size:"small"}},[e._v("退款退货")])],1),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"处理方式：",prop:"type"}},[t("RadioGroup",{model:{value:e.model.type,callback:function(t){e.$set(e.model,"type",t)},expression:"model.type"}},[0===e.getStatus?t("Radio",{attrs:{label:"0"}},[e._v("通过申请")]):e._e(),t("Radio",{attrs:{label:"1"}},[e._v("同意退款")]),0===e.getStatus?t("Radio",{attrs:{label:"2"}},[e._v("驳回申请")]):e._e(),t("Radio",{attrs:{label:"3"}},[e._v("手动退款")])],1),t("kdx-hint-alert",{directives:[{name:"show",rawName:"v-show",value:"0"===e.model.type,expression:"model.type === '0'"}],attrs:{"show-icon":!1,type:"info"}},[e._v(" 通过申请后需要收到客户寄回商品才可进行下一步操作 ")]),t("kdx-hint-alert",{directives:[{name:"show",rawName:"v-show",value:"1"===e.model.type,expression:"model.type === '1'"}],attrs:{"show-icon":!1}},[0===e.getStatus?t("p",{staticClass:"alert-blue"},[e._v("直接同意退款无需客户寄回商品，直接进行退款")]):t("p",[e._v("请确认您已经收到客户寄出的商品后同意退款.")]),t("p",[e._v("微信支付方式：会返回到相应的支付渠道(如零钱或银行卡)")]),t("p",[e._v("其他支付方式：会返回到微信钱包(需商户平台余额充足)")]),t("p",[e._v("如有余额抵扣：会返回金额到商城用户余额")]),t("p",[e._v("如有积分抵扣：申请维权的订单抵扣积分会返回到用户积分中")])])],1),t("FormItem",{directives:[{name:"show",rawName:"v-show",value:"0"===e.model.type,expression:"model.type === '0'"}],attrs:{label:"退货地址：",prop:"address"}},[t("Select",{staticClass:"width-430",model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}},e._l(e.address.list,(function(e){return t("Option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1),t("FormItem",{directives:[{name:"show",rawName:"v-show",value:"2"===e.model.type,expression:"model.type === '2'"}],attrs:{label:"驳回原因：",prop:"reason"}},[t("Input",{staticClass:"width-430",attrs:{type:"textarea",autosize:"",maxlength:200,placeholder:"请输入"},model:{value:e.model.reason,callback:function(t){e.$set(e.model,"reason",t)},expression:"model.reason"}})],1)],1)],1)};t.render=n;var a=[];t.staticRenderFns=a}}]);