(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{"003c":function(e,t,a){"use strict";var s=a("c3af");a.o(s,"render")&&a.d(t,"render",(function(){return s["render"]})),a.o(s,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]}))},"0266":function(e,t,a){var s=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a("5530"));a("14d9");var n={data:function(){return{model:{keyword:"",status:"all",type:"all",start_time:"",end_time:""},date:[],statusList:[{value:"all",label:"全部"},{value:"1",label:"进行中"},{value:"0",label:"未开始"},{value:"-1",label:"停止"},{value:"-2",label:"手动停止"}],typeList:[{value:"all",label:"全部"},{value:"0",label:"累计消费"},{value:"1",label:"单次消费"}]}},methods:{addActivity:function(){this.$router.push({path:"/consumeReward/activity/index",query:{type:"add"}})},changeDate:function(e){this.model.start_time=e[0],this.model.end_time=e[1]},handleSearch:function(){var e=(0,i.default)((0,i.default)({},this.model),{},{status:"all"===this.model.status?"":this.model.status,type:"all"===this.model.type?"":this.model.type});this.$emit("on-search",e)},handleReset:function(){this.reset(),this.handleSearch()},reset:function(){this.model={keyword:"",status:"all",type:"all",start_time:"",end_time:""},this.date=[]}}};t.default=n},"0583":function(e,t,a){"use strict";a("cbd1")},"068b":function(e,t,a){"use strict";a("67c7")},"0849":function(e,t,a){"use strict";var s=a("5380");a.o(s,"render")&&a.d(t,"render",(function(){return s["render"]})),a.o(s,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]}))},"0d35":function(e,t,a){"use strict";a.r(t);var s=a("bb14"),i=a("6820");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("7dad");var r=a("2877"),l=Object(r["a"])(i["default"],s["render"],s["staticRenderFns"],!1,null,"50bf1baf",null);t["default"]=l.exports},"0f8d":function(e,t,a){var s=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ac1f"),a("841c");var i=s(a("5530")),n=s(a("9a31")),r={components:{SearchHeader:n.default},data:function(){var e=this;this.$createElement;return{loading:!1,page:{pageSize:10,pageNumber:1},search:{keyword:"",client_type:"",start_time:"",end_time:""},columns:[{title:"会员",slot:"nickname"},{title:"活动名称",key:"title"},{title:"消费类型",key:"type_text"},{title:"领取时间",key:"created_at"},{title:"领取渠道",slot:"client_type"},{title:"奖励内容",slot:"reward"},{title:"订单编号",key:"order_no",render:function(t,a){return t("Button",{attrs:{type:"text"},on:{click:function(){e.toOrderDetail(a.row.order_no)}}},[a.row.order_no])}}],data:[],total:0}},created:function(){this.getConsumeLog()},methods:{getConsumeLog:function(){var e=this;this.loading=!0;var t=(0,i.default)((0,i.default)({},this.search),{},{pagesize:this.page.pageSize,page:this.page.pageNumber});this.$api.consumeRewardApi.getConsumeLog(t).then((function(t){e.loading=!1,0===t.error&&(e.data=t.list,e.total=t.total)}))},handleSearch:function(e){this.search=(0,i.default)((0,i.default)({},this.search),e),this.refreshTable()},changePage:function(e){this.page=e,this.getConsumeLog()},refreshTable:function(){this.page={pageSize:10,pageNumber:1},this.$refs["page"].reset(),this.getConsumeLog()},toOrderDetail:function(e){var t={search_field:"order_no",keywords:e};this.$utils.openNewWindowPage("/order/list/all",t)}}};t.default=r},"14d2":function(e,t,a){"use strict";a.r(t);var s=a("2790"),i=a("fb81");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("1a0a");var r=a("2877"),l=Object(r["a"])(i["default"],s["render"],s["staticRenderFns"],!1,null,"44ce5198",null);t["default"]=l.exports},"1a0a":function(e,t,a){"use strict";a("ad00")},"1b8a":function(e,t,a){"use strict";a.r(t);var s=a("f4de"),i=a("c2de");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("b36c");var r=a("2877"),l=Object(r["a"])(i["default"],s["render"],s["staticRenderFns"],!1,null,"08f35e9e",null);t["default"]=l.exports},"1c3a":function(e,t,a){var s=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("e9c4"),a("d3b7"),a("159b"),a("14d9"),a("a434");var i=s(a("b85c")),n=s(a("2909")),r={name:"labelSelector",props:{currentList:{type:Array,default:function(){return[]}}},data:function(){return{value:!1,selectRows:[],list:[],loading:!1}},methods:{setValue:function(){this.value=!this.value,this.value&&(this.selectRows=(0,n.default)(this.currentList),this.getLabelData())},handleCancel:function(){this.setValue()},handleOk:function(){this.$emit("on-change",JSON.parse(JSON.stringify(this.selectRows))),this.setValue()},initDefaultChecked:function(){var e=this;this.selectRows.length>0&&this.list.forEach((function(t,a){var s,n=(0,i.default)(e.selectRows);try{for(n.s();!(s=n.n()).done;){var r=s.value;if(t.id===r.id){e.$set(e.list[a],"checked",!0);break}}}catch(l){n.e(l)}finally{n.f()}}))},setLabelChecked:function(e,t){var a=this;if(this.$set(this.list[e],"checked",t),t)this.selectRows.push(this.list[e]);else{var s=-1;this.selectRows.forEach((function(t,i){t.id===a.list[e].id&&(s=i)})),this.selectRows.splice(s,1)}},getLabelData:function(){var e=this;this.loading=!0,this.$api.memberApi.getGroupList({is_all:1}).then((function(t){e.loading=!1,0===t.error&&(e.list=t.list||[],e.initDefaultChecked())}))}}};t.default=r},"1e22":function(e,t,a){"use strict";a.r(t);var s=a("1c3a"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},"1e68":function(e,t,a){"use strict";a.r(t);var s=a("0f8d"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},"1ea7":function(e,t,a){"use strict";var s=a("4916");a.o(s,"render")&&a.d(t,"render",(function(){return s["render"]})),a.o(s,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]}))},"206d":function(e,t,a){"use strict";a.r(t);var s=a("e0398"),i=a("3ea5");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("0583");var r=a("2877"),l=Object(r["a"])(i["default"],s["render"],s["staticRenderFns"],!1,null,"5315ca5a",null);t["default"]=l.exports},2290:function(e,t,a){"use strict";a.r(t);var s=a("0266"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},2790:function(e,t,a){"use strict";var s=a("41fe");a.o(s,"render")&&a.d(t,"render",(function(){return s["render"]})),a.o(s,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]}))},"3592c":function(e,t,a){"use strict";a.r(t);var s=a("b88e"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},"35e4":function(e,t,a){var s=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a("c7eb")),n=s(a("1da1")),r=s(a("5530")),l=s(a("2909"));a("d9e2"),a("d81d"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("159b"),a("a434"),a("a15b"),a("ac1f"),a("5319"),a("14d9"),a("b680");var o=s(a("416b")),d=s(a("0659")),c=s(a("1b8a")),u=s(a("c35a")),p=s(a("83b0")),m=s(a("4196")),f={components:{preview:c.default,shopNamePageList:o.default,goodsSelector:d.default,LabelSelector:u.default,LevelSelector:p.default,RewardLevels:m.default},data:function(){var e=this,t=function(t,a,s){""===a?s(new Error("开始时间必选")):(""!==e.model.end_time&&e.$refs.form.validateField("end_time"),s())},a=function(t,a,s){""===a?s(new Error("结束时间必选")):new Date(a).getTime()<=new Date(e.model.start_time).getTime()?s(new Error("结束时间须大于开始时间")):s()};return{model:{title:"",activity_time:"1",start_time:"",end_time:"",client_type:["10","20","21"],pay_type:["2","20","30"],type:"0",money:"0",is_repeat:"0",reward:["0"],coupon_ids:"",credit:"",balance:"",red_package:{money:"",expiry:"",blessing:""},send_type:"0",activity_limit:["1"],goods_limit:"",popup_type:"0",member_info_id:[],member_level_id:[],member_group_id:[],rules:{permission:"0",permission_value:"",award:[{reward:["1"],money:"",coupon_ids:"",credit:"",balance:"",red_package:{money:"",expiry:"",blessing:""},showFlag:!0,couponSelector:{value:!1,data:[]}}]}},rule:{title:[{required:!0,message:"活动名称必填"}],activity_time:[{required:!0,message:""}],start_time:[{validator:t}],end_time:[{validator:a}],client_type:[{required:!0,message:"活动渠道必选"}],pay_type:[{required:!0,message:"支付方式必选"}],type:[{required:!0,message:"消费类型必选"}],money:[{required:!0,message:"消费金额必填"}],is_repeat:[{required:!0,message:"重复领取必选"}],reward:[{required:!0,message:"奖励必选"}],coupon_ids:[{required:!0,message:"优惠券必选"}],credit:[{required:!0,message:"积分必填"}],balance:[{required:!0,message:"余额必填"}],"red_package.money":[{required:!0,message:"单个红包金额必填"}],"red_package.expiry":[{required:!0,message:"红包有效时间必填"}],send_type:[{required:!0,message:"余额必填"}],"rules.permission":[{required:!0,message:"参与资格必选"}],member_info_id:[{required:!0,message:"适用人群不能为空"}],popup_type:[{required:!0,message:"弹窗样式必填"}]},memberSelector:{levelList:[],labelList:[]},selectedMemberList:[],preview_credit:{name:"消费奖励积分",number:"0"},preview_balance:{name:"消费奖励余额",number:"0.00"},preview_redpacket:{name:"消费奖励红包",number:"0.00"},couponSelector:{value:!1,data:[]},goodSelector:{value:!1,data:[]},loading:!1,id:"",type:"",fullOldData:[],singleOldData:[],init:[{reward:["1"],money:"",coupon_ids:"",credit:"",balance:"",red_package:{money:"",expiry:"",blessing:""},showFlag:!0,couponSelector:{value:!1,data:[]}}]}},created:function(){var e=this.$route.query,t=e.id,a=e.type;this.id=t,this.type=a,this.id&&this.getConsumeDetail()},methods:{getConsumeDetail:function(){var e=this;this.$api.consumeRewardApi.getConsumeDetail({id:this.id}).then((function(t){var a,s,i,n;0==t.error&&(t.data.client_type=null===(a=t.data)||void 0===a?void 0:a.client_type.split(","),t.data.pay_type=null===(s=t.data)||void 0===s?void 0:s.pay_type.split(","),e.model.rules=null===(i=t.data)||void 0===i?void 0:i.rules,e.model.rules.award.map((function(t){if(e.$set(t,"showFlag",!0),e.$set(t,"couponSelector",{value:!1,data:[]}),new Set(t.reward).has("1")){t.couponSelector.data=(0,l.default)(t.coupon_info);var a=t.couponSelector.data.map((function(e){return e.id}));t.coupon_ids=a}return delete t.coupon_info,t})),e.couponSelector=null===(n=t.data)||void 0===n?void 0:n.rules.award[0].couponSelector,"1"===t.data.rules.permission?e.selectedMemberList=(0,l.default)(t.data.member_level):"2"===t.data.rules.permission&&(e.selectedMemberList=(0,l.default)(t.data.member_group)),e.model.member_info_id=e.selectedMemberList.map((function(e){return e.id})),t.data.goods_limit&&(e.goodSelector.data=(0,l.default)(t.data.goods_info)),e.model=(0,r.default)((0,r.default)({},e.model),t.data))}))},changeType:function(){this.$refs["form"].fields.forEach((function(e){"money"==e.prop&&e.resetField()}))},addShop:function(){this.goodSelector.value=!0},deleteGoods:function(e){if("add"===this.type){this.goodSelector.data.splice(e,1);var t=this.goodSelector.data.map((function(e){return e.id}));this.model.goods_limit=t.join(",")}else this.$Message.error("不允许删除")},changeGoodList:function(e){this.goodSelector.data=(0,l.default)(e);var t=this.goodSelector.data.map((function(e){return e.id}));this.model.goods_limit=t.join(","),this.cancelSelector()},cancelGoodSelector:function(){this.goodSelector.value=!1},handleSave:function(){var e=this;return(0,n.default)((0,i.default)().mark((function t(){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["reward-levels"].validateForm();case 2:e.$refs["form"].validate().then((function(t){t&&(e.loading=!0,e.id?e.editConsumeActivity():e.addConsumeActivity())}));case 3:case"end":return t.stop()}}),t)})))()},addConsumeActivity:function(){var e=this,t=this.formatParams();this.$api.consumeRewardApi.addConsumeActivity((0,r.default)({},t)).then((function(t){e.loading=!1,0==t.error&&(e.$Message.success("保存成功"),e.$router.replace({path:"/consumeReward/activity/list"}))}))},editConsumeActivity:function(){var e=this,t=this.model.end_time,a={end_time:this.$utils.formatDate(new Date(t),"yyyy-MM-dd hh:mm"),id:this.id};this.$api.consumeRewardApi.editConsumeActivity((0,r.default)({},a)).then((function(t){e.loading=!1,0==t.error&&(e.$Message.success("保存成功"),e.$router.replace({path:"/consumeReward/activity/list"}))}))},formatParams:function(){var e=(0,r.default)((0,r.default)({},this.model),{},{start_time:this.$utils.formatDate(new Date(this.model.start_time),"yyyy-MM-dd hh:mm"),end_time:this.$utils.formatDate(new Date(this.model.end_time),"yyyy-MM-dd hh:mm"),client_type:this.model.client_type.join(","),pay_type:this.model.pay_type.join(","),reward:this.model.reward.join(","),activity_limit:this.model.activity_limit.join(",")});return delete e.activity_time,delete e.credit,delete e.balance,delete e.red_package,delete e.goods_limit,delete e.member_info_id,delete e.member_level_id,delete e.member_group_id,delete e.rules,e["rules"]=this.model.rules,e["rules"]["permission_value"]=this.model.member_info_id,e.rules.award.map((function(e){delete e.showFlag,delete e.couponSelector})),this.model.goods_limit&&(e["goods_limit"]=this.model.goods_limit),e},changeMemberType:function(){new Set(["1","2"]).has(this.model.rules.permission)&&("1"===this.model.rules.permission?this.selectedMemberList=(0,l.default)(this.memberSelector.levelList):this.selectedMemberList=(0,l.default)(this.memberSelector.labelList),this.model.member_info_id=this.selectedMemberList.map((function(e){return e.id})))},addMemberInfo:function(){var e=this;"1"===this.model.rules.permission?(this.selectedMemberList=(0,l.default)(this.memberSelector.levelList),this.$nextTick((function(){e.$refs["level_modal"].setValue()}))):"2"===this.model.rules.permission&&(this.selectedMemberList=(0,l.default)(this.memberSelector.labelList),this.$nextTick((function(){e.$refs["label_modal"].setValue()})))},changeMemberInfo:function(e){"1"===this.model.rules.permission?(this.selectedMemberList=(0,l.default)(e),this.memberSelector.levelList=(0,l.default)(e)):"2"===this.model.rules.permission&&(this.selectedMemberList=(0,l.default)(e),this.memberSelector.labelList=(0,l.default)(e)),this.model.member_info_id=this.selectedMemberList.map((function(e){return e.id}))},deleteMemberInfo:function(e){var t=this,a="";"1"===this.model.rules.permission?a="是否删除该会员等级":"2"===this.model.rules.permission&&(a="是否删除该会员标签"),this.$Modal.confirm({title:"提示",content:a,onOk:function(){t.selectedMemberList.splice(e,1),"1"===t.model.rules.permission?t.memberSelector.levelList=(0,l.default)(t.selectedMemberList):"2"===t.model.rules.permission&&(t.memberSelector.labelList=(0,l.default)(t.selectedMemberList)),t.model.member_info_id=t.selectedMemberList.map((function(e){return e.id}))},onCancel:function(){}})},updateData:function(e){this.model.rules.award=e},handleAdd:function(){this.model.rules.award.push({reward:["1"],money:"",coupon_ids:"",credit:"",balance:"",red_package:{money:"",expiry:"",blessing:""},showFlag:!0,couponSelector:{value:!1,data:[]}})},handleDelete:function(e){this.model.rules.award.splice(e,1)}},watch:{"model.rules.award":{handler:function(e){e&&e.length&&(new Set(e[0].reward).has("1")&&(this.couponSelector=e[0].couponSelector),new Set(e[0].reward).has("2")&&(this.preview_credit.number=parseInt(e[0].credit)||"0"),new Set(e[0].reward).has("3")&&(this.preview_balance.number=e[0].balance?parseFloat(e[0].balance).toFixed(2):"0.00"),new Set(e[0].reward).has("4")&&(this.preview_redpacket.number=e[0].red_package.money?parseFloat(e[0].red_package.money).toFixed(2):"0.00")),1==this.model.type?this.singleOldData=this.model.rules.award:this.fullOldData=this.model.rules.award},immediate:!0,deep:!0},"model.type":{immediate:!0,handler:function(e){this.model.rules.award="1"==e?this.singleOldData.length>0?this.singleOldData:this.init:this.fullOldData}}}};t.default=f},"389d":function(e,t,a){"use strict";a.r(t);var s=a("b20d"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},"3ea5":function(e,t,a){"use strict";a.r(t);var s=a("35e4"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},4196:function(e,t,a){"use strict";a.r(t);var s=a("bb11"),i=a("3592c");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("e945");var r=a("2877"),l=Object(r["a"])(i["default"],s["render"],s["staticRenderFns"],!1,null,"75e2fbde",null);t["default"]=l.exports},"41fe":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"activity-wrap"},[t("search-header",{ref:"search_header",on:{"on-search":e.handleSearch}}),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-list"},[t("Table",{ref:"table",attrs:{columns:e.columns,data:e.data},scopedSlots:e._u([{key:"type",fn:function(a){var s=a.row;return[t("div",{staticClass:"time"},[e._v(e._s(0==s.type?"累计消费":"单次消费"))])]}},{key:"date",fn:function(a){var s=a.row;return[t("div",{staticClass:"time"},[e._v("起："+e._s(s.start_time))]),t("div",{staticClass:"time"},[e._v("止："+e._s(s.end_time))])]}},{key:"status",fn:function(a){var s=a.row;return["1"===s.status?t("kdx-status-text",{attrs:{type:"success"}},[e._v("进行中")]):e._e(),"-1"===s.status?t("kdx-status-text",{attrs:{type:"danger"}},[e._v("停止")]):e._e(),"-2"===s.status?t("kdx-status-text",{attrs:{type:"danger"}},[e._v("手动停止")]):e._e(),"0"===s.status?t("kdx-status-text",{attrs:{type:"warning"}},[e._v("未开始")]):e._e()]}},{key:"action",fn:function(a){var s=a.row;return[t("div",{staticClass:"btn-box"},[t("Button",{attrs:{type:"text"},on:{click:function(t){return e.handleView(s.id)}}},[e._v("查看")]),"-1"!==s.status&&"-2"!==s.status?t("Button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(s.id)}}},[e._v("编辑")]):e._e(),"-1"!==s.status&&"-2"!==s.status?t("Button",{attrs:{type:"text"},on:{click:function(t){return e.handleStop(s.id)}}},[e._v("停止")]):e._e(),t("Button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(s.id)}}},[e._v("删除")])],1)]}}])}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.data.length>0,expression:"data.length > 0"}],staticClass:"footer-page"},[t("kdx-page-component",{ref:"page",attrs:{total:e.total},on:{"on-change":e.changePage}})],1)],1),e._t("default")],2)};t.render=a;var s=[];t.staticRenderFns=s},"449c":function(e,t,a){"use strict";a.r(t);var s=a("9187"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},4916:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("kdx-modal-frame",{attrs:{title:"会员等级标签",loading:e.loading,"class-name":"shop-label-modal"},on:{"on-cancel":e.handleCancel,"on-ok":e.handleOk},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("div",{staticClass:"shop-label"},[t("div",{staticClass:"custom"},[e.list.length>0?t("div",{staticClass:"recommend"},[t("div",{staticClass:"label-content"},e._l(e.list,(function(a,s){return t("div",{key:s,staticClass:"shop-label-item",class:{checked:a.checked},on:{click:function(t){return e.setLabelChecked(s,!a.checked)}}},[t("span",[e._v(" "+e._s(a.level_name))]),t("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-chenggong-shixin"}})],1)})),0)]):t("div",{staticStyle:{"text-align":"center"}},[e._v(" 暂无数据 ")])])])])};t.render=a;var s=[];t.staticRenderFns=s},5380:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("d3b7"),a("6062"),a("3ca3"),a("ddb0");var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"activity-wrap"},[t("search-header",{ref:"search_header",on:{"on-search":e.handleSearch}}),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-list"},[t("Table",{ref:"table",attrs:{columns:e.columns,data:e.data},scopedSlots:e._u([{key:"nickname",fn:function(a){var s=a.row;return[t("div",{staticClass:"nickname"},[t("div",{staticClass:"avatar"},[t("img",{attrs:{src:e.$media(s.avatar),alt:""},on:{error:function(t){return e.replaceImage(t,"avatar")}}})]),t("span",{staticClass:"text"},[e._v(e._s(s.nickname))])])]}},{key:"client_type",fn:function(a){var s=a.row;return[t("div",{staticClass:"client-type"},[new Set(["10","20","21"]).has(s.client_type)?t("span",{staticClass:"iconfont icon",class:{"icon-weixin":"20"===s.client_type,"icon-weixinxiaochengxu":"21"===s.client_type,"icon-H":"10"===s.client_type}}):"30"===s.client_type?t("kdx-svg-icon",{staticClass:"iconfont",attrs:{type:"icon-qudao-toutiao2"}}):"32"===s.client_type?t("kdx-svg-icon",{staticClass:"iconfont",attrs:{type:"icon-qudao-toutiaojisuban"}}):"31"===s.client_type?t("kdx-svg-icon",{staticClass:"iconfont",attrs:{type:"icon-douyin"}}):"70"===s.client_type?t("span",{staticClass:"iconfont icon-PCduan",staticStyle:{color:"#12aa9c","font-size":"16px"}}):e._e(),t("span",{staticClass:"text"},[e._v(e._s(s.client_type_text))])],1)]}},{key:"reward",fn:function(a){var s=a.row;return[s.reward?t("div",{staticClass:"gifts"},[s.reward.coupon_title&&s.reward.coupon_title.length?t("div",{staticClass:"gifts-coupon mb"},e._l(s.reward.coupon_title,(function(a,s){return t("div",{key:s,staticClass:"coupon-item mb"},[e._v(" "+e._s(a)+" ")])})),0):e._e(),s.reward.red_package?t("div",{staticClass:"gifts-credit mb"},[e._v(" 红包：￥"+e._s(s.reward.red_package.money)+" ")]):e._e(),s.reward.credit?t("div",{staticClass:"gifts-credit mb"},[e._v(" 积分："+e._s(s.reward.credit)+" ")]):e._e(),s.reward.balance?t("div",{staticClass:"gifts-balance mb"},[e._v(" 余额：￥"+e._s(parseFloat(s.reward.balance))+" ")]):e._e()]):e._e()]}}])}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.data.length>0,expression:"data.length > 0"}],staticClass:"footer-page"},[t("kdx-page-component",{ref:"page",attrs:{total:e.total},on:{"on-change":e.changePage}})],1)],1),e._t("default")],2)};t.render=s;var i=[];t.staticRenderFns=i},5646:function(e,t,a){},"5a35":function(e,t,a){"use strict";var s=a("c7d2");a.o(s,"render")&&a.d(t,"render",(function(){return s["render"]})),a.o(s,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]}))},"5eff":function(e,t,a){},"626b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAeCAYAAAAGos/EAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAA4SURBVHgB3YsxDgAQEMDKIEZ+4MdGMYkf2iUOOa/QsU2RRuBgmWQpJCMVUfOwLDqOyO1qPOPDawNr1jQJbIusxQAAAABJRU5ErkJggg=="},6552:function(e,t,a){},"67c7":function(e,t,a){},6820:function(e,t,a){"use strict";a.r(t);var s=a("a7d8"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},"71b0":function(e,t,a){e.exports=a.p+"static/dist/shop/img/blessing.png"},7422:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("ac1f"),a("841c");var s=function(){var e=this,t=e._self._c;return t("kdx-modal-frame",{attrs:{value:e.value,title:"优惠券选择器",width:"1000","ok-text":"保存"},on:{"on-ok":e.handleSave,"on-cancel":e.handleCancel}},[t("div",{staticClass:"selector-link-discount-coupon"},[t("div",{ref:"scrollBox",staticClass:"coupon-content"},[t("div",{staticClass:"search"},[t("Input",{staticClass:"width-250",attrs:{search:"","enter-button":"搜索",placeholder:"请输入"},on:{"on-search":e.getCouponList,"on-enter":e.getCouponList},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,"keyword",t)},expression:"search.keyword"}}),t("span",{staticClass:"label"},[e._v("优惠券类型：")]),t("Select",{staticClass:"width-160",on:{"on-change":e.handleSearch},model:{value:e.search.coupon_sale_type,callback:function(t){e.$set(e.search,"coupon_sale_type",t)},expression:"search.coupon_sale_type"}},[t("Option",{attrs:{value:"all"}},[e._v("全部")]),t("Option",{attrs:{value:"1"}},[e._v("满减券")]),t("Option",{attrs:{value:"2"}},[e._v("折扣券")])],1)],1),t("Table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{columns:e.columns,data:e.data}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.total>10,expression:"total>10"}],staticClass:"footer-page"},[t("kdx-page-component",{ref:"page",attrs:{total:e.total},on:{"on-change":e.handlePageChange}})],1)])])};t.render=s;var i=[];t.staticRenderFns=i},"7c67":function(e,t,a){"use strict";a.r(t);var s=a("0849"),i=a("1e68");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("8f1e");var r=a("2877"),l=Object(r["a"])(i["default"],s["render"],s["staticRenderFns"],!1,null,"feb6231a",null);t["default"]=l.exports},"7dad":function(e,t,a){"use strict";a("5646")},"82d4":function(e,t,a){},"83b0":function(e,t,a){"use strict";a.r(t);var s=a("1ea7"),i=a("389d");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("068b");var r=a("2877"),l=Object(r["a"])(i["default"],s["render"],s["staticRenderFns"],!1,null,"d1a95214",null);t["default"]=l.exports},"88c8":function(e,t,a){"use strict";a.r(t);var s=a("003c"),i=a("ac9f");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("a192");var r=a("2877"),l=Object(r["a"])(i["default"],s["render"],s["staticRenderFns"],!1,null,"ca8b90fc",null);t["default"]=l.exports},"8a81":function(e,t,a){"use strict";var s=a("d418");a.o(s,"render")&&a.d(t,"render",(function(){return s["render"]})),a.o(s,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]}))},"8f1e":function(e,t,a){"use strict";a("5eff")},9187:function(e,t,a){var s=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a("5530")),n={computed:{noManagePerm:function(){return!this.$getPermMap("goods.index.manage")}},data:function(){return{model:{keyword:"",client_type:"all",pick_type:"all",start_time:"",end_time:""},date:[],clientTypeList:[{value:"all",label:"全部"},{value:"10",label:"H5"},{value:"20",label:"微信"},{value:"21",label:"微信小程序"}],pickTypeList:[{value:"all",label:"全部"},{value:"0",label:"无消费记录用户"},{value:"1",label:"新注册用户"}]}},methods:{changeDate:function(e){this.model.start_time=e[0],this.model.end_time=e[1]},handleSearch:function(){var e=(0,i.default)({},this.model);"all"===this.model.client_type&&(e=(0,i.default)((0,i.default)({},e),{},{client_type:""})),"all"===this.model.pick_type&&(e=(0,i.default)((0,i.default)({},e),{},{pick_type:""})),this.$emit("on-search",e)},handleReset:function(){this.reset(),this.handleSearch()},reset:function(){this.model={keyword:"",client_type:"all",start_time:"",end_time:""},this.date=[]}}};t.default=n},"95e6":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("kdx-header-bar",[t("Form",{ref:"form",attrs:{model:e.model,"label-width":100,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormItem",{attrs:{label:"活动名称："}},[t("i-input",{staticClass:"width-340",attrs:{type:"text",placeholder:"活动名称"},on:{"on-enter":e.handleSearch},model:{value:e.model.keyword,callback:function(t){e.$set(e.model,"keyword",t)},expression:"model.keyword"}})],1),t("FormItem",{attrs:{label:"领取渠道："}},[t("Select",{staticClass:"width-160",model:{value:e.model.client_type,callback:function(t){e.$set(e.model,"client_type",t)},expression:"model.client_type"}},e._l(e.clientTypeList,(function(a){return t("Option",{key:a.value,attrs:{value:a.value}},[e._v(" "+e._s(a.label)+" ")])})),1)],1),t("FormItem",{attrs:{label:"领取时间："}},[t("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"活动时间"},on:{"on-change":e.changeDate},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),t("div",{staticClass:"ivu-form-item-btn"},[t("Button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")]),t("Button",{attrs:{type:"text"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1)};t.render=a;var s=[];t.staticRenderFns=s},"9a31":function(e,t,a){"use strict";a.r(t);var s=a("d448"),i=a("449c");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);var r=a("2877"),l=Object(r["a"])(i["default"],s["render"],s["staticRenderFns"],!1,null,"024753b9",null);t["default"]=l.exports},"9c12":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={name:"CouponsList",props:{data:{type:Array,required:!0},disabled:{type:Boolean,default:!1},showStock:{type:Boolean,default:!1}},data:function(){return{columns:[]}},methods:{deleteCoupons:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"确认删除该优惠券吗?",onOk:function(){t.$emit("on-delete",e)},onCancel:function(){}})}},watch:{showStock:{handler:function(e){var t=this;this.$createElement;this.columns=e?[{title:"优惠券名称",key:"coupon_name",minWidth:180,render:function(e,t){var s,i;return"2"===t.row.coupon_sale_type?i=[e("span","折扣券"),e("img",{attrs:{src:a("e7cd")}})]:"1"===t.row.coupon_sale_type&&(i=[e("span","满减券"),e("img",{attrs:{src:a("626b")}})]),e("div",{class:{"coupons-name":!0}},[e("div",{class:{"coupons-type":!0,deduction:"2"===t.row.coupon_sale_type,"full-reduction":"1"===t.row.coupon_sale_type}},i),e("div",{class:{"coupons-name-content":!0}},[e("p",{class:{name:!0}},t.row[t.column.key]),e("p",{class:{content:!0}},null===(s=t.row)||void 0===s?void 0:s.content)])])}},{title:"库存",slot:"stock",width:80},{title:"操作",key:"action",width:60,render:function(e,a){return e("Button",{attrs:{type:"text",disabled:t.disabled},on:{click:function(){t.deleteCoupons(a.index)}}},["删除"])}}]:[{title:"优惠券名称",key:"coupon_name",minWidth:180,render:function(e,t){var s,i;return"2"===t.row.coupon_sale_type?i=[e("span","折扣券"),e("img",{attrs:{src:a("e7cd")}})]:"1"===t.row.coupon_sale_type&&(i=[e("span","满减券"),e("img",{attrs:{src:a("626b")}})]),e("div",{class:{"coupons-name":!0}},[e("div",{class:{"coupons-type":!0,deduction:"2"===t.row.coupon_sale_type,"full-reduction":"1"===t.row.coupon_sale_type}},i),e("div",{class:{"coupons-name-content":!0}},[e("p",{class:{name:!0}},t.row[t.column.key]),e("p",{class:{content:!0}},null===(s=t.row)||void 0===s?void 0:s.content)])])}},{title:"操作",key:"action",width:60,render:function(e,a){return e("Button",{attrs:{type:"text",disabled:t.disabled},on:{click:function(){t.deleteCoupons(a.index)}}},["删除"])}}]},immediate:!0}}};t.default=s},a192:function(e,t,a){"use strict";a("d224")},a7d8:function(e,t,a){var s=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a("2909")),n=s(a("5530")),r=s(a("b85c"));a("a9e3"),a("14d9"),a("4de4"),a("d3b7"),a("159b"),a("ac1f"),a("841c");var l={name:"CouponSelector",props:{value:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},current:{type:[String,Object]},currentList:{type:Array},limit:{type:Number},pick_way:{type:[String,Number],default:""},params:{type:Object,default:function(){}}},data:function(){var e=this;this.$createElement;return{search:{keyword:"",coupon_sale_type:""},columns:[{title:"类型",key:"coupon_sale_type",width:80,render:function(e,t){return"2"===t.row.coupon_sale_type?e("div",{class:"coupons-type coupons-type-blue"},[e("span",["折"]),e("img",{class:"coupons-img",attrs:{src:a("e7cd")}})]):e("div",{class:"coupons-type coupons-type-yellow"},[e("span",["减"]),e("img",{class:"coupons-img",attrs:{src:a("626b")}})])}},{title:"名称",key:"coupon_name"},{title:"优惠内容",key:"content"},{title:"剩余数量",key:"surplus",render:function(e,t){return"0"==t.row.stock_type?e("div",["不限制"]):e("div",[t.row[t.column.key]])}},{title:"创建时间",key:"created_at",render:function(e,t){return e("div",{style:"word-break: normal"},[t.row[t.column.key]])}},{title:" ",key:"action",width:100,render:function(t,a){return t("div",{class:"action"},[t("Button",{class:"default-primary",attrs:{disabled:1===a.row.is_select},style:{display:a.row.checked?"none":"block"},on:{click:function(){e.setChecked(a.index,!0)}}},["选择"]),t("Button",{attrs:{type:"primary"},style:{display:a.row.checked?"block":"none"},on:{click:function(){e.setChecked(a.index,!1)}}},["已选"])])}}],data:[],total:0,page:{pageSize:10,pageNumber:1},loading:!1,selectRows:[],selectRow:{}}},methods:{handleSearch:function(){this.resetPage(),this.getCouponList()},handlePageChange:function(e){this.page=e,this.getCouponList();try{this.$refs.scrollBox.scrollTop=0}catch(t){console.log(t)}},resetPage:function(){var e;this.page={pageSize:10,pageNumber:1},null===(e=this.$refs["page"])||void 0===e||e.reset()},setChecked:function(e,t){var a=this;if(this.multiple){if(this.limit&&this.selectRows.length===this.limit&&t)return void this.$Message.error("已超出最大可选数量");this.$set(this.data[e],"checked",t),0===this.selectRows.length||t?this.selectRows.push(this.data[e]):this.selectRows=this.selectRows.filter((function(t){return t.id!==a.data[e].id}))}else t?(this.data.forEach((function(e,t){a.$set(a.data[t],"checked",!1)})),this.$set(this.data[e],"checked",!0),this.selectRow=this.data[e]):(this.$set(this.data[e],"checked",!1),this.selectRow={})},defaultChecked:function(){var e=this;this.multiple?this.data.forEach((function(t,a){var s,i=(0,r.default)(e.selectRows);try{for(i.s();!(s=i.n()).done;){var n=s.value;if(n.id===t.id){e.$set(e.data[a],"checked",!0);break}}}catch(l){i.e(l)}finally{i.f()}})):this.data.forEach((function(t,a){e.selectRow&&t.id===e.selectRow.id?e.$set(e.data[a],"checked",!0):e.$set(e.data[a],"checked",!1)}))},getCouponList:function(){var e=this;this.loading=!0;var t=Object.assign({},this.search,{pick_way:this.pick_way});t.coupon_sale_type="all"===t.coupon_sale_type?"":t.coupon_sale_type;var a=Object.assign((0,n.default)({pagesize:this.page.pageSize,page:this.page.pageNumber},this.params),t);this.$api.marketApi.getCouponAllList(a).then((function(t){e.loading=!1,0===t.error&&(e.data=t.list,e.total=t.total,e.defaultChecked())}))},handleSave:function(){this.multiple?this.$emit("on-change",this.selectRows):this.$emit("on-change",this.selectRow),this.handleCancel()},handleCancel:function(){this.$emit("on-cancel")},resetSearch:function(){this.search={keyword:"",coupon_sale_type:"all"}}},watch:{value:{handler:function(e){e&&(this.multiple?this.selectRows=(0,i.default)(this.currentList)||[]:this.selectRow=this.current||{},this.resetSearch(),this.resetPage(),this.getCouponList())},immediate:!0}},mounted:function(){this.resetSearch()}};t.default=l},ac9f:function(e,t,a){"use strict";a.r(t);var s=a("9c12"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},ad00:function(e,t,a){},b20d:function(e,t,a){var s=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("e9c4"),a("d3b7"),a("159b"),a("14d9"),a("a434");var i=s(a("b85c")),n=s(a("2909")),r={name:"levelSelector",props:{currentList:{type:Array,default:function(){return[]}}},data:function(){return{value:!1,selectRows:[],list:[],loading:!1}},methods:{setValue:function(){this.value=!this.value,this.value&&(this.selectRows=(0,n.default)(this.currentList)||[],this.getLabelData())},handleCancel:function(){this.setValue()},handleOk:function(){this.$emit("on-change",JSON.parse(JSON.stringify(this.selectRows))),this.setValue()},initDefaultChecked:function(){var e=this;this.currentList.length>0&&this.list.forEach((function(t,a){var s,n=(0,i.default)(e.selectRows);try{for(n.s();!(s=n.n()).done;){var r=s.value;if(t.id===r.id){e.$set(e.list[a],"checked",!0);break}}}catch(l){n.e(l)}finally{n.f()}}))},setLabelChecked:function(e,t){var a=this;if(this.$set(this.list[e],"checked",t),t)this.selectRows.push(this.list[e]);else{var s=-1;this.selectRows.forEach((function(t,i){t.id===a.list[e].id&&(s=i)})),this.selectRows.splice(s,1)}},getLabelData:function(){var e=this;this.loading=!0,this.$api.memberApi.getLevelList({is_all:1}).then((function(t){e.loading=!1,0===t.error&&(e.list=t.list||[],e.initDefaultChecked())}))}}};t.default=r},b36c:function(e,t,a){"use strict";a("dc78")},b595:function(e,t,a){"use strict";a("82d4")},b875:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"Preview",components:{},props:{popup_type:{type:String,default:""},selector:{type:Object,default:function(){}},preview_credit:{type:Object,default:function(){}},preview_balance:{type:Object,default:function(){}},preview_redpacket:{type:Object,default:function(){}},reward:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:{},created:function(){},mounted:function(){},methods:{}};t.default=a},b88e:function(e,t,a){var s=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a("2909"));a("a9e3"),a("d9e2"),a("d81d"),a("a15b"),a("a434"),a("d3b7");var n=s(a("0d35")),r=s(a("88c8")),l={name:"RewardLevels",components:{CouponSelector:n.default,CouponsList:r.default},props:{plugin:{type:String},type:{type:String},consumeType:{type:[String,Number]},award:{type:Array,default:function(){return[]}}},watch:{award:{immediate:!0,deep:!0,handler:function(e){this.model.list=e,this.updateData()}}},data:function(){var e=this;return{levelIndex:"",rewardList:[],model:{list:[]},list:[],item:{},rules:{money:[{required:!0,validator:function(t,a,s){var i=t.field.split(".")[1];if(a){if(i>0){var n,r,l=e.model.list[i-1].money,o=null===(n=e.model.list)||void 0===n||null===(r=n[i+1])||void 0===r?void 0:r.money;(l&&100*l>=100*a||o&&100*o<=100*a)&&s("奖励条件必须递增")}s()}else s(new Error("奖励条件必填"))}}],reward:[{required:!0,message:"奖励必选"}],coupon_ids:[{required:!0,message:"优惠券必选"}],credit:[{required:!0,message:"积分必填"}],balance:[{required:!0,message:"余额必填"}],"red_package.money":[{required:!0,message:"单个红包金额必填"}],"red_package.expiry":[{required:!0,message:"红包有效时间必填"}]}}},methods:{showSelector:function(e){this.levelIndex=e,this.model.list[this.levelIndex].couponSelector.value=!0},cancelSelector:function(){this.model.list[this.levelIndex].couponSelector.value=!1},changeCouponList:function(e){this.model.list[this.levelIndex].couponSelector.data=(0,i.default)(e);var t=this.model.list[this.levelIndex].couponSelector.data.map((function(e){return e.id}));this.model.list[this.levelIndex].coupon_ids=t.join(","),this.$refs["coupon_ids_".concat(this.levelIndex)].validateState="",this.cancelSelector()},deleteCoupons:function(e,t){this.model.list[t].couponSelector.data.splice(e,1);var a=this.model.list[t].couponSelector.data.map((function(e){return e.id}));this.model.list[t].coupon_ids=a.join(",")},handleAdd:function(){this.$emit("handleAdd")},handleDelete:function(e){this.$emit("handleDelete",e)},updateData:function(){this.$emit("update:data",this.model.list)},validateForm:function(){var e=this;return new Promise((function(t,a){e.$refs["form"].validate((function(e){e?t():a()}))}))},rewardLevel:function(e){var t=["一","二","三","四","五","六","七","八","九","十"];return t[e]}}};t.default=l},bb11:function(e,t,a){"use strict";var s=a("c505");a.o(s,"render")&&a.d(t,"render",(function(){return s["render"]})),a.o(s,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]}))},bb14:function(e,t,a){"use strict";var s=a("7422");a.o(s,"render")&&a.d(t,"render",(function(){return s["render"]})),a.o(s,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]}))},c2de:function(e,t,a){"use strict";a.r(t);var s=a("b875"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},c35a:function(e,t,a){"use strict";a.r(t);var s=a("8a81"),i=a("1e22");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("b595");var r=a("2877"),l=Object(r["a"])(i["default"],s["render"],s["staticRenderFns"],!1,null,"0360cf99",null);t["default"]=l.exports},c3af:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"market-send-coupons-list"},[t("Table",{attrs:{columns:e.columns,data:e.data},scopedSlots:e._u([{key:"stock",fn:function(t){var a=t.row;return[e._v(" "+e._s("0"===a.stock_type?"不限制":parseInt(a.stock)-parseInt(a.get_total))+" ")]}}])})],1)};t.render=a;var s=[];t.staticRenderFns=s},c505:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("d3b7"),a("6062"),a("3ca3"),a("ddb0");var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"collapse"},[t("Form",{ref:"form",attrs:{model:e.model,rules:e.rules,"label-width":120}},[t("ul",e._l(e.model.list,(function(s,i){return t("li",{key:i,staticClass:"collapse-item"},["1"===e.consumeType?t("div",{staticClass:"header"},[t("span",{staticClass:"icon iconfont",class:{"icon-full-right":!s.showFlag,"icon-full-down":s.showFlag},on:{click:function(e){s.showFlag=!s.showFlag}}}),e._v(" "+e._s(e.rewardLevel(i))+"级奖励规则 "),t("Button",{directives:[{name:"show",rawName:"v-show",value:0!==i,expression:"index !== 0"}],attrs:{type:"text",disabled:"add"!==e.type},on:{click:function(t){return e.handleDelete(i)}}},[e._v("删除")])],1):e._e(),t("div",{staticClass:"body",class:{show:s.showFlag,fullShow:"0"===e.consumeType}},["0"===e.consumeType?t("FormItem",{staticClass:"vertical customType",attrs:{label:"奖励条件：",prop:"list.".concat(i,".money"),rules:e.rules.money}},[t("div",{staticClass:"flex"},[t("span",[e._v("累计"+e._s("shoppingReward"==e.plugin?"消费":"充值")+"金额满")]),t("kdx-rr-input",{staticClass:"width-160 marginL-10",attrs:{placeholder:"请输入",number:"",fixed:2,maxValue:9999999.99,disabled:"add"!==e.type},model:{value:s.money,callback:function(t){e.$set(s,"money",t)},expression:"item.money"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("元")])])],1)]):t("FormItem",{staticClass:"vertical customType",style:{marginTop:"0"===e.consumeType?"0":"30px"},attrs:{label:"奖励条件：",prop:"list.".concat(i,".money"),rules:e.rules.money}},[t("div",{staticClass:"flex"},[t("span",[e._v("单次"+e._s("shoppingReward"==e.plugin?"消费":"充值")+"金额满")]),t("kdx-rr-input",{staticClass:"width-160 marginL-10",attrs:{placeholder:"请输入",number:"",fixed:2,maxValue:9999999.99,disabled:"add"!==e.type},model:{value:s.money,callback:function(t){e.$set(s,"money",t)},expression:"item.money"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("元")])])],1)]),t("FormItem",{staticClass:"vertical",attrs:{label:"奖励内容：",prop:"list.".concat(i,".reward"),rules:e.rules.reward}},[t("CheckboxGroup",{model:{value:s.reward,callback:function(t){e.$set(s,"reward",t)},expression:"item.reward"}},[t("Checkbox",{attrs:{label:"1",disabled:"add"!==e.type}},[e._v("优惠券")]),t("Checkbox",{attrs:{label:"2",disabled:"add"!==e.type}},[e._v("积分")]),t("Checkbox",{attrs:{label:"3",disabled:"add"!==e.type}},[e._v("余额")]),"shoppingReward"==e.plugin?t("Checkbox",{attrs:{label:"4",disabled:"add"!==e.type}},[e._v("红包（企业打款到零钱）")]):e._e()],1),s.reward.length?t("div",{staticClass:"next"},[new Set(s.reward).has("1")?t("FormItem",{ref:"coupon_ids_".concat(i),refInFor:!0,attrs:{label:"优惠券选择：",prop:"list.".concat(i,".coupon_ids"),rules:e.rules.coupon_ids}},[t("Button",{staticClass:"default-primary",attrs:{disabled:"add"!==e.type},on:{click:function(t){return e.showSelector(i)}}},[e._v(" "+e._s(3===s.couponSelector.data.length?"重新选择优惠券":"+添加优惠券(".concat(s.couponSelector.data.length,"/3)"))+" ")]),t("kdx-hint-alert",{staticStyle:{"margin-top":"10px","max-width":"610px","margin-left":"120px"}},[e._v(" 最多可选择3优惠券且优惠券须是在有效期内 ")]),s.couponSelector.data.length>0?t("div",{staticClass:"form-item-bg-box"},[t("div",{staticClass:"coupons-list"},[t("coupons-list",{attrs:{data:s.couponSelector.data,showStock:!0,disabled:"add"!==e.type},on:{"on-delete":function(t){return e.deleteCoupons(t,i)}}})],1)]):e._e()],1):e._e(),new Set(s.reward).has("2")?t("FormItem",{attrs:{label:"积分：",prop:"list.".concat(i,".credit"),rules:e.rules.credit}},[t("kdx-rr-input",{staticClass:"width-160",attrs:{placeholder:"积分",number:"",fixed:0,disabled:"add"!==e.type},model:{value:s.credit,callback:function(t){e.$set(s,"credit",t)},expression:"item.credit"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("积分")])])],1):e._e(),new Set(s.reward).has("3")?t("FormItem",{attrs:{label:"余额：",prop:"list.".concat(i,".balance"),rules:e.rules.balance}},[t("kdx-rr-input",{staticClass:"width-160",attrs:{placeholder:"余额",number:"",fixed:2,maxValue:9999999.99,disabled:"add"!==e.type},model:{value:s.balance,callback:function(t){e.$set(s,"balance",t)},expression:"item.balance"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("元")])])],1):e._e(),new Set(s.reward).has("4")&&"shoppingReward"==e.plugin?t("FormItem",{attrs:{label:"单个红包金额：",prop:"list.".concat(i,".red_package.money"),rules:e.rules["red_package.money"]}},[t("kdx-rr-input",{staticClass:"width-160",attrs:{placeholder:"请输入",number:"",fixed:2,minValue:.3,maxValue:200,disabled:"add"!==e.type},model:{value:s.red_package.money,callback:function(t){e.$set(s.red_package,"money",t)},expression:"item.red_package.money"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("元")])]),t("kdx-hint-text",{staticStyle:{"max-width":"610px","margin-left":"120px"}},[e._v(" 红包金额支持0.3-200元 ")]),t("kdx-hint-alert",{staticStyle:{"margin-top":"10px","max-width":"610px","margin-left":"120px"},attrs:{"show-icon":!1}},[e._v(" 使用发放红包功能需要商家在微信支付商户开通企业打款到零钱功能 "),t("br"),e._v("成功领取的红包将自动打款到会员的微信零钱 ")])],1):e._e(),new Set(s.reward).has("4")&&"shoppingReward"==e.plugin?t("FormItem",{staticClass:"redpacketTime",attrs:{label:"红包有效时间：",prop:"list.".concat(i,".red_package.expiry"),rules:e.rules["red_package.expiry"]}},[t("div",{staticClass:"flex"},[t("span",[e._v("发放后")]),t("div",[t("kdx-rr-input",{staticClass:"width-160",staticStyle:{margin:"0 10px"},attrs:{number:"",fixed:0,"min-value":1,"max-value":30,placeholder:"请输入",disabled:"add"!==e.type},model:{value:s.red_package.expiry,callback:function(t){e.$set(s.red_package,"expiry",t)},expression:"item.red_package.expiry"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("天")])]),t("kdx-hint-text",{staticClass:"marginL-10"},[e._v("设置时间必须在1-30天")])],1),t("span",[e._v("内买家首次登陆商城时弹窗提示领取，过期不提示")])])]):e._e(),new Set(s.reward).has("4")&&"shoppingReward"==e.plugin?t("FormItem",{staticClass:"noRequired",attrs:{label:"红包祝福语：",prop:"list.".concat(i,".red_package.blessing")}},[t("Input",{staticClass:"width-340",class:{"input-disabled":"add"!==e.type},attrs:{placeholder:"请输入祝福语",maxlength:"15","show-word-limit":"",disabled:"add"!==e.type},model:{value:s.red_package.blessing,callback:function(t){e.$set(s.red_package,"blessing",t)},expression:"item.red_package.blessing"}}),t("kdx-hint-tooltip",{attrs:{type:"image",image:a("71b0")}}),t("kdx-hint-text",{staticClass:"marginL-120"},[e._v("根据微信支付说明，请注意敏感词处理，否则设置敏感词会被转义成字符*")])],1):e._e()],1):e._e()],1)],1),t("coupon-selector",{attrs:{multiple:!0,limit:3,pick_way:"4",currentList:s.couponSelector.data},on:{"on-change":e.changeCouponList,"on-cancel":e.cancelSelector},model:{value:s.couponSelector.value,callback:function(t){e.$set(s.couponSelector,"value",t)},expression:"item.couponSelector.value"}})],1)})),0)])],1),e.model.list.length<10&&"1"===e.consumeType?t("div",{staticClass:"addReward"},[t("Button",{staticClass:"default-primary",attrs:{disabled:"add"!==e.type},on:{click:e.handleAdd}},[e._v("+添加奖励规则（"+e._s(e.model.list.length)+" / 10） ")])],1):e._e()])};t.render=s;var i=[];t.staticRenderFns=i},c695:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("b0c0");var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"preview-index"},[t("div",{staticClass:"preview-title"},[e._v("消费奖励预览")]),t("div",{staticClass:"preview-box"},[t("div",{staticClass:"mask"}),t("div",{staticClass:"coupon-box",class:"0"==e.popup_type?"":"newBg"},["0"==e.popup_type?t("div",{staticClass:"activity-name"},[e._v("消费奖励")]):e._e(),t("div",{staticClass:"coupon-box-content",class:"0"==e.popup_type?"":"newBg"},["0"==e.popup_type?t("div",{staticClass:"top-bg"}):e._e(),t("div",{staticClass:"scroll-box",class:"0"==e.popup_type?"":"newBg"},[new Set(e.reward).has("1")&&e.selector.data.length>0?t("ul",{staticClass:"coupon-list"},e._l(e.selector.data,(function(a,s){return t("li",{key:s,staticClass:"item",class:"0"==e.popup_type?"":"newBg"},[t("div",{staticClass:"item-left"},["1"===a.coupon_sale_type?t("span",{staticClass:"unit",class:"0"==e.popup_type?"":"newBg"},[e._v("￥")]):e._e(),"1"===a.coupon_sale_type?t("span",{staticClass:"price",class:"0"==e.popup_type?"":"newBg"},[e._v(e._s(a.discount_price))]):e._e(),"2"===a.coupon_sale_type?t("span",{staticClass:"price",class:"0"==e.popup_type?"":"newBg"},[e._v(e._s(parseFloat(a.discount_price)))]):e._e(),"2"===a.coupon_sale_type?t("span",{staticClass:"unit",class:"0"==e.popup_type?"":"newBg"},[e._v("折")]):e._e()]),t("div",{staticClass:"item-right"},[t("div",{staticClass:"tit",class:"0"==e.popup_type?"":"newBg"},[e._v(" "+e._s(a.coupon_name)+" ")]),t("div",{staticClass:"desc",class:"0"==e.popup_type?"":"newBg"},[e._v(" "+e._s(a.content)+" ")])])])})),0):e._e(),new Set(e.reward).has("2")?t("div",{staticClass:"other"},[t("div",{staticClass:"other-tit",class:"0"==e.popup_type?"":"newBg"},["0"==e.popup_type?t("div",{staticClass:"line"},e._l(10,(function(e){return t("div",{key:e,staticClass:"line-item"})})),0):e._e(),"0"==e.popup_type?t("div",{staticClass:"text"},[e._v("积分奖励")]):e._e(),"0"==e.popup_type?t("div",{staticClass:"line"},e._l(10,(function(e){return t("div",{key:e,staticClass:"line-item"})})),0):e._e()]),t("div",{staticClass:"item",class:"0"==e.popup_type?"":"newBg"},[t("div",{staticClass:"item-left"},[t("span",{staticClass:"price",class:"0"==e.popup_type?"":"newBg"},[e._v(" "+e._s(e.preview_credit.number)+" ")]),t("span",{staticClass:"unit",class:"0"==e.popup_type?"":"newBg"},[e._v("积分")])]),t("div",{staticClass:"item-right"},[t("div",{staticClass:"tit",class:"0"==e.popup_type?"":"newBg"},[e._v(" "+e._s(e.preview_credit.name)+" ")])])])]):e._e(),new Set(e.reward).has("3")?t("div",{staticClass:"other"},[t("div",{staticClass:"other-tit",class:"0"==e.popup_type?"":"newBg"},["0"==e.popup_type?t("div",{staticClass:"line"},e._l(10,(function(e){return t("div",{key:e,staticClass:"line-item"})})),0):e._e(),"0"==e.popup_type?t("div",{staticClass:"text"},[e._v("余额奖励")]):e._e(),"0"==e.popup_type?t("div",{staticClass:"line"},e._l(10,(function(e){return t("div",{key:e,staticClass:"line-item"})})),0):e._e()]),t("div",{staticClass:"item",class:"0"==e.popup_type?"defaultBg":"newBg"},[t("div",{staticClass:"item-left"},[t("span",{staticClass:"unit",class:"0"==e.popup_type?"":"newBg"},[e._v("￥")]),t("span",{staticClass:"price",class:"0"==e.popup_type?"":"newBg"},[e._v(e._s(parseFloat(e.preview_balance.number)))])]),t("div",{staticClass:"item-right"},[t("div",{staticClass:"tit",class:"0"==e.popup_type?"":"newBg"},[e._v(" "+e._s(e.preview_balance.name)+" ")])])])]):e._e(),new Set(e.reward).has("4")?t("div",{staticClass:"other"},[t("div",{staticClass:"other-tit",class:"0"==e.popup_type?"":"newBg"},["0"==e.popup_type?t("div",{staticClass:"line"},e._l(10,(function(e){return t("div",{key:e,staticClass:"line-item"})})),0):e._e(),"0"==e.popup_type?t("div",{staticClass:"text"},[e._v("红包奖励")]):e._e(),"0"==e.popup_type?t("div",{staticClass:"line"},e._l(10,(function(e){return t("div",{key:e,staticClass:"line-item"})})),0):e._e()]),t("div",{staticClass:"item",class:"0"==e.popup_type?"defaultBg":"newBg"},[t("div",{staticClass:"item-left"},[t("span",{staticClass:"unit",class:"0"==e.popup_type?"":"newBg"},[e._v("￥")]),t("span",{staticClass:"price",class:"0"==e.popup_type?"":"newBg"},[e._v(e._s(parseFloat(e.preview_redpacket.number)))])]),t("div",{staticClass:"item-right"},[t("div",{staticClass:"tit",class:"0"==e.popup_type?"":"newBg"},[e._v(" "+e._s(e.preview_redpacket.name)+" ")])])])]):e._e()])])])])])};t.render=s;var i=[];t.staticRenderFns=i},c7d2:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("kdx-header-bar",{scopedSlots:e._u([{key:"header",fn:function(){return[t("Button",{attrs:{type:"primary"},on:{click:e.addActivity}},[e._v("+添加活动")])]},proxy:!0}])},[t("Form",{ref:"form",attrs:{model:e.model,"label-width":100,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormItem",{attrs:{label:"活动名称："}},[t("i-input",{staticClass:"width-340",attrs:{type:"text",placeholder:"活动名称"},on:{"on-enter":e.handleSearch},model:{value:e.model.keyword,callback:function(t){e.$set(e.model,"keyword",t)},expression:"model.keyword"}})],1),t("FormItem",{attrs:{label:"消费类型："}},[t("Select",{staticClass:"width-160",model:{value:e.model.type,callback:function(t){e.$set(e.model,"type",t)},expression:"model.type"}},e._l(e.typeList,(function(a){return t("Option",{key:a.value,attrs:{value:a.value}},[e._v(" "+e._s(a.label)+" ")])})),1)],1),t("FormItem",{attrs:{label:"活动状态："}},[t("Select",{staticClass:"width-160",model:{value:e.model.status,callback:function(t){e.$set(e.model,"status",t)},expression:"model.status"}},e._l(e.statusList,(function(a){return t("Option",{key:a.value,attrs:{value:a.value}},[e._v(" "+e._s(a.label)+" ")])})),1)],1),t("FormItem",{attrs:{label:"活动时间："}},[t("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"活动时间"},on:{"on-change":e.changeDate},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),t("div",{staticClass:"ivu-form-item-btn"},[t("Button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")]),t("Button",{attrs:{type:"text"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1)};t.render=a;var s=[];t.staticRenderFns=s},cbd1:function(e,t,a){},d224:function(e,t,a){},d418:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("kdx-modal-frame",{attrs:{title:"会员标签组",loading:e.loading,"class-name":"shop-label-modal"},on:{"on-cancel":e.handleCancel,"on-ok":e.handleOk},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("div",{staticClass:"shop-label"},[t("div",{staticClass:"custom"},[e.list.length>0?t("div",{staticClass:"recommend"},[t("div",{staticClass:"label-content"},e._l(e.list,(function(a,s){return t("div",{key:s,staticClass:"shop-label-item",class:{checked:a.checked},on:{click:function(t){return e.setLabelChecked(s,!a.checked)}}},[t("span",[e._v(" "+e._s(a.group_name))]),t("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-chenggong-shixin-y"}})],1)})),0)]):t("div",{staticStyle:{"text-align":"center"}},[e._v(" 暂无数据 ")])])])])};t.render=a;var s=[];t.staticRenderFns=s},d448:function(e,t,a){"use strict";var s=a("95e6");a.o(s,"render")&&a.d(t,"render",(function(){return s["render"]})),a.o(s,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]}))},dc78:function(e,t,a){},e0398:function(e,t,a){"use strict";var s=a("f0c3");a.o(s,"render")&&a.d(t,"render",(function(){return s["render"]})),a.o(s,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]}))},e78b:function(e,t,a){"use strict";a.r(t);var s=a("5a35"),i=a("2290");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);var r=a("2877"),l=Object(r["a"])(i["default"],s["render"],s["staticRenderFns"],!1,null,"d87f4394",null);t["default"]=l.exports},e7cd:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAeBAMAAAD0jNL3AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAPUExURTCI7yyH7y2M7y2N8S2M8GsgvRMAAAAEdFJOUwogoJ8q1PIiAAAAFUlEQVQI12NgYDBkcAFCBQYBBhLZAIgxBI7KasErAAAAAElFTkSuQmCC"},e945:function(e,t,a){"use strict";a("6552")},eaf6:function(e,t,a){var s=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ac1f"),a("841c"),a("14d9");var i=s(a("5530")),n=s(a("e78b")),r={name:"list",components:{searchHeader:n.default},props:{},data:function(){return{loading:!1,page:{pageSize:10,pageNumber:1},search:{keyword:"",status:"",type:"",start_time:"",end_time:""},data:[],total:0,columns:[{title:"活动名称",key:"title"},{title:"消费类型",slot:"type"},{title:"活动时间",slot:"date"},{title:"停止时间",key:"stop_time"},{title:"领取人数",key:"send_count",width:160},{title:"活动状态",slot:"status",width:160},{title:"操作",slot:"action"}]}},computed:{},created:function(){this.getConsumeRewardList()},mounted:function(){},methods:{getConsumeRewardList:function(){var e=this;this.loading=!0;var t=(0,i.default)((0,i.default)({},this.search),{},{pagesize:this.page.pageSize,page:this.page.pageNumber});this.$api.consumeRewardApi.getConsumeRewardList(t).then((function(t){e.loading=!1,0===t.error&&(e.data=t.list,e.total=t.total)}))},handleSearch:function(e){this.search=(0,i.default)((0,i.default)({},this.search),e),this.refreshTable()},changePage:function(e){this.page=e,this.getConsumeRewardList()},handleView:function(e){this.$router.push({path:"/consumeReward/activity/index",query:{id:e,type:"view"}})},handleEdit:function(e){this.$router.push({path:"/consumeReward/activity/index",query:{id:e,type:"edit"}})},handleStop:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"确认要停该活动吗？停止后不可重新开启",onOk:function(){t.stopConsumeActivity(e)},onCancel:function(){}})},stopConsumeActivity:function(e){var t=this;this.$api.consumeRewardApi.stopConsumeActivity({id:e}).then((function(e){0===e.error&&(t.refreshTable(),t.$Message.success("操作成功"))}))},handleDelete:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"确定要删除该活动？",onOk:function(){t.delConsumeActivity(e)},onCancel:function(){}})},delConsumeActivity:function(e){var t=this;this.$api.consumeRewardApi.delConsumeActivity({id:e}).then((function(e){0===e.error&&(t.refreshTable(),t.$Message.success("删除成功"))}))},refreshTable:function(){this.page={pageSize:10,pageNumber:1},this.$refs["page"].reset(),this.getConsumeRewardList()}}};t.default=r},f0c3:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex activity-add-wrap"},[t("preview",{attrs:{selector:e.couponSelector,popup_type:e.model.popup_type,preview_credit:e.preview_credit,preview_balance:e.preview_balance,reward:this.model.rules.award[0].reward,preview_redpacket:e.preview_redpacket}}),t("div",{staticClass:"right"},[t("kdx-content-bar",{staticClass:"content-bar-right",scopedSlots:e._u([{key:"btn",fn:function(){return[t("Button",{staticClass:"primary-long",attrs:{type:"primary",loading:e.loading,disabled:"add"!==e.type&&"edit"!==e.type},on:{click:e.handleSave}},[e._v("保存")]),t("Button",{staticClass:"default-long",attrs:{to:"/consumeReward/activity/list"}},[e._v("取消")])]},proxy:!0}])},[t("div",{staticClass:"content"},[t("Form",{ref:"form",attrs:{model:e.model,"label-width":120,rules:e.rule}},[t("kdx-form-title",[e._v("基本信息")]),t("FormItem",{attrs:{label:"活动名称：",prop:"title"}},[t("i-input",{staticClass:"width-250",attrs:{placeholder:"请输入活动名称",disabled:"add"!==e.type},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),t("FormItem",{attrs:{label:"活动时间：",prop:"activity_time"}},[t("div",{staticClass:"flex activity-time"},[t("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:"",prop:"start_time"}},[t("DatePicker",{staticClass:"width-250",attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"请选择开始时间",disabled:"add"!==e.type},model:{value:e.model.start_time,callback:function(t){e.$set(e.model,"start_time",t)},expression:"model.start_time"}})],1),t("span",{staticStyle:{"padding-left":"10px","padding-right":"10px"}},[e._v("~")]),t("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:"",prop:"end_time"}},[t("DatePicker",{staticClass:"width-250",attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"请选择结束时间",disabled:"add"!==e.type&&"edit"!==e.type},model:{value:e.model.end_time,callback:function(t){e.$set(e.model,"end_time",t)},expression:"model.end_time"}})],1)],1)]),t("FormItem",{attrs:{label:"弹窗样式：",prop:"popup_type"}},[t("RadioGroup",{model:{value:e.model.popup_type,callback:function(t){e.$set(e.model,"popup_type",t)},expression:"model.popup_type"}},[t("Radio",{attrs:{label:"0",disabled:"add"!==e.type}},[e._v(" 样式一 ")]),t("Radio",{attrs:{label:"1",disabled:"add"!==e.type}},[e._v(" 样式二 ")])],1)],1),t("FormItem",{staticClass:"marginB-53 vertical",attrs:{label:"活动渠道：",prop:"client_type"}},[t("CheckboxGroup",{model:{value:e.model.client_type,callback:function(t){e.$set(e.model,"client_type",t)},expression:"model.client_type"}},[t("Checkbox",{attrs:{label:"20",disabled:"add"!==e.type}},[e._v(" 微信公众号 ")]),t("Checkbox",{attrs:{label:"21",disabled:"add"!==e.type}},[e._v(" 微信小程序 ")]),t("Checkbox",{attrs:{label:"10",disabled:"add"!==e.type}},[e._v(" 手机浏览器H5 ")]),t("Checkbox",{attrs:{label:"30",disabled:"add"!==e.type}},[e._v(" 头条/抖音小程序 ")])],1)],1),t("kdx-form-title",[e._v("规则设置")]),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"适用人群：",prop:"permission"}},[t("RadioGroup",{on:{"on-change":e.changeMemberType},model:{value:e.model.rules.permission,callback:function(t){e.$set(e.model.rules,"permission",t)},expression:"model.rules.permission"}},[t("Radio",{attrs:{label:"1",disabled:"add"!==e.type}},[e._v(" 会员等级 ")]),t("Radio",{attrs:{label:"2",disabled:"add"!==e.type}},[e._v(" 会员标签 ")]),t("Radio",{attrs:{label:"0",disabled:"add"!==e.type}},[e._v(" 全部会员 ")])],1),"0"!==e.model.rules.permission?t("div",{staticClass:"next-box"},[t("FormItem",{staticClass:"error-tip-nopadding",attrs:{prop:"member_info_id"}},[t("Button",{staticClass:"ivu-normal brand",attrs:{disabled:"add"!==e.type},on:{click:e.addMemberInfo}},[e._v(" +添加 ")]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedMemberList.length,expression:"selectedMemberList.length"}],staticClass:"label-list"},e._l(e.selectedMemberList,(function(a,s){return t("kdx-tag-label",{key:s,staticStyle:{margin:"0 10px 10px 0"},attrs:{type:a.level_name?"info":"warning",border:"",closable:"add"==e.type},on:{"on-close":function(t){return e.deleteMemberInfo(s)}}},[e._v(" "+e._s(a.level_name||a.group_name)+" ")])})),1)],1)],1):e._e()],1),t("FormItem",{staticClass:"vertical",attrs:{label:"支付方式：",prop:"pay_type"}},[t("CheckboxGroup",{model:{value:e.model.pay_type,callback:function(t){e.$set(e.model,"pay_type",t)},expression:"model.pay_type"}},[t("Checkbox",{attrs:{label:"2",disabled:"add"!==e.type}},[e._v("余额支付")]),t("Checkbox",{attrs:{label:"20",disabled:"add"!==e.type}},[e._v("支付宝支付")]),t("Checkbox",{attrs:{label:"30",disabled:"add"!==e.type}},[e._v("微信支付")])],1)],1),t("FormItem",{attrs:{label:"消费类型：",prop:"type"}},[t("RadioGroup",{model:{value:e.model.type,callback:function(t){e.$set(e.model,"type",t)},expression:"model.type"}},[t("Radio",{attrs:{label:"0",disabled:"add"!==e.type}},[e._v("累计消费金额满N元")]),t("Radio",{attrs:{label:"1",disabled:"add"!==e.type}},[e._v("单次消费金额满N元")])],1),"0"==e.model.type?t("kdx-hint-text",[e._v("活动期间内，消费金额累计满足 N元 可获得奖励，每个用户只限制领取一次。 消费金额不包含邮费，整单维权完成后收回奖励。")]):e._e(),"1"==e.model.type?t("kdx-hint-text",[e._v("活动期间内，单次消费金额满足N元可获得奖励，每个用户限制可领取一次，消费金额不包含邮费")]):e._e(),"1"==e.model.type?t("div",{staticClass:"next-box"},[t("FormItem",{attrs:{label:"可重复领取：",prop:"is_repeat","label-width":135}},[t("RadioGroup",{model:{value:e.model.is_repeat,callback:function(t){e.$set(e.model,"is_repeat",t)},expression:"model.is_repeat"}},[t("Radio",{attrs:{label:"0",disabled:"add"!==e.type}},[e._v("不重复")]),t("Radio",{attrs:{label:"1",disabled:"add"!==e.type}},[e._v("可重复领取")])],1),t("kdx-hint-text",{staticStyle:{"max-width":"610px","margin-left":"135px"}},[e._v(" 设置可重复领取，不建议进行维权售后的商品，如设置可维权商品存在刷单的风险 ")])],1)],1):e._e()],1),t("FormItem",{staticClass:"marginB-53",attrs:{label:"赠送时间：",prop:"send_type"}},[t("RadioGroup",{model:{value:e.model.send_type,callback:function(t){e.$set(e.model,"send_type",t)},expression:"model.send_type"}},[t("Radio",{attrs:{label:"0",disabled:"add"!==e.type}},[e._v("订单完成后")]),t("Radio",{attrs:{label:"1",disabled:"add"!==e.type}},[e._v("订单付款后")])],1)],1),t("kdx-form-title",[e._v("奖励设置")]),t("reward-levels",{ref:"reward-levels",attrs:{plugin:"shoppingReward",type:e.type,consumeType:e.model.type,award:e.model.rules.award},on:{"update:data":e.updateData,handleAdd:e.handleAdd,handleDelete:e.handleDelete}}),t("kdx-form-title",[e._v("活动限制")]),t("FormItem",{staticClass:"vertical",attrs:{label:"活动限制："}},[t("CheckboxGroup",{model:{value:e.model.activity_limit,callback:function(t){e.$set(e.model,"activity_limit",t)},expression:"model.activity_limit"}},[t("Checkbox",{attrs:{label:"1",disabled:"add"!==e.type}},[e._v("使用优惠券不能参与")]),t("Checkbox",{attrs:{label:"2",disabled:"add"!==e.type}},[e._v("参与满额立减不能参与")])],1)],1),t("FormItem",{attrs:{label:"不参与活动商品：","label-width":135}},[t("div",{staticClass:"next-box"},[t("Button",{staticClass:"default-primary",attrs:{disabled:"add"!==e.type},on:{click:e.addShop}},[e._v("+添加商品")]),t("div",{staticClass:"goods-box"},[e.goodSelector.data&&e.goodSelector.data.length>0?t("shop-name-page-list",{ref:"shop_name_list",attrs:{disabled:"add"!==e.type,list:e.goodSelector.data},on:{"on-delete":e.deleteGoods}}):e._e()],1)],1)])],1),t("goods-selector",{attrs:{multiple:!0,"current-list":e.goodSelector.data},on:{"on-change":e.changeGoodList,"on-cancel":e.cancelGoodSelector},model:{value:e.goodSelector.value,callback:function(t){e.$set(e.goodSelector,"value",t)},expression:"goodSelector.value"}}),t("level-selector",{ref:"level_modal",attrs:{"current-list":e.selectedMemberList},on:{"on-change":e.changeMemberInfo}}),t("label-selector",{ref:"label_modal",attrs:{"current-list":e.selectedMemberList},on:{"on-change":e.changeMemberInfo}})],1)])],1)],1)};t.render=a;var s=[];t.staticRenderFns=s},f4de:function(e,t,a){"use strict";var s=a("c695");a.o(s,"render")&&a.d(t,"render",(function(){return s["render"]})),a.o(s,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]}))},fb81:function(e,t,a){"use strict";a.r(t);var s=a("eaf6"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a}}]);