(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[120],{"09e30":function(t,e,n){},"14a1":function(t,e,n){"use strict";n("09e30")},2571:function(t,e,n){"use strict";n.r(e);var a=n("4d63c"),i=n.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},"2fc4":function(t,e,n){var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("b0c0"),n("ac1f"),n("841c");var i=a(n("d41c")),s={name:"index",components:{TableList:i.default},inject:["returnToTop"],data:function(){return{search:{name:""},table:{data:[],loading:!1,total:0},page:{pageSize:10,pageNumber:1}}},methods:{handleSearch:function(){this.refreshTable()},handleReset:function(){this.search.name="",this.refreshTable()},refreshTable:function(){this.page={pageSize:10,pageNumber:1},this.$refs["tableList"].reset(),this.getList()},changePage:function(t){this.page=t,this.getList()},getList:function(){var t=this;this.returnToTop(),this.table.loading=!0;var e=Object.assign({pagesize:this.page.pageSize,page:this.page.pageNumber,pager:1},this.search);this.$history.setData({page:this.page,search:this.search}),this.$api.goodsApi.goodGroupList(e).then((function(e){t.table.loading=!1,0===e.error&&(t.table.data=e.list,t.table.total=e.total)})).catch()}},mounted:function(){var t=this;this.$history.setRoute(this.$route).getData((function(e){t.page=t.$utils.deepCopy(e.page)||t.page,t.search=t.$utils.deepCopy(e.search)||t.search,t.$refs.tableList.reset(t.page),t.getList()}))}};e.default=s},"3eb9":function(t,e,n){},"49ca":function(t,e,n){"use strict";n.r(e);var a=n("7cb1"),i=n("b75d");for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("b56c");var r=n("2877"),o=Object(r["a"])(i["default"],a["render"],a["staticRenderFns"],!1,null,"9c56cf28",null);e["default"]=o.exports},"4d63c":function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("a9e3"),n("d81d"),n("14d9");var a={name:"TableList",props:{data:{type:Array,default:function(){return[]}},total:{type:Number,default:0}},data:function(){var t=this;this.$createElement;return{columns:[{type:"selection",width:40,align:"center"},{title:"商品分组名称",key:"name"},{title:"状态",key:"status",width:100,render:function(t,e){return"1"===e.row[e.column.key]?t("kdx-status-text",{attrs:{type:"success"}},["启用"]):"0"===e.row[e.column.key]?t("kdx-status-text",{attrs:{type:"disabled"}},["禁用"]):void 0}},{title:"操作",key:"action",width:200,render:function(e,n){var a;return a="0"===n.row.status?e("Button",{attrs:{type:"text",disabled:t.noManagePerm},on:{click:function(){t.editStatus({type:"single",row:n.row,status:1})}}},["启用"]):e("Button",{attrs:{type:"text",disabled:t.noManagePerm},on:{click:function(){t.editStatus({type:"single",row:n.row,status:0})}}},["禁用"]),e("div",{class:"action"},[a,e("Button",{attrs:{disabled:t.noManagePerm,type:"text"},on:{click:function(){t.toEdit("/goods/group/edit",n.row.id)}}},["编辑"]),e("Button",{attrs:{disabled:t.noManagePerm,type:"text"},on:{click:function(){t.handleDelete({type:"single",row:n.row})}}},["删除"])])}}],selectRows:[],isSelectAll:!1}},computed:{noManagePerm:function(){return!this.$getPermMap("goods.group.manage")},isDisabled:function(){return 0===this.selectRows.length},getTableData:function(){var t=this;return this.data.map((function(e){return e._disabled=t.noManagePerm,e}))}},methods:{toEdit:function(t,e){this.$router.push({path:t,query:{id:e}})},selectChange:function(t){this.selectRows=t,this.isSelectAll=this.selectRows.length===this.data.length},checkboxChange:function(t){this.$refs["table"].selectAll(t)},editStatus:function(t){var e,n=this,a=t.type,i=t.status,s=t.row;"single"===a?e=s.id:"multiple"===a&&(e=this.selectRows.map((function(t){return t.id}))),this.$api.goodsApi.editGoodGroupStatus({id:e,status:i}).then((function(t){0===t.error&&(n.$Message.success("商品组状态修改成功"),n.initFooterData(),n.$emit("on-refresh"))}))},handleDelete:function(t){var e=this,n=t.type,a=t.row;this.$Modal.confirm({title:"提示",content:"是否删除该商品组？",onOk:function(){if("single"===n)e.deleteGroup(a.id);else if("multiple"===n){var t=e.selectRows.map((function(t){return t.id}));e.deleteGroup(t)}}})},deleteGroup:function(t){var e=this;this.$api.goodsApi.deleteGoodGroup({id:t}).then((function(t){0===t.error&&(e.$Message.success("该商品组删除成功"),e.$emit("on-refresh"),e.initFooterData())})).catch()},reset:function(t){this.$refs["page"].reset(t)},changePage:function(t){this.$emit("on-page-change",t)},initFooterData:function(){this.isSelectAll=!1,this.selectRows=[]}}};e.default=a},"55a4":function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0,n("b0c0"),n("ac1f"),n("841c");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"good-group"},[e("kdx-header-bar",{attrs:{type:"little"},scopedSlots:t._u([{key:"header",fn:function(){return[e("Button",{directives:[{name:"perm",rawName:"v-perm.disabled",value:"goods.group.manage",expression:"'goods.group.manage'",modifiers:{disabled:!0}}],attrs:{type:"primary",to:"/goods/group/add"}},[t._v("+添加商品分组")])]},proxy:!0}])},[e("Form",{ref:"form",attrs:{"label-width":100,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[e("FormItem",{attrs:{label:"商品组名称："}},[e("Input",{staticClass:"width-340",attrs:{type:"text",placeholder:"商品组名称"},on:{"on-enter":t.handleSearch},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),e("div",{staticClass:"ivu-form-item-btn"},[e("Button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),e("Button",{attrs:{type:"text"},on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],staticClass:"table-list"},[e("table-list",{ref:"tableList",attrs:{data:t.table.data,total:t.table.total},on:{"on-refresh":t.getList,"on-page-change":t.changePage}})],1),t._t("default")],2)};e.render=a;var i=[];e.staticRenderFns=i},"7cb1":function(t,e,n){"use strict";var a=n("55a4");n.o(a,"render")&&n.d(e,"render",(function(){return a["render"]})),n.o(a,"staticRenderFns")&&n.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"8b84":function(t,e,n){"use strict";var a=n("97f0");n.o(a,"render")&&n.d(e,"render",(function(){return a["render"]})),n.o(a,"staticRenderFns")&&n.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"97f0":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"good-group-table-list"},[e("Table",{ref:"table",attrs:{columns:t.columns,data:t.getTableData},on:{"on-selection-change":t.selectChange}}),t.getTableData.length>0?e("div",{staticClass:"footer-action"},[e("Checkbox",{attrs:{disabled:t.noManagePerm},on:{"on-change":t.checkboxChange},model:{value:t.isSelectAll,callback:function(e){t.isSelectAll=e},expression:"isSelectAll"}}),e("Button",{attrs:{disabled:t.isDisabled},on:{click:function(e){return t.editStatus({type:"multiple",status:1})}}},[t._v("启用")]),e("Button",{attrs:{disabled:t.isDisabled},on:{click:function(e){return t.editStatus({type:"multiple",status:0})}}},[t._v("禁用")]),e("Button",{attrs:{disabled:t.isDisabled},on:{click:function(e){return t.handleDelete({type:"multiple"})}}},[t._v("删除")])],1):t._e(),e("div",{staticClass:"footer-page"},[e("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.changePage}})],1)],1)};e.render=n;var a=[];e.staticRenderFns=a},b56c:function(t,e,n){"use strict";n("3eb9")},b75d:function(t,e,n){"use strict";n.r(e);var a=n("2fc4"),i=n.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},d41c:function(t,e,n){"use strict";n.r(e);var a=n("8b84"),i=n("2571");for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("14a1");var r=n("2877"),o=Object(r["a"])(i["default"],a["render"],a["staticRenderFns"],!1,null,"6efa477e",null);e["default"]=o.exports}}]);