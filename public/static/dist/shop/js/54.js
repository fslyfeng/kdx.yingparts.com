(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[54],{"003c":function(e,t,a){"use strict";var n=a("c3af");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"0812":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("d3b7"),a("6062"),a("3ca3"),a("ddb0");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"other-set"},[t("Form",{ref:"form",attrs:{model:e.model,"label-width":120,rules:e.rules}},[t("div",{staticClass:"pb-30"},[t("kdx-form-title",[e._v("规则设置")]),t("FormItem",{staticClass:"dayAward",attrs:{label:"日签奖励：",prop:"day_reward"}},[t("div",{staticClass:"flex"},[t("span",{staticClass:"marginR-10"},[e._v("每日签到固定奖励")]),t("div",[t("kdx-rr-input",{staticClass:"width-160",attrs:{type:"text",number:"",fixed:0,"min-value":0,"max-value":999999999,placeholder:"请输入",disabled:e.isDisabled},model:{value:e.model.day_reward,callback:function(t){e.$set(e.model,"day_reward",t)},expression:"model.day_reward"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("积分")])])],1)]),t("kdx-hint-text",[e._v("用户每日签到可以获得的固定奖励")])],1),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"递增奖励：",prop:"increasing.status"}},[t("RadioGroup",{model:{value:e.model.increasing.status,callback:function(t){e.$set(e.model.increasing,"status",t)},expression:"model.increasing.status"}},[t("Radio",{attrs:{label:"1",disabled:e.isDisabled||e.notChange}},[e._v("开启")]),t("Radio",{attrs:{label:"0",disabled:e.isDisabled||e.notChange}},[e._v("关闭")])],1),t("kdx-hint-text",[e._v(" 用户连续签到的第二天起，开始递增奖励，若断签，需要重新计算 "),t("span",[t("kdx-hint-tooltip",{attrs:{type:"form",hintText:"示例"}},[e._v("举例说明，除了每日签到固定奖励5个积分以外，同时设置从第二天起递增奖励2积分，3天后不再递增。此种情况下，小明第一天签到得固定的奖励5个积分，第二天签到除了5个积分的固定奖励，同时得到递增奖励的2个积分，共7个积分；第三天得5+4个积分，第四天得5+6，第五天不再进行递增，可得奖励5+6个积分，第六天、第七天同理可得5+6个积分。若断签，则重新计算；若活动进行中修改规则，则按照新规则重新发放奖励。")])],1)]),"1"===e.model.increasing.status?t("div",{staticClass:"nest-box"},[t("div",{staticClass:"flex align-center"},[t("span",{staticClass:"marginR-10"},[e._v("第二天起递增奖励")]),t("FormItem",{attrs:{prop:"increasing.integral"}},[t("kdx-rr-input",{staticClass:"width-160",attrs:{type:"text",number:"",fixed:0,"min-value":0,"max-value":999999999,placeholder:"请输入",disabled:e.isDisabled||e.notChange},model:{value:e.model.increasing.integral,callback:function(t){e.$set(e.model.increasing,"integral",t)},expression:"model.increasing.integral"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("积分")])])],1),t("span",{staticClass:"marginR-10 marginL-10"},[e._v("且")])],1),t("div",{staticClass:"flex align-center"},[t("FormItem",{staticClass:"rulesBox",attrs:{prop:"increasing.day"}},[t("kdx-rr-input",{staticClass:"width-160",attrs:{type:"text",number:"",fixed:0,"min-value":0,"max-value":999999999,placeholder:"请输入",disabled:e.isDisabled||e.notChange},model:{value:e.model.increasing.day,callback:function(t){e.$set(e.model.increasing,"day",t)},expression:"model.increasing.day"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("天")])])],1),t("span",{staticClass:"marginR-10 marginL-10"},[e._v("不再递增")])],1)]):e._e()],1),t("FormItem",{attrs:{label:"连续签到奖励：",prop:"continuity.status"}},[t("RadioGroup",{model:{value:e.model.continuity.status,callback:function(t){e.$set(e.model.continuity,"status",t)},expression:"model.continuity.status"}},[t("Radio",{attrs:{label:"1",disabled:e.isDisabled||e.notChange}},[e._v("开启")]),t("Radio",{attrs:{label:"0",disabled:e.isDisabled||e.notChange}},[e._v("关闭")])],1),t("kdx-hint-text",[e._v(" 用户达到指定天数后，将触发额外奖励，签满最长连续天数后，不再赠送连续奖励，若断签则重新计算 "),t("kdx-hint-tooltip",{attrs:{type:"form",hintText:"示例"}},[e._v("举例说明，除了每日签到固定奖励5个积分以外，同时设置连续签到3天得10个积分，连签5天的20个积分，连续签到5天的情况下用户可正常领取奖励；若第四天断签，则第五天签到时仅能领取日签奖励5个积分，且不再触发3天连签奖励（已在第三天领取过），需自第五天起签满5天才可获得5天连签奖励的20个积分。 若断签，则重新计算。活动进行中不可更改连签规则")])],1),1==e.model.continuity.status?t("ul",[e._l(e.model.continuity.info,(function(a,n){return t("li",{key:n},[t("div",{staticClass:"header"},[t("div",{staticClass:"flex formBox"},[t("span",{staticClass:"marginR-10"},[e._v("连续签到")]),t("FormItem",{staticClass:"ruleBox",attrs:{prop:"continuity.info.".concat(n,".day"),rules:e.rules.day}},[t("kdx-rr-input",{staticClass:"width-160",attrs:{type:"text",number:"",fixed:0,"min-value":0,"max-value":999999999,placeholder:"请输入",disabled:e.isDisabled||e.notChange},model:{value:a.day,callback:function(t){e.$set(a,"day",t)},expression:"item.day"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("天")])])],1),t("div",{staticClass:"marginR-10 marginL-10"},[e._v("赠送以下奖励")])],1),t("Button",{directives:[{name:"show",rawName:"v-show",value:0!==n,expression:"index !== 0"}],staticStyle:{"margin-top":"6px"},attrs:{type:"text",disabled:e.isDisabled||e.notChange},on:{click:function(t){return e.handleDelete(n)}}},[e._v("删除 ")])],1),t("div",{staticClass:"body",class:{show:a.showFlag}},[t("FormItem",{staticClass:"vertical",attrs:{label:"奖励内容：",prop:"continuity.info.".concat(n,".award.select"),rules:e.rules["award.select"]}},[t("CheckboxGroup",{model:{value:a.award.select,callback:function(t){e.$set(a.award,"select",t)},expression:"item.award.select"}},[t("Checkbox",{attrs:{label:"credit",disabled:e.isDisabled||e.notChange}},[e._v("积分")]),t("Checkbox",{attrs:{label:"coupon",disabled:e.isDisabled||e.notChange}},[e._v("优惠券")])],1),a.award&&a.award.select.length?t("div",{staticClass:"next marginT-10"},[new Set(a.award.select).has("credit")?t("FormItem",{attrs:{label:"积分：",prop:"continuity.info.".concat(n,".award.credit"),rules:e.rules["award.credit"]}},[t("kdx-rr-input",{staticClass:"width-160",attrs:{placeholder:"请输入",number:"",fixed:0,"min-value":0,"max-value":999999999,disabled:e.isDisabled||e.notChange},model:{value:a.award.credit,callback:function(t){e.$set(a.award,"credit",t)},expression:"item.award.credit"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("积分")])])],1):e._e(),new Set(a.award.select).has("coupon")?t("FormItem",{ref:"coupon_ids_".concat(n),refInFor:!0,attrs:{label:"优惠券选择：",prop:"continuity.info.".concat(n,".award.coupon"),rules:e.rules["award.coupon"]}},[t("Button",{staticClass:"default-primary",attrs:{disabled:e.isDisabled||e.notChange},on:{click:function(t){return e.showSelector(n)}}},[e._v(" "+e._s(3===a.couponSelector.data.length?"重新选择优惠券":"+添加优惠券(".concat(a.couponSelector.data.length,"/3)"))+" ")]),t("hint-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","max-width":"610px","margin-left":"120px"}},[e._v(" 最多可选择3优惠券且优惠券须是在有效期内 ")]),a.couponSelector.data.length>0?t("div",{staticClass:"form-item-bg-box"},[t("div",{staticClass:"coupons-list"},[a.couponSelector.data.length>0?t("coupons-list",{attrs:{data:a.couponSelector.data,showStock:!0,disabled:e.isDisabled||e.notChange},on:{"on-delete":function(t){return e.deleteCoupons(t,n)}}}):e._e()],1)]):e._e()],1):e._e()],1):e._e()],1)],1),t("coupon-selector",{attrs:{multiple:!0,limit:3,pick_way:"4",currentList:a.couponSelector.data},on:{"on-change":e.changeCouponList,"on-cancel":e.cancelSelector},model:{value:a.couponSelector.value,callback:function(t){e.$set(a.couponSelector,"value",t)},expression:"item.couponSelector.value"}})],1)})),t("div",{staticClass:"addReward"},[t("Button",{staticClass:"default-primary",attrs:{disabled:e.isDisabled||e.notChange},on:{click:e.handleAdd}},[e._v("+添加奖励规则（"+e._s(e.model.continuity.info.length)+" / 7）")])],1)],2):e._e()],1),t("FormItem",{attrs:{label:"补签设置：",prop:"supplementary.status"}},[t("RadioGroup",{model:{value:e.model.supplementary.status,callback:function(t){e.$set(e.model.supplementary,"status",t)},expression:"model.supplementary.status"}},[t("Radio",{attrs:{label:"1",disabled:e.isDisabled}},[e._v("开启")]),t("Radio",{attrs:{label:"0",disabled:e.isDisabled}},[e._v("关闭")])],1),t("kdx-hint-text",[e._v(" 用户断签后，可以通过补签维持连续签到状态，次数不可超过当前设定周期 "),t("kdx-hint-tooltip",{attrs:{type:"form",hintText:"示例"}},[e._v("举例说明，除了每日签到固定奖励5个积分以外，同时设置连续签到3天得10个积分，连签5天的20个积分。用户在第三天完成签到后发现第2天断签，立即进行补签。补签后先获得日签奖励5积分，后判断已满足连签3天，可领取10积分。 若修改进行中的活动的补签规则，则按照新规则消耗积分和计算次数。")])],1),1==e.model.supplementary.status?t("div",{staticClass:"bg-box"},[t("FormItem",{attrs:{label:"补签次数：",prop:"supplementary.num"}},[t("div",{staticClass:"flex"},[t("div",[t("kdx-rr-input",{staticClass:"width-160",attrs:{type:"text",number:"",fixed:0,"min-value":0,"max-value":999999999,placeholder:"请输入",disabled:e.isDisabled},model:{value:e.model.supplementary.num,callback:function(t){e.$set(e.model.supplementary,"num",t)},expression:"model.supplementary.num"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("次")])])],1)])]),t("FormItem",{staticClass:"rulesBox",attrs:{label:"积分消耗：",prop:"supplementary.consume"}},[t("div",{staticClass:"flex"},[t("span",{staticClass:"marginR-10"},[e._v("每次消耗固定")]),t("div",[t("kdx-rr-input",{staticClass:"width-160",attrs:{type:"text",number:"",fixed:0,"min-value":0,"max-value":999999999,placeholder:"请输入",disabled:e.isDisabled},model:{value:e.model.supplementary.consume,callback:function(t){e.$set(e.model.supplementary,"consume",t)},expression:"model.supplementary.consume"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("积分")])])],1)])])],1):e._e()],1)],1)])],1)};t.render=n;var i=[];t.staticRenderFns=i},"09db":function(e,t,a){"use strict";var n=a("0812");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"0d35":function(e,t,a){"use strict";a.r(t);var n=a("bb14"),i=a("6820");for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);a("7dad");var r=a("2877"),o=Object(r["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"50bf1baf",null);t["default"]=o.exports},"0e11":function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("c7eb")),s=n(a("1da1"));a("b0c0"),a("d3b7");var r=n(a("2d1c")),o={name:"ActivityLink",props:{type:{type:String,default:""},pageSetup:{type:Object,default:function(){}},isDisabled:{type:Boolean,default:!1}},components:{MySelectLink:r.default},watch:{pageSetup:{handler:function(e){this.model=e}},model:{handler:function(e){this.$emit("update:pageSetup",e)},deep:!0}},computed:{notChange:function(){return"edit"==this.type}},data:function(){return{show:!1,model:{activity_link:"0",link_name:"",content:"查看",activity_title:"",link_url:""},rules:{link_name:[{required:!0,message:"页面名称必填"}],activity_link:[{required:!0,message:"活动链接必填"}],activity_title:[{required:!0,message:"活动标题必填"}],link_url:[{required:!0,message:"活动链接必填"}],content:[{required:!0,message:"入口文案必填"}]}}},methods:{changeLink:function(e){this.model.wxappid=e.wxappid,this.model.linkurl_name=e.name,this.model.link_url=e.url},handleCancel:function(){this.show=!1},validateForm:function(){var e=this;return new Promise((function(t,a){e.$refs["form"].validate(function(){var e=(0,s.default)((0,i.default)().mark((function e(n){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n?t():a();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}}};t.default=o},"0eaa":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("b0c0");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"select-link",staticStyle:{"margin-bottom":"10px"},on:{mouseenter:e.mouseenter}},[t("div",{staticClass:"body"},[e.linkInfo.url||e.linkInfo.keyLink?t("Input",{staticClass:"input",staticStyle:{"border-left":"0",flex:"1"},attrs:{disabled:"",value:e.linkInfo.name,"enter-button":"修改"}},[t("i",{class:[e.icon],attrs:{slot:"prepend"},slot:"prepend"}),e.enabled?t("span",{staticStyle:{padding:"4px 16px"},attrs:{slot:"append"},on:{click:e.selectLink},slot:"append"},[e._v("修改")]):e._e()]):e._e(),e.linkInfo.url||e.linkInfo.keyLink?e._e():t("i-button",{staticStyle:{padding:"4px 6px",width:"100%","text-align":"left",flex:"1"},attrs:{icon:e.btnIcon},on:{click:e.selectLink}},[e._v(e._s(e.btnText)+" ")])],1),e.loadSelector&&e.enabled?t("union-selector",{attrs:{"tab-name":e.chooseTabs,current:e.linkInfo},on:{"on-cancel":e.handleCancel,"on-change":e.changeLink},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}):e._e()],1)};t.render=n;var i=[];t.staticRenderFns=i},"12a02":function(e,t,a){"use strict";a.r(t);var n=a("c582"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=i.a},"196e":function(e,t,a){},"263f":function(e,t,a){"use strict";var n=a("cf309");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"2d1c":function(e,t,a){"use strict";a.r(t);var n=a("e8b2"),i=a("e643");for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);a("e9a1");var r=a("2877"),o=Object(r["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"248352c3",null);t["default"]=o.exports},"2ef96":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"other-set"},[t("Form",{ref:"form",attrs:{model:e.model,"label-width":120,rules:e.rules}},[t("div",{staticClass:"pb-30"},[t("kdx-form-title",[e._v("规则说明")]),t("FormItem",{attrs:{label:"规则说明：",prop:"rule"}},[t("div",{staticClass:"editor"},[t("editor",{ref:"editor",attrs:{plugins:e.plugins,isDisabled:e.isDisabled,height:380},model:{value:e.model.rule,callback:function(t){e.$set(e.model,"rule",t)},expression:"model.rule"}}),t("div",{staticClass:"btn-group"},[t("Button",{staticClass:"goods-btn default-primary",attrs:{disabled:e.isDisabled||""==e.data.end_time},on:{click:e.rest}},[e._v("恢复默认说明")])],1)],1)])],1)])],1)};t.render=a;var n=[];t.staticRenderFns=n},"37b7":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"other-set"},[t("Form",{ref:"form",attrs:{model:e.model,"label-width":120,rules:e.rules}},[t("div",{staticClass:"pb-30"},[t("kdx-form-title",[e._v("页面设置")]),t("FormItem",{attrs:{label:"页面名称：",prop:"link_name"}},[t("Input",{staticClass:"width-340",attrs:{placeholder:"请输入页面名称",maxlength:"6","show-word-limit":"",disabled:e.isDisabled||e.notChange},model:{value:e.model.link_name,callback:function(t){e.$set(e.model,"link_name",t)},expression:"model.link_name"}})],1),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"活动链接：",prop:"activity_link"}},[t("RadioGroup",{model:{value:e.model.activity_link,callback:function(t){e.$set(e.model,"activity_link",t)},expression:"model.activity_link"}},[t("Radio",{attrs:{label:"1",disabled:e.isDisabled||e.notChange}},[e._v("开启")]),t("Radio",{attrs:{label:"0",disabled:e.isDisabled||e.notChange}},[e._v("关闭")])],1),1==e.model.activity_link?t("div",{staticClass:"bg-box"},[t("FormItem",{staticClass:"title",attrs:{label:"活动标题：",prop:"activity_title"}},[t("Input",{staticClass:"width-340",attrs:{placeholder:"请输入活动标题",maxlength:"10","show-word-limit":"",disabled:e.isDisabled||e.notChange},model:{value:e.model.activity_title,callback:function(t){e.$set(e.model,"activity_title",t)},expression:"model.activity_title"}})],1),t("FormItem",{staticClass:"marginL-53 vertical",attrs:{label:"入口文案：",prop:"content"}},[t("Input",{staticClass:"width-340",attrs:{placeholder:"请输入入口文案",maxlength:"4","show-word-limit":"",disabled:e.isDisabled||e.notChange},model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})],1),t("FormItem",{staticClass:"vertical",attrs:{label:"跳转链接：",prop:"link_url"}},[t("MySelectLink",{staticClass:"mb-0",staticStyle:{width:"340px"},attrs:{value:{name:e.model.linkurl_name,url:e.model.link_url,wxappid:e.model.wxappid},enabled:"edit"!=e.type&&"view"!=e.type},on:{change:e.changeLink}})],1)],1):e._e()],1)],1)])],1)};t.render=a;var n=[];t.staticRenderFns=n},"3dd7":function(e,t,a){},4002:function(e,t,a){"use strict";var n=a("2ef96");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"42a0":function(e,t,a){},"43d6":function(e,t,a){"use strict";a.r(t);var n=a("7a6d"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=i.a},"4b0f":function(e,t,a){"use strict";var n=a("f673");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"4f12":function(e,t,a){"use strict";a.r(t);var n=a("fe58"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=i.a},5646:function(e,t,a){},"5eb3":function(e,t,a){"use strict";a.r(t);var n=a("aa10"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=i.a},"628f":function(e,t,a){e.exports=a.p+"static/dist/shop/img/preview-1.png"},6309:function(e,t,a){"use strict";a.r(t);var n=a("0e11"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=i.a},6654:function(e,t,a){"use strict";a.r(t);var n=a("be69"),i=a("4f12");for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);a("c934");var r=a("2877"),o=Object(r["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"61d418ba",null);t["default"]=o.exports},6820:function(e,t,a){"use strict";a.r(t);var n=a("a7d8"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=i.a},"6ad7":function(e,t,a){"use strict";a("96da")},"6c9e":function(e,t,a){},"6d79":function(e,t,a){"use strict";a("6c9e")},7259:function(e,t,a){"use strict";a.r(t);var n=a("c62b"),i=a("6309");for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);a("77c4");var r=a("2877"),o=Object(r["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"a717c4fa",null);t["default"]=o.exports},"73f2":function(e,t,a){},7422:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("ac1f"),a("841c");var n=function(){var e=this,t=e._self._c;return t("kdx-modal-frame",{attrs:{value:e.value,title:"优惠券选择器",width:"1000","ok-text":"保存"},on:{"on-ok":e.handleSave,"on-cancel":e.handleCancel}},[t("div",{staticClass:"selector-link-discount-coupon"},[t("div",{ref:"scrollBox",staticClass:"coupon-content"},[t("div",{staticClass:"search"},[t("Input",{staticClass:"width-250",attrs:{search:"","enter-button":"搜索",placeholder:"请输入"},on:{"on-search":e.getCouponList,"on-enter":e.getCouponList},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,"keyword",t)},expression:"search.keyword"}}),t("span",{staticClass:"label"},[e._v("优惠券类型：")]),t("Select",{staticClass:"width-160",on:{"on-change":e.handleSearch},model:{value:e.search.coupon_sale_type,callback:function(t){e.$set(e.search,"coupon_sale_type",t)},expression:"search.coupon_sale_type"}},[t("Option",{attrs:{value:"all"}},[e._v("全部")]),t("Option",{attrs:{value:"1"}},[e._v("满减券")]),t("Option",{attrs:{value:"2"}},[e._v("折扣券")])],1)],1),t("Table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{columns:e.columns,data:e.data}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.total>10,expression:"total>10"}],staticClass:"footer-page"},[t("kdx-page-component",{ref:"page",attrs:{total:e.total},on:{"on-change":e.handlePageChange}})],1)])])};t.render=n;var i=[];t.staticRenderFns=i},"77c4":function(e,t,a){"use strict";a("3dd7")},"78ac7":function(e,t,a){"use strict";a.r(t);var n=a("09db"),i=a("ebf3");for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);a("6d79");var r=a("2877"),o=Object(r["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"32aba056",null);t["default"]=o.exports},"78af":function(e,t,a){},"7a6d":function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("99af"),a("d3b7");var i=n(a("ceb0")),s={name:"RuleDescription",components:{Editor:i.default},props:{isDisabled:{type:Boolean,default:!1},data:{type:Object,default:function(){}},ruleDescription:{type:Object,default:function(){}}},watch:{ruleDescription:{handler:function(e){this.model=e},immediate:!0},model:{handler:function(e){this.$emit("updata:ruleDescription",e)},immediate:!0},"data.start_time":{handler:function(e){if(""!=e){var t=new Date(e).getFullYear(),a=new Date(e).getMonth()+1,n=new Date(e).getDate();this.start_time="".concat(t,"年").concat(a,"月").concat(n,"日")}},immediate:!0},"data.end_time":{handler:function(e){if(this.ifwatch&&""!=e){this.ifwatch=!1;var t=new Date(e).getFullYear(),a=new Date(e).getMonth()+1,n=new Date(e).getDate();this.end_time="".concat(t,"年").concat(a,"月").concat(n,"日"),this.start_time&&!this.ruleDescription.rule&&(this.model.rule='<div style="margin: 30px 0 74px 20px"><div style="font-weight: bold;margin-bottom:6px">活动时间</div>\n                                                    <div style="color: #636669;margin-bottom: 20px">'.concat(this.start_time,"-").concat(this.end_time,'</div>\n                            <div style="font-weight: bold;margin-bottom:6px">签到规则</div><div style="color: #636669;margin-bottom: 6px">·每日签到可以获得日签奖励，活动周期内连续签到可以获得连签奖励，可在签到页面查看具体奖励内容；</div>\n                            <div style="color: #636669;margin-bottom: 6px">·断签后支持补签，可通过积分兑换补签次数；</div><div style="color: #636669;">·活动奖励仅在活动周期内支持领取，最终解释权归商家所有</div></div>'))}}}},computed:{getData:function(){return this.ruleDescription}},data:function(){return{start_time:"",end_time:"",ifwatch:!0,plugins:"lists image media table wordcount link preview paste quickbars noneditable",model:{rule:""},rules:{rule:[{required:!0,message:"规则说明必填"}]}}},mounted:function(){},methods:{rest:function(){var e=new Date(this.data.end_time).getFullYear(),t=new Date(this.data.end_time).getMonth()+1,a=new Date(this.data.end_time).getDate();this.end_time="".concat(e,"年").concat(t,"月").concat(a,"日"),this.model.rule='<div style="margin: 30px 0 74px 20px"><div style="font-weight: bold;margin-bottom:6px">活动时间</div>\n                                                    <div style="color: #636669;margin-bottom: 20px">'.concat(this.start_time,"-").concat(this.end_time,'</div>\n                            <div style="font-weight: bold;margin-bottom:6px">签到规则</div><div style="color: #636669;margin-bottom: 6px">·每日签到可以获得日签奖励，活动周期内连续签到可以获得连签奖励，可在签到页面查看具体奖励内容；</div>\n                            <div style="color: #636669;margin-bottom: 6px">·断签后支持补签，可通过积分兑换补签次数；</div><div style="color: #636669;">·活动奖励仅在活动周期内支持领取，最终解释权归商家所有</div></div>')},validateForm:function(){var e=this;return new Promise((function(t,a){e.$refs["form"].validate((function(e){e?t():a()}))}))}}};t.default=s},"7dad":function(e,t,a){"use strict";a("5646")},"88c8":function(e,t,a){"use strict";a.r(t);var n=a("003c"),i=a("ac9f");for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);a("a192");var r=a("2877"),o=Object(r["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"ca8b90fc",null);t["default"]=o.exports},"96da":function(e,t,a){},"9c12":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"CouponsList",props:{data:{type:Array,required:!0},disabled:{type:Boolean,default:!1},showStock:{type:Boolean,default:!1}},data:function(){return{columns:[]}},methods:{deleteCoupons:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"确认删除该优惠券吗?",onOk:function(){t.$emit("on-delete",e)},onCancel:function(){}})}},watch:{showStock:{handler:function(e){var t=this;this.$createElement;this.columns=e?[{title:"优惠券名称",key:"coupon_name",minWidth:180,render:function(e,t){var n,i;return"2"===t.row.coupon_sale_type?i=[e("span","折扣券"),e("img",{attrs:{src:a("e7cd")}})]:"1"===t.row.coupon_sale_type&&(i=[e("span","满减券"),e("img",{attrs:{src:a("626b")}})]),e("div",{class:{"coupons-name":!0}},[e("div",{class:{"coupons-type":!0,deduction:"2"===t.row.coupon_sale_type,"full-reduction":"1"===t.row.coupon_sale_type}},i),e("div",{class:{"coupons-name-content":!0}},[e("p",{class:{name:!0}},t.row[t.column.key]),e("p",{class:{content:!0}},null===(n=t.row)||void 0===n?void 0:n.content)])])}},{title:"库存",slot:"stock",width:80},{title:"操作",key:"action",width:60,render:function(e,a){return e("Button",{attrs:{type:"text",disabled:t.disabled},on:{click:function(){t.deleteCoupons(a.index)}}},["删除"])}}]:[{title:"优惠券名称",key:"coupon_name",minWidth:180,render:function(e,t){var n,i;return"2"===t.row.coupon_sale_type?i=[e("span","折扣券"),e("img",{attrs:{src:a("e7cd")}})]:"1"===t.row.coupon_sale_type&&(i=[e("span","满减券"),e("img",{attrs:{src:a("626b")}})]),e("div",{class:{"coupons-name":!0}},[e("div",{class:{"coupons-type":!0,deduction:"2"===t.row.coupon_sale_type,"full-reduction":"1"===t.row.coupon_sale_type}},i),e("div",{class:{"coupons-name-content":!0}},[e("p",{class:{name:!0}},t.row[t.column.key]),e("p",{class:{content:!0}},null===(n=t.row)||void 0===n?void 0:n.content)])])}},{title:"操作",key:"action",width:60,render:function(e,a){return e("Button",{attrs:{type:"text",disabled:t.disabled},on:{click:function(){t.deleteCoupons(a.index)}}},["删除"])}}]},immediate:!0}}};t.default=n},a192:function(e,t,a){"use strict";a("d224")},a2aa:function(e,t,a){"use strict";a("78af")},a7d8:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("2909")),s=n(a("5530")),r=n(a("b85c"));a("a9e3"),a("14d9"),a("4de4"),a("d3b7"),a("159b"),a("ac1f"),a("841c");var o={name:"CouponSelector",props:{value:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},current:{type:[String,Object]},currentList:{type:Array},limit:{type:Number},pick_way:{type:[String,Number],default:""},params:{type:Object,default:function(){}}},data:function(){var e=this;this.$createElement;return{search:{keyword:"",coupon_sale_type:""},columns:[{title:"类型",key:"coupon_sale_type",width:80,render:function(e,t){return"2"===t.row.coupon_sale_type?e("div",{class:"coupons-type coupons-type-blue"},[e("span",["折"]),e("img",{class:"coupons-img",attrs:{src:a("e7cd")}})]):e("div",{class:"coupons-type coupons-type-yellow"},[e("span",["减"]),e("img",{class:"coupons-img",attrs:{src:a("626b")}})])}},{title:"名称",key:"coupon_name"},{title:"优惠内容",key:"content"},{title:"剩余数量",key:"surplus",render:function(e,t){return"0"==t.row.stock_type?e("div",["不限制"]):e("div",[t.row[t.column.key]])}},{title:"创建时间",key:"created_at",render:function(e,t){return e("div",{style:"word-break: normal"},[t.row[t.column.key]])}},{title:" ",key:"action",width:100,render:function(t,a){return t("div",{class:"action"},[t("Button",{class:"default-primary",attrs:{disabled:1===a.row.is_select},style:{display:a.row.checked?"none":"block"},on:{click:function(){e.setChecked(a.index,!0)}}},["选择"]),t("Button",{attrs:{type:"primary"},style:{display:a.row.checked?"block":"none"},on:{click:function(){e.setChecked(a.index,!1)}}},["已选"])])}}],data:[],total:0,page:{pageSize:10,pageNumber:1},loading:!1,selectRows:[],selectRow:{}}},methods:{handleSearch:function(){this.resetPage(),this.getCouponList()},handlePageChange:function(e){this.page=e,this.getCouponList();try{this.$refs.scrollBox.scrollTop=0}catch(t){console.log(t)}},resetPage:function(){var e;this.page={pageSize:10,pageNumber:1},null===(e=this.$refs["page"])||void 0===e||e.reset()},setChecked:function(e,t){var a=this;if(this.multiple){if(this.limit&&this.selectRows.length===this.limit&&t)return void this.$Message.error("已超出最大可选数量");this.$set(this.data[e],"checked",t),0===this.selectRows.length||t?this.selectRows.push(this.data[e]):this.selectRows=this.selectRows.filter((function(t){return t.id!==a.data[e].id}))}else t?(this.data.forEach((function(e,t){a.$set(a.data[t],"checked",!1)})),this.$set(this.data[e],"checked",!0),this.selectRow=this.data[e]):(this.$set(this.data[e],"checked",!1),this.selectRow={})},defaultChecked:function(){var e=this;this.multiple?this.data.forEach((function(t,a){var n,i=(0,r.default)(e.selectRows);try{for(i.s();!(n=i.n()).done;){var s=n.value;if(s.id===t.id){e.$set(e.data[a],"checked",!0);break}}}catch(o){i.e(o)}finally{i.f()}})):this.data.forEach((function(t,a){e.selectRow&&t.id===e.selectRow.id?e.$set(e.data[a],"checked",!0):e.$set(e.data[a],"checked",!1)}))},getCouponList:function(){var e=this;this.loading=!0;var t=Object.assign({},this.search,{pick_way:this.pick_way});t.coupon_sale_type="all"===t.coupon_sale_type?"":t.coupon_sale_type;var a=Object.assign((0,s.default)({pagesize:this.page.pageSize,page:this.page.pageNumber},this.params),t);this.$api.marketApi.getCouponAllList(a).then((function(t){e.loading=!1,0===t.error&&(e.data=t.list,e.total=t.total,e.defaultChecked())}))},handleSave:function(){this.multiple?this.$emit("on-change",this.selectRows):this.$emit("on-change",this.selectRow),this.handleCancel()},handleCancel:function(){this.$emit("on-cancel")},resetSearch:function(){this.search={keyword:"",coupon_sale_type:"all"}}},watch:{value:{handler:function(e){e&&(this.multiple?this.selectRows=(0,i.default)(this.currentList)||[]:this.selectRow=this.current||{},this.resetSearch(),this.resetPage(),this.getCouponList())},immediate:!0}},mounted:function(){this.resetSearch()}};t.default=o},aa10:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("c7eb")),s=n(a("1da1"));a("a9e3"),a("d9e2"),a("d3b7");var r={name:"BasicInfo",props:{status:{type:[Number,String]},type:{type:String,default:""},data:{type:Object,default:function(){}},isDisabled:{type:Boolean,default:!1}},data:function(){var e=this;return{model:{activity_name:"",start_time:"",end_time:"",client_type:[]},rule:{activity_name:[{required:!0,message:"请填写活动名称"}],start_time:[{required:!0,message:"请选择开始时间"}],end_time:[{required:!0,message:"请选择结束时间"},{validator:function(t,a,n){a?new Date(a).getTime()<=new Date(e.model.start_time).getTime()?n(new Error("结束时间需大于开始时间")):n():n(new Error("结束日期必填"))}}],client_type:[{required:!0,message:"活动渠道必选"}]},dateOptions:{disabledDate:function(t){if("edit"==e.type&&"1"==e.status){if(null!==e&&void 0!==e&&e.isEdit)return new Date(t)<=new Date(e.model.end_time);if(e.model.start_time)return new Date(t).getTime()+863e5<(new Date).getTime()||new Date(t).getTime()+863e5>new Date(e.model.start_time).getTime()+31536e6}else{if(null!==e&&void 0!==e&&e.isEdit)return new Date(t)<=new Date(e.model.end_time);if(e.model.start_time)return new Date(t).getTime()+863e5<(new Date).getTime()||new Date(t).getTime()+863e5<new Date(e.model.start_time).getTime()||new Date(t).getTime()+863e5>new Date(e.model.start_time).getTime()+31536e6}return!0}},startOptions:{disabledDate:function(t){return null!==e&&void 0!==e&&e.isEdit?new Date(t):""!=e.model.start_time&&!e.model.start_time||new Date(t).getTime()+863e5<(new Date).getTime()}}}},computed:{notStarted:function(){var e=!1;return"copy"==this.type?(e=!1,e):"0"!=this.status&&""!=this.status}},watch:{data:{handler:function(e){this.model=e},immediate:!0},model:{handler:function(e){this.$emit("update:data",e)},immediate:!0}},methods:{validateForm:function(){var e=this;return new Promise((function(t,a){e.$refs["form"].validate(function(){var e=(0,s.default)((0,i.default)().mark((function e(n){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n?t():a();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},changeStartTime:function(e){this.model.start_time=e},changeEndTime:function(e){this.model.end_time=e}}};t.default=r},ac9f:function(e,t,a){"use strict";a.r(t);var n=a("9c12"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=i.a},bb14:function(e,t,a){"use strict";var n=a("7422");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},be69:function(e,t,a){"use strict";var n=a("e136");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},c1d6:function(e,t,a){"use strict";a.r(t);var n=a("263f"),i=a("12a02");for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);a("6ad7");var r=a("2877"),o=Object(r["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"19f70486",null);t["default"]=o.exports},c3af:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"market-send-coupons-list"},[t("Table",{attrs:{columns:e.columns,data:e.data},scopedSlots:e._u([{key:"stock",fn:function(t){var a=t.row;return[e._v(" "+e._s("0"===a.stock_type?"不限制":parseInt(a.stock)-parseInt(a.get_total))+" ")]}}])})],1)};t.render=a;var n=[];t.staticRenderFns=n},c582:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("c7eb")),s=n(a("1da1")),r=n(a("5530"));a("e9c4"),a("d81d"),a("fb6a"),a("d3b7"),a("159b"),a("6062"),a("3ca3"),a("ddb0"),a("a15b"),a("ac1f"),a("5319"),a("14d9"),a("a434");var o=n(a("6654")),d=n(a("f278")),l=n(a("78ac7")),c=n(a("e119")),u=n(a("7259")),f={day_reward:"",increasing:{status:"0",integral:"",day:""},continuity:{status:"0",info:[{showFlag:!0,couponSelector:{data:[],value:!1},day:"",award:{select:["credit"],coupon:"",credit:""}}]},supplementary:{status:"0",num:"",consume:""}},p={name:"index",components:{preview:o.default,basicInfo:d.default,rulesInfo:l.default,ruleDescription:c.default,activityLink:u.default},data:function(){return{basicInfoData:{activity_name:"",start_time:"",end_time:"",client_type:[]},award_stage:JSON.parse(JSON.stringify(f)),page_setup:{link_name:"",activity_link:"",activity_title:"",content:"",link_url:""},rule_description:{rule:""},loading:!1,submitLoading:!1,id:"",type:"",status:""}},created:function(){var e=this.$route.query,t=e.id,a=e.type;this.id=t,this.type=a,this.id&&this.getData()},computed:{isDisabled:function(){return"view"===this.type}},methods:{getData:function(){var e=this;this.$api.creditSignApi.editActivity({id:this.id}).then((function(t){if(0==t.error){e.loading=!0;var a=t.data,n=a.activity_name,i=a.client_type,s=a.end_time,o=a.start_time,d=a.ext_field,l=a.status;t.data.ext_field.continuity.info=t.data.ext_field.continuity.info.map((function(e){return e.award.select=e.award.select.split(","),(0,r.default)({},e)})),i=i.split(","),e.status=l,e.award_stage=d,e.award_stage.continuity.info=e.award_stage.continuity.info.map((function(e){return e.coupon_info?(0,r.default)((0,r.default)({},e),{},{showFlag:!0,couponSelector:{data:e.coupon_info,value:!1}}):(0,r.default)((0,r.default)({},e),{},{showFlag:!0,couponSelector:{data:[],value:!1}})})),e.rule_description.rule=d.rule_description.rule,e.page_setup=d.page_setup,"copy"==e.type?(e.basicInfoData={activity_name:"副本-".concat(n),start_time:"",end_time:"",client_type:i},e.basicInfoData.activity_name=e.basicInfoData.activity_name.slice(0,20),delete t.id,delete t.stop_time,delete t.status,delete t.create_time,delete t.is_delete):(e.basicInfoData={activity_name:n,start_time:o,end_time:s,client_type:i},console.log(e.basicInfoData,"basicInfoData----"))}}))},handleSave:function(){var e=this;return(0,s.default)((0,i.default)().mark((function t(){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.basicInfo.validateForm();case 3:return t.next=5,e.$refs.rulesInfo.validateForm();case 5:return t.next=7,e.$refs.ruleDescription.validateForm();case 7:return t.next=9,e.$refs.activityLink.validateForm();case 9:e.handleParams(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),e.submitLoading=!1;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},handleParams:function(){"0"==this.award_stage.continuity.status&&(this.award_stage.continuity.info=f.continuity.info),"0"==this.award_stage.increasing.status&&(this.award_stage.increasing.integral="",this.award_stage.increasing.day=""),"0"==this.award_stage.supplementary.status&&(this.award_stage.supplementary.num="",this.award_stage.supplementary.consume=""),this.award_stage.continuity.info.forEach((function(e){new Set(e.award.select).has("credit")||(e.award.credit=""),new Set(e.award.select).has("coupon")||(e.award.coupon="")}));var e=(0,r.default)((0,r.default)({},this.basicInfoData),{},{ext_field:JSON.parse(JSON.stringify(this.award_stage))});e.ext_field.page_setup=this.page_setup,e.ext_field.rule_description=this.rule_description,e.ext_field.continuity.info.forEach((function(e){delete e.showFlag,delete e.couponSelector,delete e.coupon_info,e.award.select=e.award.select.join(",")})),e.ext_field=JSON.stringify(e.ext_field),this.id&&"copy"!=this.type?(e.id=this.id,this.editActivity(e)):this.saveActivity(e)},saveActivity:function(e){var t=this;this.submitLoading=!0,this.$api.creditSignApi.addCreditSign(e).then((function(e){0===e.error&&(t.$Message.success("保存成功"),t.$router.replace({path:"/creditSign/manage/index"}))})).finally((function(){t.submitLoading=!1}))},editActivity:function(e){var t=this;this.submitLoading=!0,this.$api.creditSignApi.editCreditSign(e).then((function(e){0===e.error&&(t.$Message.success("修改成功"),t.$router.replace({path:"/creditSign/manage/index"}))})).finally((function(){t.submitLoading=!1}))},handleAdd:function(){this.award_stage.continuity.info.length>=7||this.award_stage.continuity.info.push({showFlag:!0,couponSelector:{data:[],value:!1},day:"",award:{select:["credit"],coupon:"",credit:""}})},handleDelete:function(e){this.award_stage.continuity.info.splice(e,1)}}};t.default=p},c62b:function(e,t,a){"use strict";var n=a("37b7");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},c934:function(e,t,a){"use strict";a("42a0")},cf309:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"spell-group-index"},[t("preview"),t("div",{staticClass:"right"},[t("kdx-content-bar",{scopedSlots:e._u([{key:"btn",fn:function(){return[t("Button",{staticClass:"primary-long",attrs:{type:"primary",disabled:e.isDisabled,loading:e.submitLoading},on:{click:e.handleSave}},[e._v("保存 ")]),t("Button",{staticClass:"default-long",attrs:{to:"/creditSign/manage/index"}},[e._v("取消")])]},proxy:!0}])},[t("div",{staticClass:"content"},[t("basic-info",{ref:"basicInfo",attrs:{data:e.basicInfoData,"is-disabled":e.isDisabled,type:e.type,status:e.status},on:{"update:data":function(t){e.basicInfoData=t}}}),t("rules-info",{ref:"rulesInfo",attrs:{data:e.basicInfoData,award_stage:e.award_stage,type:e.type,status:e.status,"is-disabled":e.isDisabled},on:{"update:award_stage":function(t){e.award_stage=t},handleAdd:e.handleAdd,handleDelete:e.handleDelete}}),t("rule-description",{ref:"ruleDescription",attrs:{"is-disabled":e.isDisabled,data:e.basicInfoData,ruleDescription:e.rule_description},on:{"update:data":function(t){e.basicInfoData=t},"update:ruleDescription":function(t){e.rule_description=t},"update:rule-description":function(t){e.rule_description=t}}}),t("activity-link",{ref:"activityLink",attrs:{"is-disabled":e.isDisabled,pageSetup:e.page_setup,type:e.type},on:{"update:pageSetup":function(t){e.page_setup=t},"update:page-setup":function(t){e.page_setup=t}}})],1)])],1)],1)};t.render=a;var n=[];t.staticRenderFns=n},d224:function(e,t,a){},d9448:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("2909"));a("a9e3"),a("d9e2"),a("e9c4"),a("d81d"),a("a15b"),a("a434"),a("d3b7");var s=n(a("88c8")),r=n(a("0d35")),o={name:"RulesInfo",components:{CouponsList:s.default,CouponSelector:r.default},props:{status:{type:[Number,String]},type:{type:String,default:""},isDisabled:{type:Boolean,default:!1},data:{type:Object,default:function(){}},award_stage:{type:Object,default:function(){}}},data:function(){var e=this,t=function(t,a,n){var i=(new Date(e.data.end_time).getTime()-new Date(e.data.start_time).getTime())/864e5,s=(new Date(e.data.end_time).getTime()-(new Date).getTime())/864e5;a?(a<1&&n(new Error("递增天数不能为0")),"edit"==e.type&&"1"==e.status?a>s&&n(new Error("递增奖励天数必须小于剩余活动周期")):a>i&&n(new Error("递增奖励天数必须小于活动周期")),n()):n()};return{oldData:{},date:(new Date(this.data.end_time).getTime()-new Date(this.data.start_time).getTime())/864e5,levelIndex:"",level:{list:[]},model:{},list:[],rules:{day_reward:[{required:!0,message:"每日签到固定奖励必填"}],"increasing.status":[{required:!0,message:"递增奖励必填"}],"increasing.day":[{validator:t}],"increasing.integral":[{validator:function(e,t,a){t?t<1?a(new Error("递增奖励不可为0")):a():a(new Error("递增奖励必填"))}}],"continuity.status":[{required:!0,message:"连续签到奖励必填"}],"supplementary.status":[{required:!0,message:"补签设置必填"}],day:[{required:!0,validator:function(t,a,n){var i=t.field.split(".")[2],s=(new Date(e.data.end_time).getTime()-new Date(e.data.start_time).getTime())/864e5,r=(new Date(e.data.end_time).getTime()-(new Date).getTime())/864e5;if(a){if(a<=0&&n("连续签到天数不可低于1天"),i>0){var o,d,l,c=null===(o=e.model.continuity.info)||void 0===o?void 0:o[i-1].day,u=null===(d=e.model.continuity.info)||void 0===d||null===(l=d[i+1])||void 0===l?void 0:l.day;(c&&100*c>=100*a||u&&100*u<=100*a)&&n("奖励条件必须递增")}"edit"==e.type&&"1"==e.status?a>r&&n(new Error("连续奖励天数必须小于剩余活动周期")):a>s&&n(new Error("最大不可超过活动周期的天数")),n()}else n(new Error("连续签到天数必填"))}}],"supplementary.num":[{validator:function(t,a,n){var i=(new Date(e.data.end_time).getTime()-new Date(e.data.start_time).getTime())/864e5,s=(new Date(e.data.end_time).getTime()-(new Date).getTime())/864e5;a?("edit"==e.type&&"1"==e.status?(a>s&&n(new Error("补签次数不可超过当前剩余活动周期")),a<1?n(new Error("补签次数设置次数最小不可低于1次")):n()):a>i&&n(new Error("补签次数不可超过当前设定周期")),a<1?n(new Error("补签次数设置次数最小不可低于1次")):n()):n(new Error("补签次数必填"))}}],"supplementary.consume":[{validator:function(e,t,a){t?t<1?a(new Error("积分消耗不可为0")):a():a(new Error("积分消耗必填"))}}],"award.credit":[{validator:function(e,t,a){t?t<1?a(new Error("积分不可为0")):a():a(new Error("积分必填"))}}],"award.select":[{validator:function(e,t,a){t&&0!=t.length?a():(console.log("----"),a(new Error("奖励内容必填")))}}],"award.coupon":[{validator:function(e,t,a){t?a():a(new Error("优惠券必填"))}}]}}},computed:{getData:function(){return this.award_stage},notChange:function(){var e=!1;return"edit"==this.type&&"1"==this.status&&(e=!0),e}},watch:{data:{handler:function(e){this.oldData=JSON.parse(JSON.stringify(e))}},award_stage:{immediate:!0,handler:function(e){this.model=e,this.updateData()},deep:!0}},created:function(){},mounted:function(){},methods:{updateData:function(){this.$emit("update:award_stage",this.model)},handleAdd:function(){this.$emit("handleAdd")},handleDelete:function(e){this.$emit("handleDelete",e)},showSelector:function(e){this.levelIndex=e,this.model.continuity.info[this.levelIndex].couponSelector.value=!0},cancelSelector:function(){this.model.continuity.info[this.levelIndex].couponSelector.value=!1},changeCouponList:function(e){this.model.continuity.info[this.levelIndex].couponSelector.data=(0,i.default)(e);var t=this.model.continuity.info[this.levelIndex].couponSelector.data.map((function(e){return e.id}));this.model.continuity.info[this.levelIndex].award.coupon=t.join(","),this.$refs["coupon_ids_".concat(this.levelIndex)].validateState="",this.cancelSelector()},deleteCoupons:function(e,t){this.model.continuity.info[t].couponSelector.data.splice(e,1);var a=this.model.continuity.info[t].couponSelector.data.map((function(e){return e.id}));this.model.continuity.info[t].award.coupon=a.join(",")},addLevel:function(){var e=this;this.$nextTick((function(){e.$refs["level_modal"].setValue()}))},changeLevel:function(e){var t=e.map((function(e){return e.id}));this.level.list=e,this.model.level_id=t.join(","),this.$refs.form.validateField("level_id")},validateForm:function(){var e=this;return new Promise((function(t,a){e.$refs["form"].validate((function(e){e?t():a()}))}))}}};t.default=o},e0c6:function(e,t,a){"use strict";a("73f2")},e119:function(e,t,a){"use strict";a.r(t);var n=a("4002"),i=a("43d6");for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);a("e0c6");var r=a("2877"),o=Object(r["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"1d69c528",null);t["default"]=o.exports},e136:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var n=function(){var e=this;e._self._c;return e._m(0)};t.render=n;var i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"preview-index"},[t("div",{staticClass:"preview-bg"},[t("img",{attrs:{src:a("628f"),alt:""}})])])}];t.staticRenderFns=i},e643:function(e,t,a){"use strict";a.r(t);var n=a("f3be"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=i.a},e8b2:function(e,t,a){"use strict";var n=a("0eaa");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},e9a1:function(e,t,a){"use strict";a("196e")},ebf3:function(e,t,a){"use strict";a.r(t);var n=a("d9448"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=i.a},f278:function(e,t,a){"use strict";a.r(t);var n=a("4b0f"),i=a("5eb3");for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);a("a2aa");var r=a("2877"),o=Object(r["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"3d246256",null);t["default"]=o.exports},f3be:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("58bb")),s={inject:{chooseTab:{default:"LinkStorePageLink,LinkCouponLink,LinkCustomPageLink,LinkCustomLink,LinkCreditShopLink,LinkGoodsClassifyLink,LinkGoodsGroupLink,LinkGoodsLink,LinkLiverLink,LinkMarketingPage,LinkMerchants,LinkWxAppLink,LinkApplicationPlug,LinkVideoLiveLink,LinkVideoRamLink,LinkCustomerServiceLink"}},components:{UnionSelector:i.default},props:{enabled:{type:Boolean,default:!0},showSelector:{type:Boolean,default:!0},value:{type:Object,default:function(){}},btnText:{type:String,default:"选择链接"},icon:{type:String,default:"ivu-icon ivu-icon-ios-link"},tabName:{type:String,default:"LinkStorePageLink,LinkCouponLink,LinkCustomPageLink,LinkCustomLink,LinkCreditShopLink,LinkGoodsClassifyLink,LinkGoodsGroupLink,LinkGoodsLink,LinkLiverLink,LinkMarketingPage,LinkWxAppLink,LinkApplicationPlug"},btnIcon:{type:String,default:"ios-link"}},watch:{value:{immediate:!0,handler:function(){this.linkInfo=this.value}}},data:function(){return{show:!1,linkInfo:{url:"",name:""},loadSelector:!1,chooseTabs:""}},created:function(){this.chooseTabs=this.chooseTab?this.chooseTab:this.tabName},methods:{mouseenter:function(){this.loadSelector=!0},handleCancel:function(){this.show=!1},changeLink:function(e){this.linkInfo=e,this.show=!1,this.$emit("change",e)},selectLink:function(){var e=this;this.showSelector?this.$nextTick((function(){setTimeout((function(){e.show=!0}))})):this.$emit("click")}}};t.default=s},f673:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"seckill-basic-info"},[t("Form",{ref:"form",attrs:{model:e.model,"label-width":120,rules:e.rule},nativeOn:{submit:function(e){e.preventDefault()}}},[t("kdx-form-title",[e._v("基本信息")]),t("FormItem",{attrs:{label:"活动名称：",prop:"activity_name"}},[t("Input",{staticClass:"width-390",class:{"input-disabled":e.isDisabled},attrs:{placeholder:"请输入活动名称",maxlength:"20","show-word-limit":"",disabled:e.isDisabled||"edit"==e.type},model:{value:e.model.activity_name,callback:function(t){e.$set(e.model,"activity_name",t)},expression:"model.activity_name"}})],1),t("FormItem",{attrs:{label:"活动期限：",required:""}},[t("div",{staticClass:"flex"},[t("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"start_time"}},[t("DatePicker",{staticClass:"width-250",attrs:{value:e.model.start_time,type:"date",placeholder:"开始时间",options:e.startOptions,disabled:e.isDisabled||e.notStarted},on:{"on-change":e.changeStartTime}})],1),t("div",{staticClass:"marginL-10 marginR-10"},[e._v("~")]),t("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"end_time"}},[t("DatePicker",{staticClass:"width-250",attrs:{value:e.model.end_time,options:e.dateOptions,type:"date",placeholder:"结束时间",disabled:"add"!==e.type&&"edit"!==e.type&&"copy"!==e.type},on:{"on-change":e.changeEndTime}})],1)],1)]),t("FormItem",{attrs:{label:"活动渠道：",prop:"client_type"}},[t("CheckboxGroup",{model:{value:e.model.client_type,callback:function(t){e.$set(e.model,"client_type",t)},expression:"model.client_type"}},[t("Checkbox",{attrs:{label:"20",disabled:e.isDisabled||"edit"==e.type&&"1"==e.status}},[e._v(" 微信公众号 ")]),t("Checkbox",{attrs:{label:"21",disabled:e.isDisabled||"edit"==e.type&&"1"==e.status}},[e._v(" 微信小程序 ")]),t("Checkbox",{attrs:{label:"10",disabled:e.isDisabled||"edit"==e.type&&"1"==e.status}},[e._v(" 手机浏览器H5 ")]),t("Checkbox",{attrs:{label:"30",disabled:e.isDisabled||"edit"==e.type&&"1"==e.status}},[e._v(" 头条/抖音小程序 ")])],1)],1)],1)],1)};t.render=a;var n=[];t.staticRenderFns=n},fe58:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"Preview",components:{},props:{},data:function(){return{}},watch:{},computed:{},created:function(){},mounted:function(){},methods:{}};t.default=a}}]);