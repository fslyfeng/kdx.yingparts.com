(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[126],{"15b9":function(e,t,a){"use strict";a.r(t);var n=a("a2bd"),s=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=s.a},"3294f":function(e,t,a){},"4a84":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("ac1f"),a("841c"),a("b0c0");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"good-label"},[t("kdx-header-bar",{attrs:{type:"little"},scopedSlots:e._u([{key:"header",fn:function(){return[t("Button",{attrs:{type:"primary",disabled:e.noManagePerm},on:{click:e.toAdd}},[e._v("创建顶部菜单")])]},proxy:!0}])},[t("br"),t("Form",{ref:"form",attrs:{model:e.search,"label-width":130,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormItem",{attrs:{label:"菜单名称："}},[t("Input",{staticClass:"width-160",attrs:{type:"text",placeholder:"请输入菜单名称"},on:{"on-enter":e.handleSearch},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),t("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:"创建时间："}},[t("div",{staticClass:"flex"},[t("FormItem",{attrs:{label:""}},[t("DatePicker",{staticClass:"width-170",attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开始时间"},model:{value:e.search.start_time,callback:function(t){e.$set(e.search,"start_time",t)},expression:"search.start_time"}})],1),t("span",{staticStyle:{"padding-left":"10px","padding-right":"10px"}},[e._v(" ~ ")]),t("FormItem",{attrs:{label:""}},[t("DatePicker",{staticClass:"width-170",attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"请选择结束时间"},model:{value:e.search.end_time,callback:function(t){e.$set(e.search,"end_time",t)},expression:"search.end_time"}})],1)],1)]),t("div",{staticClass:"ivu-form-item-btn"},[t("Button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")]),t("Button",{attrs:{type:"text"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.table.loading,expression:"table.loading"}],staticClass:"table-list"},[t("table-list",{ref:"table_list",attrs:{data:e.getTableData,type:"1",total:e.table.total},on:{"on-refresh":e.getList,"on-page-change":e.changePage}})],1),e._t("default")],2)};t.render=n;var s=[];t.staticRenderFns=s},"4f66":function(e,t,a){},"5b52":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"good-group-table-list"},[t("Table",{ref:"table",attrs:{columns:e.columns,data:e.getTableData},on:{"on-selection-change":e.selectChange}}),t("div",{staticClass:"footer-page"},[t("kdx-page-component",{ref:"page",attrs:{total:e.total},on:{"on-change":e.changePage}})],1)],1)};t.render=a;var n=[];t.staticRenderFns=n},"6c8a":function(e,t,a){"use strict";a.r(t);var n=a("cdcef"),s=a("bb5d");for(var r in s)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(r);a("e03e");var i=a("2877"),o=Object(i["a"])(s["default"],n["render"],n["staticRenderFns"],!1,null,"7ebbd870",null);t["default"]=o.exports},"8b31":function(e,t,a){"use strict";a("4f66")},a2bd:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("a9e3"),a("14d9"),a("d81d"),a("d3b7");var n={name:"TableList",props:{data:{type:Array,default:function(){return[]}},total:{type:Number,default:0},type:{type:String,default:"1"}},data:function(){var e=this;this.$createElement;return{columns:[{title:"排序",key:"sort_order",width:100},{title:"菜单名称",key:"name"},{title:"跳转链接",key:"url"},{title:"创建时间",key:"created_at"},{title:"状态",key:"status",width:100,render:function(e,t){return"0"==t.row.status?e("kdx-status-text",["禁用"]):"1"==t.row.status?e("kdx-status-text",{attrs:{type:"success"}},["启用"]):void 0}},{title:"操作",key:"action",width:200,render:function(t,a){var n;return n="0"===a.row.status?t("Button",{attrs:{type:"text",disabled:e.noManagePerm},on:{click:function(){e.handleLabelGroupStatus(a.row,"1")}}},["启用"]):t("Button",{attrs:{type:"text",disabled:e.noManagePerm},on:{click:function(){e.handleLabelGroupStatus(a.row,"0")}}},["禁用"]),t("div",{class:"action"},[n,t("Button",{attrs:{type:"text",disabled:e.noManagePerm},on:{click:function(){e.$router.push({path:"/home/pc/menus/add",query:{id:a.row.id,type:e.type}})}}},["编辑"]),t("Button",{attrs:{type:"text",disabled:e.noManagePerm||"1"==a.row.is_default},on:{click:function(){e.handleDelete(a.row)}}},["删除"])])}}],selectRows:[],isSelectAll:!1}},computed:{getTableData:function(){var e=this;return this.data.map((function(t){return t._disabled=e.noManagePerm,t}))},noManagePerm:function(){return!this.$getPermMap("pc.menus.manage")},isDisabled:function(){return 0===this.selectRows.length},selectHasDefault:function(){return this.selectRows.some((function(e){return"1"==e.is_default}))}},methods:{selectChange:function(e){this.selectRows=e,this.isSelectAll=this.selectRows.length===this.data.length},checkboxChange:function(e){this.$refs["table"].selectAll(e)},handleLabelGroupStatus:function(e,t){var a=this;this.$api.homeApi.changeStatus({id:e.id,status:t}).then((function(e){0===e.error&&(a.$Message.success("状态修改成功"),a.$emit("on-refresh"))}))},handleDelete:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"是否确认删除？",onOk:function(){t.$api.homeApi.menuDelete({id:e.id}).then((function(e){0===e.error&&(t.$Message.success("删除成功"),t.$emit("on-refresh"))})).catch()}})},deleteLabel:function(e){var t=this;this.$api.goodsApi.deleteLabelGroup({id:e}).then((function(e){0===e.error&&(t.$Message.success("标签删除成功"),t.$emit("on-refresh"))})).catch()},reset:function(e){this.$refs["page"].reset(e)},changePage:function(e){this.$emit("on-page-change",e)},initFooterData:function(){this.isSelectAll=!1,this.selectRows=[]}}};t.default=n},a611:function(e,t,a){"use strict";a.r(t);var n=a("e797"),s=a("15b9");for(var r in s)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(r);a("8b31");var i=a("2877"),o=Object(i["a"])(s["default"],n["render"],n["staticRenderFns"],!1,null,"6cb8211c",null);t["default"]=o.exports},bb5d:function(e,t,a){"use strict";a.r(t);var n=a("ed5a"),s=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=s.a},cdcef:function(e,t,a){"use strict";var n=a("4a84");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},e03e:function(e,t,a){"use strict";a("3294f")},e797:function(e,t,a){"use strict";var n=a("5b52");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},ed5a:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d81d"),a("ac1f"),a("841c"),a("14d9");var s=n(a("a611")),r=a("d1be"),i={name:"list",inject:["returnToTop"],components:{TableList:s.default},computed:{noManagePerm:function(){return!this.$getPermMap("pc.menus.manage")},getTableData:function(){var e=this;return this.table.data.map((function(t){return t._disabled=e.noManagePerm,t}))}},data:function(){return{search:{name:"",start_time:"",end_time:""},table:{data:[],loading:!1,total:0},optionData:{status:[{value:"all",name:"全部"},{value:"1",name:"启用"},{value:"0",name:"禁用"}]},page:{pageSize:10,pageNumber:1}}},methods:{handleSearch:function(){this.refreshTable()},handleReset:function(){this.search={name:"",start_time:"",end_time:""},this.refreshTable()},toAdd:function(){this.$router.push({path:"/home/pc/menus/add?type=1"})},refreshTable:function(e){e||(this.page={pageSize:10,pageNumber:1}),this.$refs["table_list"].reset(e),this.getList()},changePage:function(e){this.page=e,this.getList()},getList:function(){var e=this;this.$history.setData({search:this.search,page:this.page}),this.returnToTop(),this.$refs["table_list"].initFooterData(),this.table.loading=!0;var t=Object.assign({},this.search);t.start_time=(0,r.formatDate)(t.start_time,"yyyy-MM-dd hh:mm:ss"),t.end_time=(0,r.formatDate)(t.end_time,"yyyy-MM-dd hh:mm:ss");var a=Object.assign({pagesize:this.page.pageSize,page:this.page.pageNumber,type:1},t);this.$api.homeApi.menuList(a).then((function(t){e.table.loading=!1,0===t.error&&(e.table.data=t.list,e.table.total=t.total)})).catch()}},mounted:function(){var e=this;this.$history.setRoute(this.$route).getData((function(t){var a=t.search,n=t.page;e.search=e.$utils.deepCopy(a)||e.search,e.page=n,e.$nextTick((function(){e.refreshTable(e.page)}))}))}};t.default=i}}]);