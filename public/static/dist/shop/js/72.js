(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[72],{"03a4":function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__("4ea4").default;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createForOfIteratorHelper2=_interopRequireDefault(__webpack_require__("b85c"));__webpack_require__("b680"),__webpack_require__("a15b"),__webpack_require__("d81d"),__webpack_require__("99af"),__webpack_require__("ac1f"),__webpack_require__("841c"),__webpack_require__("d3b7"),__webpack_require__("159b"),__webpack_require__("3ca3"),__webpack_require__("ddb0"),__webpack_require__("00b4"),__webpack_require__("b0c0"),__webpack_require__("14d9"),__webpack_require__("4de4");var _fileRequest=__webpack_require__("d08c"),_accessory=__webpack_require__("35f3"),_helpers=__webpack_require__("d1be"),_default2={name:"videos",props:{current:{type:[String,Object]},weixinControl:{type:Object,default:function(){return{}}}},data:function(){return{value:!0,total:0,page:{pageSize:50,pageNumber:1},selectNumber:0,pageSizeOption:[20,50,100],multipleCheck:!1,indeterminate:!1,video:{select:{},list:[],address:"",url:""},networkAddress:"",search:{createTime:[]},loading:!1,selectRows:[],tab:{name:"local"},preContent:{backgroundColor:"#E9EDEF",src:__webpack_require__("b594"),text:"视频预览区"},controls:!1,editName:!1,nameId:"",groupModel:{name:""},groupRules:{name:[{required:!0,message:"视频名称必填"}]}}},computed:{maxSize:function(){var e,t,i,s;return this.toFixed(null===(e=this.$store.state)||void 0===e||null===(t=e.config)||void 0===t||null===(i=t.uploadSetting)||void 0===i||null===(s=i.video)||void 0===s?void 0:s.max_size)||2048},limitType:function(){var e,t,i,s,a=((null===(e=this.$store.state)||void 0===e||null===(t=e.config)||void 0===t||null===(i=t.uploadSetting)||void 0===i||null===(s=i.video)||void 0===s?void 0:s.extensions)||[]).map((function(e){return"video/".concat(e)})).join(",");return a||"image/png"},hintMaxText:function(){var e=this.toFixed(this.maxSize/1024);return"大小不要超过".concat(e,"M")},hintTooltipText:function(){var e,t,i,s,a=((null===(e=this.$store.state)||void 0===e||null===(t=e.config)||void 0===t||null===(i=t.uploadSetting)||void 0===i||null===(s=i.video)||void 0===s?void 0:s.extensions)||[]).join(",");return"".concat(this.hintMaxText,",支持视频类型").concat(a)},storageContent:function(){var e=this.$store.state.config.shopStorage,t={local:"本地存储",ftp:"ftp存储",qiniu:"七牛云存储",oss:"阿里云OSS",cos:"腾讯云COS"};return 10===+e.storage_model?"（当前托管方式：托管存储".concat(t[e.type],"）"):"（当前托管方式：独立存储".concat(t[e.type],"）")}},created:function(){this.$store.dispatch("config/getUploadSetting"),this.selectRow=this.current||"",this.resetPage(),this.networkAddress="",this.preContent={backgroundColor:"#E9EDEF",src:__webpack_require__("b594"),text:"视频预览区"}},methods:{toFixed:function(e){var t=Math.pow(10,2),i=e*t+.5;return i=parseInt(i,10)/t,i+""},getSelectNumber:function(){var e;null!==(e=this.selectRows)&&void 0!==e&&e.length?this.selectNumber=this.selectRows.length:this.selectNumber=0},handlePageChange:function(e){this.page=e,this.getList();try{this.$refs.scrollBox.scrollTop=0}catch(t){console.log(t)}},resetPage:function(){this.page={pageSize:50,pageNumber:1},this.getList()},handleSearch:function(){this.resetPage(),this.getList()},getList:function(){var e=this;this.loading=!0;var t=this.search.createTime;t[0]?(t[0]=this.$utils.formatDate(new Date(t[0]),"yyyy-MM-dd hh:mm:ss"),t[1]=this.$utils.formatDate(new Date(t[1]),"yyyy-MM-dd hh:mm:ss")):t="";var i=Object.assign({pagesize:this.page.pageSize,page:this.page.pageNumber,type:"20",created_at:t});this.$api.accessoryApi.getAccessoryList(i).then((function(t){var i;(e.loading=!1,0===t.error)&&(!((null===(i=t.list)||void 0===i?void 0:i.length)>0)||t.list.forEach((function(e){e.showMore=!1})),e.video.list=t.list||[],e.total=t.total,e.defaultChecked())}))},selectFile:function(){this.$refs["upload_input"].click()},changeFile:function changeFile(e){var _this2=this;if(e){this.loading=!0;var fileArr=e.target.files,paramsArr=[],group_id="all"===this.isActive?"":this.isActive,_iterator=(0,_createForOfIteratorHelper2.default)(fileArr),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _this$$store$state4,_this$$store$state4$c,_this$$store$state4$c2,_this$$store$state4$c3,file=_step.value;if(file.size>1024*this.maxSize){this.$Message.error("视频应选择小于".concat(this.toFixed(this.maxSize/1024),"M的"));break}var type=((null===(_this$$store$state4=this.$store.state)||void 0===_this$$store$state4||null===(_this$$store$state4$c=_this$$store$state4.config)||void 0===_this$$store$state4$c||null===(_this$$store$state4$c2=_this$$store$state4$c.uploadSetting)||void 0===_this$$store$state4$c2||null===(_this$$store$state4$c3=_this$$store$state4$c2.video)||void 0===_this$$store$state4$c3?void 0:_this$$store$state4$c3.extensions)||[]).join("|"),reg2=eval("/^(\\s|\\S)+("+type+")+$/");if(!reg2.test(file.name.toLowerCase())){this.$Message.error("请选择正确的格式的视频");break}var params=new FormData;params.append("file",file),this.weixinControl.actionApi?(params.append("video_title","todo"),params.append("video_description","todo"),params.append("type",this.weixinControl.actionApi.getTypeNameByMsgType())):params.append("type","20"),params.append("group_id",group_id),paramsArr.push(params)}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(paramsArr.length<fileArr.length)return this.$refs["upload_input"].value="",void(this.loading=!1);var uploadFun=paramsArr.map((function(e){return _this2.weixinControl.actionApi?(0,_fileRequest.uploadFile)(_this2.weixinControl.actionApi.uploadFile(),e):(0,_fileRequest.uploadFile)(_accessory.accessoryApi.uploadFile.api,e)}));Promise.all(uploadFun).then((function(e){if(_this2.loading=!1,console.log(e,99),e.length===paramsArr.length){var t=!0;e.forEach((function(e){0!=e.error&&(t=!1,_this2.$Message.error(e.message))})),t&&_this2.$Message.success("视频上传成功"),_this2.resetPage(),_this2.$refs["upload_input"].value=""}})).catch((function(e){console.log("err",e)}))}},checkVideo:function(e){var t,i,s=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(this.$set(this.video.list[e],"checked",a),0===this.selectRows.length)?this.selectRows.push(null===(t=this.video.list[e])||void 0===t?void 0:t.id):a?this.selectRows.push(null===(i=this.video.list[e])||void 0===i?void 0:i.id):this.selectRows=this.selectRows.filter((function(t){var i;return t!==(null===(i=s.video.list[e])||void 0===i?void 0:i.id)}));this.getSelectNumber(),this.handleCheckAll()},defaultChecked:function(){var e=this;this.selectRows.forEach((function(t,i){var s,a=(0,_createForOfIteratorHelper2.default)(e.video.list);try{for(a.s();!(s=a.n()).done;){var r=s.value;if(!r.checked&&t===r.id){r.checked=!0,r.index=i;break}}}catch(n){a.e(n)}finally{a.f()}})),this.getSelectNumber(),this.handleCheckAll()},deleteVideo:function(e,t){var i,s=this;i="single"===e?t.id:this.selectRows,this.$Modal.confirm({title:"提示",content:"是否要删除该视频？",onOk:function(){s.$api.accessoryApi.deleteFile({id:i}).then((function(e){0===e.error&&(s.$Message.success("视频删除成功"),s.resetPage())}))}})},resetName:function(e){this.editName=!0,this.nameId=e.id,e.showMore=!e.showMore},nameCancel:function(){this.groupModel.name="",this.editName=!1,this.$refs.name.resetFields()},nameOk:function(){var e=this;return new Promise((function(){e.$refs["name"].validate((function(t){t&&e.$api.accessoryApi.changeImageName({id:e.nameId,name:e.groupModel.name}).then((function(t){0===t.error&&(e.$Message.success("操作成功"),e.nameCancel(),e.getList())}))}))}))},seeVideo:function(e){e.showMore=!e.showMore,window.open(this.$media(e.path,"video"),"_blank")},clickMore:function(e){e.showMore=!e.showMore},mouseleave:function(e){e.showMore=!e.showMore},changeAllSelected:function(e){var t=this;this.multipleCheck=e,this.indeterminate=!1,this.video.list.forEach((function(i){i.checked=e,e?t.selectRows.push(i.id):t.selectRows=t.selectRows.filter((function(e){return e!==i.id}))})),this.getSelectNumber()},handleCheckAll:function(){var e=this.video.list.filter((function(e){return 1==e.checked})).length;this.selectNumber>0?this.page.pageSize==e||this.video.list.length==e?(this.multipleCheck=!0,this.indeterminate=!1):0==e?(this.multipleCheck=!1,this.indeterminate=!1):(this.multipleCheck=!1,this.indeterminate=!0):(this.multipleCheck=!1,this.indeterminate=!1)}},filters:{formadateTime:function(e){return(0,_helpers.formatDate)(new Date(e),"yyyy-MM-dd")}}};exports.default=_default2},"0480":function(e,t,i){"use strict";i.r(t);var s=i("03a4"),a=i.n(s);for(var r in s)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(r);t["default"]=a.a},"24f0":function(e,t,i){"use strict";i.r(t);var s=i("3613"),a=i.n(s);for(var r in s)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(r);t["default"]=a.a},3564:function(e,t,i){"use strict";var s=i("9e1e");i.o(s,"render")&&i.d(t,"render",(function(){return s["render"]})),i.o(s,"staticRenderFns")&&i.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]}))},3613:function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__("4ea4").default;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createForOfIteratorHelper2=_interopRequireDefault(__webpack_require__("b85c"));__webpack_require__("b680"),__webpack_require__("a15b"),__webpack_require__("d81d"),__webpack_require__("99af"),__webpack_require__("d3b7"),__webpack_require__("3ca3"),__webpack_require__("ddb0"),__webpack_require__("159b"),__webpack_require__("14d9"),__webpack_require__("ac1f"),__webpack_require__("00b4"),__webpack_require__("b0c0"),__webpack_require__("4de4"),__webpack_require__("841c"),__webpack_require__("fb6a");var _fileRequest=__webpack_require__("d08c"),_accessory=__webpack_require__("35f3"),_helpers=__webpack_require__("d1be"),_default={name:"ImageSelector",data:function(){return{value:!1,selectRows:[],tab:{name:"local"},loading:!1,group:{name:"",value:!1,updateId:"",updateName:"",list:[]},image:{address:""},list:[],isActive:"all",selectNumber:0,search:{createTime:[]},rtotal:0,pageSizeOption:[20,50,100],page:{pageSize:50,pageNumber:1},total:0,multipleCheck:!1,indeterminate:!1,editValue:!1,editName:!1,groupModel:{group_id:"",name:""},groupRules:{group_id:[{required:!0,message:"所在分组必填"}],name:[{required:!0,message:"图片名称必填"}]},groupList:[],nameId:""}},computed:{maxSize:function(){var e,t,i,s;return this.toFixed(null===(e=this.$store.state)||void 0===e||null===(t=e.config)||void 0===t||null===(i=t.uploadSetting)||void 0===i||null===(s=i.image)||void 0===s?void 0:s.max_size)||2048},limitType:function(){var e,t,i,s,a=((null===(e=this.$store.state)||void 0===e||null===(t=e.config)||void 0===t||null===(i=t.uploadSetting)||void 0===i||null===(s=i.image)||void 0===s?void 0:s.extensions)||[]).map((function(e){return"jpg"===e?"image/jpeg":"image/".concat(e)})).join(",");return a||"image/png"},hintMaxText:function(){var e=this.toFixed(this.maxSize/1024);return"大小不要超过".concat(e,"M")},hintTooltipText:function(){var e,t,i,s,a=((null===(e=this.$store.state)||void 0===e||null===(t=e.config)||void 0===t||null===(i=t.uploadSetting)||void 0===i||null===(s=i.image)||void 0===s?void 0:s.extensions)||[]).join(",")||"png";return"".concat(this.hintMaxText,",支持图片类型").concat(a)},storageContent:function(){var e=this.$store.state.config.shopStorage,t={local:"本地存储",ftp:"ftp存储",qiniu:"七牛云存储",oss:"阿里云OSS",cos:"腾讯云COS"};return 10===+e.storage_model?"（当前托管方式：托管存储".concat(t[e.type],"）"):"（当前托管方式：独立存储".concat(t[e.type],"）")}},created:function(){var e=this;this.$store.dispatch("config/getUploadSetting"),this.$nextTick((function(){e.isActive="all",e.selectRows=[],e.image.address="",e.getImageGroup(),e.resetPage()}))},methods:{adaption:function(e){var t=this.$media;return t(e)},toFixed:function(e){var t=Math.pow(10,2),i=e*t+.5;return i=parseInt(i,10)/t,i+""},handlePageChange:function(e){this.page=e,this.getImageList();try{this.$refs.scrollBox.scrollTop=0}catch(t){console.log(t)}},resetPage:function(){var e;this.page={pageSize:50,pageNumber:1},null===(e=this.$refs["page"])||void 0===e||e.reset(),this.getImageList()},resetGroup:function(){this.isActive="all",this.getImageGroup()},selectFile:function(){this.$refs["upload_input"].click()},changeFile:function changeFile(e){var _this2=this;if(e){this.loading=!0;var fileArr=e.target.files,paramsArr=[],group_id="all"===this.isActive?"":this.isActive,_iterator=(0,_createForOfIteratorHelper2.default)(fileArr),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _this$$store$state4,_this$$store$state4$c,_this$$store$state4$c2,_this$$store$state4$c3,file=_step.value;if(file.size>1024*this.maxSize){this.$Message.error("图片应选择小于".concat(this.toFixed(this.maxSize/1024),"M的"));break}var type=((null===(_this$$store$state4=this.$store.state)||void 0===_this$$store$state4||null===(_this$$store$state4$c=_this$$store$state4.config)||void 0===_this$$store$state4$c||null===(_this$$store$state4$c2=_this$$store$state4$c.uploadSetting)||void 0===_this$$store$state4$c2||null===(_this$$store$state4$c3=_this$$store$state4$c2.image)||void 0===_this$$store$state4$c3?void 0:_this$$store$state4$c3.extensions)||[]).join("|"),reg2=eval("/^(\\s|\\S)+("+type+")+$/");if(!reg2.test(file.name.toLowerCase())){this.$Message.error("请选择正确的格式的图片");break}var params=new FormData;params.append("file",file),params.append("type","10"),params.append("group_id",group_id),paramsArr.push(params)}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(paramsArr.length<fileArr.length)return this.$refs["upload_input"].value="",void(this.loading=!1);var uploadFun=paramsArr.map((function(e){return(0,_fileRequest.uploadFile)(_accessory.accessoryApi.uploadFile.api,e)}));Promise.all(uploadFun).then((function(e){var t=[];e.forEach((function(e){0!==e.error&&(t.push(e.message),_this2.$Message.error(e.message))})),_this2.loading=!1,0===t.length&&_this2.$Message.success("图片上传成功"),t.length!==e.length?(_this2.getImageGroup(),_this2.resetPage(),_this2.$refs["upload_input"].value=""):_this2.$refs["upload_input"].value=""})).catch((function(e){console.log("err",e)}))}},addGroupOk:function(){var e=this;this.group.name?this.$api.accessoryApi.addImageGroup({name:this.group.name,type:"10"}).then((function(t){0===t.error&&(e.$Message.success("分组添加成功"),e.group.name="",e.addGroupCancel(),e.resetGroup(),e.resetPage())})):this.$Message.error("请填写要添加的分组名称")},addGroupCancel:function(){this.group.value=!1},checkGroup:function(e){this.isActive=e,this.resetPage()},editGroup:function(e){this.group.updateId=e.id,this.group.updateName=e.name},editGroupOk:function(){var e=this,t={id:this.group.updateId,name:this.group.updateName};this.$api.accessoryApi.editImageGroup(t).then((function(t){0===t.error&&(e.$Message.success("分组名称修改成功"),e.group.updateId="",e.group.updateName="",e.resetGroup(),e.resetPage())}))},editGroupCancel:function(){this.group.updateId=""},deleteGroup:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"确定要删除该图片分组？",onOk:function(){t.$api.accessoryApi.deleteImageGroup({id:e.id}).then((function(e){0===e.error&&(t.$Message.success("该图片分组删除成功"),t.resetGroup(),t.resetPage())}))},onCancel:function(){}})},checkImage:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$set(this.list[e],"checked",i),0===this.selectRows.length||i?this.selectRows.push(this.list[e].id):this.selectRows=this.selectRows.filter((function(i){return i!==t.list[e].id})),this.getSelectNumber(),this.handleCheckAll()},deleteImage:function(e,t){var i,s=this;i="single"===e?t.id:this.selectRows,this.$api.accessoryApi.deleteFile({id:i}).then((function(t){0===t.error&&(s.$Message.success("图片删除成功"),s.getImageGroup(),s.getImageList(),s.selectRows=[],"more"===e&&s.resetSelect())}))},handleSearch:function(){this.resetPage(),this.getImageList()},getImageList:function(){var e=this;this.loading=!0;var t=this.search.createTime;t[0]?(t[0]=this.$utils.formatDate(new Date(t[0]),"yyyy-MM-dd hh:mm:ss"),t[1]=this.$utils.formatDate(new Date(t[1]),"yyyy-MM-dd hh:mm:ss")):t="";var i="all"===this.isActive?"":this.isActive,s=Object.assign({pagesize:this.page.pageSize,page:this.page.pageNumber,type:"10",group_id:i,created_at:t});this.$api.accessoryApi.getAccessoryList(s).then((function(t){e.loading=!1,0===t.error&&(e.initImageList(t.list),e.total=t.total,e.defaultChecked())}))},defaultChecked:function(){var e=this;this.selectRows.forEach((function(t,i){var s,a=(0,_createForOfIteratorHelper2.default)(e.list);try{for(a.s();!(s=a.n()).done;){var r=s.value;if(!r.checked&&t===r.id){r.checked=!0,r.index=i;break}}}catch(n){a.e(n)}finally{a.f()}})),this.list=this.list.slice(0),this.getSelectNumber(),this.handleCheckAll()},getImageGroup:function(){var e=this;this.$api.accessoryApi.getImageGroup({type:"10"}).then((function(t){var i=t.error,s=t.list,a=void 0===s?[]:s;0===i&&(a[0].id="all",e.group.list=a||[])}))},initImageList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){e.checked=!1,e.showMore=!1})),this.list=e.slice(0)},resetSelect:function(){this.selectRows=[],this.getSelectNumber(),this.handleCheckAll()},getSelectNumber:function(){var e;null!==(e=this.selectRows)&&void 0!==e&&e.length?this.selectNumber=this.selectRows.length:this.selectNumber=0},editGroups:function(){this.editValue=!0,this.getImageGroup(),this.groupList=this.group.list.filter((function(e){return"all"!=e.id}))},editCancel:function(){this.groupModel.group_id="",this.editValue=!1,this.$refs.form.resetFields()},editOk:function(){var e=this;return new Promise((function(){e.$refs["form"].validate((function(t){t&&e.$api.accessoryApi.changeImageGroup({ids:e.selectRows.join(","),group_id:e.groupModel.group_id}).then((function(t){0===t.error&&(e.$Message.success("操作成功"),e.editCancel(),e.getImageGroup(),e.getImageList(),e.resetSelect())}))}))}))},resetName:function(e){this.editName=!0,this.nameId=e.id,e.showMore=!e.showMore},nameCancel:function(){this.groupModel.name="",this.editName=!1,this.$refs.name.resetFields()},nameOk:function(){var e=this;return new Promise((function(){e.$refs["name"].validate((function(t){t&&e.$api.accessoryApi.changeImageName({id:e.nameId,name:e.groupModel.name}).then((function(t){0===t.error&&(e.$Message.success("操作成功"),e.nameCancel(),e.getImageGroup(),e.getImageList())}))}))}))},seeImage:function(e){e.showMore=!e.showMore,window.open(this.adaption(e.path),"_blank")},clickMore:function(e){e.showMore=!e.showMore},mouseleave:function(e){e.showMore=!e.showMore},changeAllSelected:function(e){var t=this;this.multipleCheck=e,this.indeterminate=!1,this.list.forEach((function(i){i.checked=e,e?t.selectRows.push(i.id):t.selectRows=t.selectRows.filter((function(e){return e!==i.id}))})),this.getSelectNumber()},handleCheckAll:function(){var e=this.list.filter((function(e){return 1==e.checked})).length;this.selectNumber>0?this.page.pageSize==e||this.list.length==e?(this.multipleCheck=!0,this.indeterminate=!1):0==e?(this.multipleCheck=!1,this.indeterminate=!1):(this.multipleCheck=!1,this.indeterminate=!0):(this.multipleCheck=!1,this.indeterminate=!1)}},filters:{formadateTime:function(e){return(0,_helpers.formatDate)(new Date(e),"yyyy-MM-dd")}}};exports.default=_default},5338:function(e,t,i){},"5c41":function(e,t,i){"use strict";var s=i("79d5");i.o(s,"render")&&i.d(t,"render",(function(){return s["render"]})),i.o(s,"staticRenderFns")&&i.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]}))},"6c56":function(e,t,i){},7870:function(e,t,i){"use strict";var s=i("a1f5");i.o(s,"render")&&i.d(t,"render",(function(){return s["render"]})),i.o(s,"staticRenderFns")&&i.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]}))},"78bc":function(e,t,i){"use strict";i.r(t);var s=i("3564"),a=i("0480");for(var r in a)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("a84e"),i("b301");var n=i("2877"),o=Object(n["a"])(a["default"],s["render"],s["staticRenderFns"],!1,null,"2419ce1a",null);t["default"]=o.exports},"79d5":function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,i("b0c0");var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"material"},[t("div",{staticClass:"table-content"},[t("div",{staticClass:"tab"},[t("ul",e._l(e.tabList,(function(i){return t("li",{key:i.id,class:{"tab-active":e.type===i.id},on:{click:function(t){return e.selectTab(i.id)}}},[t("div",{staticClass:"name"},[e._v(e._s(i.name))]),t("div",{staticClass:"line"})])})),0)]),t("div",{staticClass:"table-list"},[10==e.type?t("images"):e._e(),20==e.type?t("videos"):e._e()],1)])])};t.render=s;var a=[];t.staticRenderFns=a},"80f6":function(e,t,i){"use strict";i("f4e0")},"89bf":function(e,t,i){"use strict";i.r(t);var s=i("7870"),a=i("24f0");for(var r in a)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("8afe"),i("80f6");var n=i("2877"),o=Object(n["a"])(a["default"],s["render"],s["staticRenderFns"],!1,null,"4fc17cc7",null);t["default"]=o.exports},"8afe":function(e,t,i){"use strict";i("e26b")},"9e1e":function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,i("ac1f"),i("841c"),i("b0c0");var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"video video-selector-modal"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"image-selector-modal"},[t("div",{staticClass:"video-selector-content"},[t("div",{staticClass:"video-header"},[t("div",{staticClass:"add-video"},[t("Button",{attrs:{type:"primary"},on:{click:e.selectFile}},[e._v("+添加视频 ")]),t("input",{ref:"upload_input",staticStyle:{display:"none"},attrs:{type:"file",accept:e.limitType,multiple:""},on:{change:e.changeFile}}),t("span",{staticClass:"text"},[e._v(e._s(e.hintMaxText))]),t("kdx-hint-tooltip",[e._v(" "+e._s(e.hintTooltipText)+" ")])],1),t("div",{staticClass:"search"},[t("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",confirm:"",format:"yyyy-MM-dd HH:mm",placeholder:"请选择上传时间"},on:{"on-ok":e.handleSearch},model:{value:e.search.createTime,callback:function(t){e.$set(e.search,"createTime",t)},expression:"search.createTime"}})],1)]),t("div",{staticClass:"multiple"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.video.list.length,expression:"video.list.length"}],staticClass:"checkbox flex"},[t("Checkbox",{staticClass:"marginR-10",attrs:{border:"",value:e.multipleCheck,indeterminate:e.indeterminate},on:{"on-change":e.changeAllSelected}},[e._v(" 当页全选 ")]),t("span",{staticStyle:{color:"#B8B9BD"}},[e._v("|")]),t("div",{staticClass:"marginL-10"},[e._v("已选"+e._s(e.selectNumber)+"项")]),t("Button",{staticClass:"marginL-10",attrs:{disabled:!e.selectNumber},on:{click:function(t){return e.deleteVideo("multiple")}}},[e._v("彻底删除")])],1)]),t("div",{staticClass:"video-list"},[e.video.list.length>0?t("ul",e._l(e.video.list,(function(i,s){return t("li",{key:i.id,on:{click:function(t){return t.stopPropagation(),e.checkVideo(s,!i.checked)}}},[t("div",{staticClass:"video-content",class:{"video-content-checked":i.checked}},[t("video",{attrs:{src:e.$media(i.path,"video"),controls:!1}}),i.time?t("div",{staticClass:"video-time"},[e._v(" "+e._s(i.time)+" ")]):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:i.checked,expression:"item.checked"}],staticClass:"video-select-layer"},[t("kdx-svg-icon",{staticClass:"checked",attrs:{type:"icon-chenggong-shixin"}})],1)]),t("p",{staticClass:"text"},[e._v(e._s(i.name))]),t("div",{staticClass:"second flex flex-between"},[t("div",{staticClass:"time"},[e._v(e._s(e._f("formadateTime")(i.created_at)))]),t("div",{staticClass:"action flex",class:{check:i.checked}},[t("Button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.deleteVideo("single",i)}}},[e._v("删除")]),t("span",{staticClass:"line"},[e._v("|")]),t("span",{staticClass:"more",on:{click:function(t){return t.stopPropagation(),e.clickMore(i)}}},[e._v(" 更多 ")]),i.showMore?t("div",{staticClass:"tips",on:{mouseleave:function(t){return e.mouseleave(i)}}},[t("div",{staticClass:"arrow"}),t("div",{staticClass:"tool flex-column"},[t("div",{staticClass:"text",on:{click:function(t){return t.stopPropagation(),e.seeVideo(i)}}},[e._v("查看")]),t("div",{staticClass:"text",on:{click:function(t){return t.stopPropagation(),e.resetName(i)}}},[e._v("重命名")])])]):e._e()],1)])])})),0):t("div",{staticClass:"video-list-none"},[t("div",[e._m(0),t("div",{staticClass:"btn"},[e._v(" 暂无数据， "),t("Button",{attrs:{type:"text"},on:{click:e.selectFile}},[e._v("去添加")])],1)])])]),t("div",{staticClass:"video-page"},[t("kdx-page-component",{ref:"page",attrs:{total:e.total,pageSize:e.page.pageSize,pageSizeOption:e.pageSizeOption},on:{"on-change":e.handlePageChange}})],1)])]),t("kdx-modal-frame",{attrs:{title:"重命名",width:610},on:{"on-cancel":e.nameCancel,"on-ok":e.nameOk},model:{value:e.editName,callback:function(t){e.editName=t},expression:"editName"}},[t("div",{staticClass:"group-modal"},[t("Form",{ref:"name",attrs:{"label-width":120,model:e.groupModel,rules:e.groupRules},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormItem",{attrs:{label:"视频名称：",prop:"name"}},[t("Input",{staticClass:"width-430 limit-input",attrs:{type:"text",maxlength:"20","show-word-limit":"",placeholder:"请输入视频名称"},model:{value:e.groupModel.name,callback:function(t){e.$set(e.groupModel,"name",t)},expression:"groupModel.name"}})],1)],1)],1)])],1)};t.render=s;var a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"icon"},[t("span",{staticClass:"iconfont icon-fenxiao-leijiyongjin-"})])}];t.staticRenderFns=a},a1f5:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,i("b0c0"),i("ac1f"),i("841c");var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"image"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"image-selector-modal"},[t("div",{staticClass:"image-selector-local"},[t("div",{staticClass:"group"},[t("div",{staticClass:"add-group"},[t("Poptip",{attrs:{title:"添加分组"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"image-selector-poptip-content"},[t("Input",{attrs:{placeholder:"请填入分组名称"},on:{"on-enter":e.addGroupOk},model:{value:e.group.name,callback:function(t){e.$set(e.group,"name",t)},expression:"group.name"}}),t("div",{staticClass:"action-btn"},[t("Button",{on:{click:e.addGroupCancel}},[e._v("取消 ")]),t("Button",{attrs:{type:"primary"},on:{click:e.addGroupOk}},[e._v("确定 ")])],1)],1)]},proxy:!0}]),model:{value:e.group.value,callback:function(t){e.$set(e.group,"value",t)},expression:"group.value"}},[t("Button",{staticClass:"default-primary add-group-btn"},[e._v("+添加分组")])],1)],1),t("div",{staticClass:"group-content"},[e.group.list&&e.group.list.length>0?t("ul",[t("li",{staticClass:"all",class:{"group-active":e.isActive==e.group.list[0].id},on:{click:function(t){return e.checkGroup(e.group.list[0].id)}}},[t("div",{staticClass:"group-list"},[t("p",{staticClass:"title"},[e._v(" "+e._s(e.group.list[0].name)+" ")]),t("p",{staticClass:"number"},[e._v(" "+e._s(e.rtotal?e.rtotal:e.group.list[0].total)+" ")])])]),t("li",{staticClass:"all",class:{"group-active":e.isActive==e.group.list[1].id},on:{click:function(t){return e.checkGroup(e.group.list[1].id)}}},[t("div",{staticClass:"group-list"},[t("p",{staticClass:"title"},[e._v(" "+e._s(e.group.list[1].name)+" "),t("span",{staticClass:"system-label"},[e._v("系统")])]),t("p",{staticClass:"number"},[e._v(" "+e._s(e.group.list[1].total)+" ")])])]),t("li",{staticClass:"all",class:{"group-active":e.isActive==e.group.list[2].id},on:{click:function(t){return e.checkGroup(e.group.list[2].id)}}},[t("div",{staticClass:"group-list"},[t("p",{staticClass:"title"},[e._v(" "+e._s(e.group.list[2].name)+" "),t("span",{staticClass:"system-label"},[e._v("系统")])]),t("p",{staticClass:"number"},[e._v(" "+e._s(e.group.list[2].total)+" ")])])]),t("li",{staticClass:"all",class:{"group-active":e.isActive==e.group.list[3].id},on:{click:function(t){return e.checkGroup(e.group.list[3].id)}}},[t("div",{staticClass:"group-list"},[t("p",{staticClass:"title"},[e._v(" "+e._s(e.group.list[3].name)+" "),t("span",{staticClass:"system-label"},[e._v("系统")])]),t("p",{staticClass:"number"},[e._v(" "+e._s(e.group.list[3].total)+" ")])])]),e._l(e.group.list,(function(i,s){return[s>3?t("li",{key:i.id,class:{"group-active":e.isActive==i.id}},[t("Poptip",{attrs:{title:"修改分组",value:e.group.updateId===i.id},on:{"on-popper-hide":e.editGroupCancel},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"image-selector-poptip-content"},[t("Input",{attrs:{placeholder:"请填入分组名称"},on:{"on-enter":e.editGroupOk},model:{value:e.group.updateName,callback:function(t){e.$set(e.group,"updateName",t)},expression:"group.updateName"}}),t("div",{staticClass:"action-btn"},[t("Button",{on:{click:e.editGroupCancel}},[e._v("取消 ")]),t("Button",{attrs:{type:"primary"},on:{click:e.editGroupOk}},[e._v("确定 ")])],1)],1)]},proxy:!0}],null,!0)},[t("div",{staticClass:"group-list group-other",on:{click:function(t){return t.stopPropagation(),e.checkGroup(i.id)}}},[t("p",{staticClass:"title"},[e._v(" "+e._s(i.name)+" ")]),t("p",{staticClass:"number"},[e._v(" "+e._s(i.total)+" ")]),t("p",{staticClass:"btn"},[t("Button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.editGroup(i)}}},[e._v(" 编辑 ")]),e._v(" | "),t("Button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.deleteGroup(i)}}},[e._v(" 删除 ")])],1)])])],1):e._e()]}))],2):e._e()])]),t("div",{staticClass:"image-content"},[t("div",{staticClass:"image-header"},[t("div",{staticClass:"btn"},[t("Button",{attrs:{type:"primary"},on:{click:e.selectFile}},[e._v("+添加图片")]),t("input",{ref:"upload_input",staticStyle:{display:"none"},attrs:{type:"file",accept:e.limitType,multiple:""},on:{change:e.changeFile}}),t("span",{staticClass:"text"},[e._v(e._s(e.hintMaxText))]),t("kdx-hint-tooltip",[e._v(" "+e._s(e.hintTooltipText)+" ")])],1),t("div",{staticClass:"search"},[t("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",confirm:"",format:"yyyy-MM-dd HH:mm",placeholder:"请选择上传时间"},on:{"on-ok":e.handleSearch},model:{value:e.search.createTime,callback:function(t){e.$set(e.search,"createTime",t)},expression:"search.createTime"}})],1)]),t("div",{staticClass:"multiple"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.list&&e.list.length>0,expression:"list && list.length > 0"}],staticClass:"checkbox flex"},[t("Checkbox",{staticClass:"marginR-10",attrs:{border:"",value:e.multipleCheck,indeterminate:e.indeterminate},on:{"on-change":e.changeAllSelected}},[e._v(" 当页全选 ")]),t("span",{staticStyle:{color:"#B8B9BD"}},[e._v("|")]),t("div",{staticClass:"marginL-10"},[e._v("已选"+e._s(e.selectNumber)+"项")]),t("Button",{staticClass:"marginL-10",attrs:{disabled:!e.selectNumber},on:{click:e.editGroups}},[e._v("修改分组")]),t("Button",{staticClass:"marginL-10",attrs:{disabled:!e.selectNumber},on:{click:function(t){return e.deleteImage("multiple")}}},[e._v("彻底删除")])],1)]),t("div",{ref:"scrollBox",staticClass:"image-list"},[e.list&&e.list.length>0?t("ul",e._l(e.list,(function(i,s){return t("li",{key:i.id,on:{click:function(t){return e.checkImage(s,!i.checked)}}},[t("div",{staticClass:"image"},[t("img",{attrs:{src:e.adaption(i.path),alt:""},on:{error:e.replaceImage}}),t("div",{directives:[{name:"show",rawName:"v-show",value:i.checked,expression:"item.checked"}],staticClass:"image-select-layer"},[t("kdx-svg-icon",{staticClass:"checked",attrs:{type:"icon-chenggong-shixin"}})],1)]),t("div",{staticClass:"text"},[t("span",[e._v(e._s(i.name))])]),t("div",{staticClass:"second flex flex-between"},[t("div",{staticClass:"time"},[e._v(e._s(e._f("formadateTime")(i.created_at)))]),t("div",{staticClass:"action flex",class:{check:i.checked}},[t("Button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.deleteImage("single",i)}}},[e._v("删除")]),t("span",{staticClass:"line"},[e._v("|")]),t("span",{staticClass:"more",on:{click:function(t){return t.stopPropagation(),e.clickMore(i)}}},[e._v(" 更多 ")]),i.showMore?t("div",{staticClass:"tips",on:{mouseleave:function(t){return e.mouseleave(i)}}},[t("div",{staticClass:"arrow"}),t("div",{staticClass:"tool flex-column"},[t("div",{staticClass:"text",on:{click:function(t){return t.stopPropagation(),e.seeImage(i)}}},[e._v("查看")]),t("div",{staticClass:"text",on:{click:function(t){return t.stopPropagation(),e.resetName(i)}}},[e._v("重命名")])])]):e._e()],1)])])})),0):t("div",{staticClass:"image-list-none",staticStyle:{"text-align":"center"}},[t("div",[e._m(0),t("div",{staticClass:"btn"},[e._v(" 暂无数据， "),t("Button",{attrs:{type:"text"},on:{click:e.selectFile}},[e._v("去添加")])],1)])])]),t("div",{staticClass:"image-footer"},[t("kdx-page-component",{ref:"page",attrs:{total:e.total,pageSize:e.page.pageSize,pageSizeOption:e.pageSizeOption},on:{"on-change":e.handlePageChange}})],1)])])]),t("kdx-modal-frame",{attrs:{title:"修改分组",width:610},on:{"on-cancel":e.editCancel,"on-ok":e.editOk},model:{value:e.editValue,callback:function(t){e.editValue=t},expression:"editValue"}},[t("div",{staticClass:"group-modal"},[t("Form",{ref:"form",attrs:{"label-width":120,model:e.groupModel,rules:e.groupRules},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormItem",{attrs:{label:"所在分组：",prop:"group_id"}},[t("Select",{staticClass:"width-340",attrs:{placeholder:"请选择分组"},model:{value:e.groupModel.group_id,callback:function(t){e.$set(e.groupModel,"group_id",t)},expression:"groupModel.group_id"}},e._l(e.groupList,(function(i){return t("Option",{key:i.id,attrs:{value:i.id}},[e._v(e._s(i.name))])})),1)],1)],1)],1)]),t("kdx-modal-frame",{attrs:{title:"重命名",width:610},on:{"on-cancel":e.nameCancel,"on-ok":e.nameOk},model:{value:e.editName,callback:function(t){e.editName=t},expression:"editName"}},[t("div",{staticClass:"group-modal"},[t("Form",{ref:"name",attrs:{"label-width":120,model:e.groupModel,rules:e.groupRules},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormItem",{attrs:{label:"图片名称：",prop:"name"}},[t("Input",{staticClass:"width-430 limit-input",attrs:{type:"text",maxlength:"20","show-word-limit":"",placeholder:"请输入图片名称"},model:{value:e.groupModel.name,callback:function(t){e.$set(e.groupModel,"name",t)},expression:"groupModel.name"}})],1)],1)],1)])],1)};t.render=s;var a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"icon"},[t("span",{staticClass:"iconfont icon-fenxiao-leijiyongjin-"})])}];t.staticRenderFns=a},a26b:function(e,t,i){"use strict";i.r(t);var s=i("f573"),a=i.n(s);for(var r in s)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(r);t["default"]=a.a},a84e:function(e,t,i){"use strict";i("b0e4")},a9d2:function(e,t,i){"use strict";i("5338")},b0e4:function(e,t,i){},b301:function(e,t,i){"use strict";i("6c56")},de9e:function(e,t,i){"use strict";i.r(t);var s=i("5c41"),a=i("a26b");for(var r in a)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("a9d2");var n=i("2877"),o=Object(n["a"])(a["default"],s["render"],s["staticRenderFns"],!1,null,"14fdef24",null);t["default"]=o.exports},e26b:function(e,t,i){},f4e0:function(e,t,i){},f573:function(e,t,i){var s=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(i("89bf")),r=s(i("78bc")),n={name:"index",components:{images:a.default,videos:r.default},data:function(){return{value:!0,type:"10",tabList:[{id:"10",name:"图片",funName:"",loading:!1},{id:"20",name:"视频",funName:"",loading:!1}]}},computed:{},created:function(){},methods:{selectTab:function(e){this.type=e}}};t.default=n}}]);