(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[70],{"0071":function(t,e,n){},"0184":function(t,e,n){"use strict";var a=n("e9dc");n.o(a,"render")&&n.d(e,"render",(function(){return a["render"]})),n.o(a,"staticRenderFns")&&n.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"08bb":function(t,e,n){"use strict";var a=n("59ac");n.o(a,"render")&&n.d(e,"render",(function(){return a["render"]})),n.o(a,"staticRenderFns")&&n.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]}))},1005:function(t,e,n){"use strict";n.r(e);var a=n("4ad6"),i=n.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},"148cd":function(t,e,n){t.exports=n.p+"static/dist/shop/img/force-login.png"},"27b2":function(t,e,n){t.exports=n.p+"static/dist/shop/img/login-pass.png"},"280f":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"remind-label"},[e("span",{staticClass:"box"},[t._v(" "+t._s(t.title)+" "),e("span")])])};e.render=n;var a=[];e.staticRenderFns=a},"3fb7":function(t,e,n){"use strict";n.r(e);var a=n("08bb"),i=n("1005");for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("bb72e");var r=n("2877"),o=Object(r["a"])(i["default"],a["render"],a["staticRenderFns"],!1,null,"502b2c72",null);e["default"]=o.exports},"43be":function(t,e,n){"use strict";var a=n("280f");n.o(a,"render")&&n.d(e,"render",(function(){return a["render"]})),n.o(a,"staticRenderFns")&&n.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"45b9":function(t,e,n){t.exports=n.p+"static/dist/shop/img/bind_mobile_btn.png"},"4ad6":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"GuideModal",data:function(){return{value:!1}},methods:{setValue:function(){this.value=!this.value},handleCancel:function(){this.setValue()}}};e.default=n},"54df":function(t,e,n){t.exports=n.p+"static/dist/shop/img/weixin2.png"},"59ac":function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var a=function(){var t=this,e=t._self._c;return e("kdx-modal-frame",{attrs:{title:"开放平台配置引导",width:910,isOk:!1,cancelText:"关闭"},on:{"on-cancel":t.handleCancel},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[e("div",{staticClass:"guide-modal"},[e("p",{staticClass:"title"},[t._v("1. 登录微信开放平台( "),e("a",{attrs:{href:"https://open.weixin.qq.com/",target:"_blank"}},[t._v("open.weixin.qq.com")]),t._v(" )")]),e("p",{staticClass:"title"},[t._v("2. 把公众号和小程序绑定到同一个开放平台帐号下")]),e("p",{staticClass:"text"},[t._v("公众号绑定开放平台：管理中心 - 公众帐号 - 绑定公众号")]),e("div",{staticClass:"image"},[e("img",{attrs:{src:n("efae"),alt:""}})]),e("p",{staticClass:"text"},[t._v("小程序绑定开放平台：管理中心 - 小程序 - 绑定小程序")]),e("div",{staticClass:"image"},[e("img",{attrs:{src:n("54df"),alt:""}})])])])};e.render=a;var i=[];e.staticRenderFns=i},"723a":function(t,e,n){"use strict";n.r(e);var a=n("ade5"),i=n.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},"870e":function(t,e,n){"use strict";n.r(e);var a=n("b50f"),i=n.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},9610:function(t,e,n){"use strict";n("0071")},"9da5":function(t,e,n){t.exports=n.p+"static/dist/shop/img/get-info.png"},a451:function(t,e,n){},aba3:function(t,e,n){},ade5:function(t,e,n){var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("5530"));n("d9e2"),n("4de4"),n("d3b7"),n("b64b"),n("159b"),n("caad"),n("2532");var s=a(n("c6072")),r=a(n("3fb7")),o={name:"index",components:{RemindLabel:s.default,GuideModal:r.default},data:function(){var t=this;return{rules:{channels:[{validator:function(e,n,a){0==n.length&&1==t.model.coerce_auth?a(new Error("请选择一个渠道")):a()}}],scenes:[{validator:function(e,n,a){0==n.length&&2==t.model.bind_method?a(new Error("请选择一个场景")):a()}}]},form:{channels:[],scenes:[]},channelsData:[{key:"wechat",name:"微信公众号"},{key:"h5",name:"手机浏览器H5"},{key:"byte_dance",name:"头条/抖音小程序"}],scenesData:[{key:"add_cart",name:"点击加入购物车"},{key:"buy",name:"点击立即购买"},{key:"share",name:"买家进行分享"},{key:"submit_form",name:"买家提交表单"},{key:"get_coupon",name:"买家领取优惠券"}],model:{bind_method:1,coerce_auth:1,h5_login_method:1}}},computed:{noManagePerm:function(){return!this.$getPermMap("channel.registry.manage")},filterChannel:function(){return this.channelsData},filterScenes:function(){return this.scenesData}},methods:{getData:function(){var t=this;this.$api.settingApi.getRegisterSetting().then((function(e){if(0===e.error){var n=e.data,a=n.bind_method,i=n.h5_login_method,s=n.bind_scene,r=n.coerce_auth,o=n.coerce_auth_channel;t.form.scenes=Object.keys(s).filter((function(t){return 1===+s[t]})),t.form.channels=Object.keys(o).filter((function(t){return 1===+o[t]})),t.model={bind_method:+a,h5_login_method:+i,coerce_auth:+r}}}))},handleSave:function(){var t=this;this.$refs.form.validate((function(e){if(e){var n={},a={};t.channelsData.forEach((function(e){n[e.key]=t.form.channels.includes(e.key)?"1":"0"})),t.scenesData.forEach((function(e){a[e.key]=t.form.scenes.includes(e.key)?"1":"0"})),t.$api.settingApi.setRegisterSetting({data:(0,i.default)((0,i.default)({},t.model),{},{coerce_auth_channel:n,bind_scene:a})}).then((function(e){0===e.error&&(t.$Message.success("绑定设置，设置成功"),t.getData())}))}}))},openGuide:function(){this.$refs["guide_modal"].setValue()},openConfig:function(){window.open("https://open.weixin.qq.com/")},routePage:function(){this.$utils.openNewWindowPage("/notice/buyer/basic")}},mounted:function(){this.getData()}};e.default=o},b50f:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"RemindLabel",props:{title:{type:String}}};e.default=n},bb72e:function(t,e,n){"use strict";n("aba3")},bd1d:function(t,e,n){t.exports=n.p+"static/dist/shop/img/login-code.png"},c39a:function(t,e,n){t.exports=n.p+"static/dist/shop/img/bind_mobile.png"},c6072:function(t,e,n){"use strict";n.r(e);var a=n("43be"),i=n("870e");for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("9610");var r=n("2877"),o=Object(r["a"])(i["default"],a["render"],a["staticRenderFns"],!1,null,"110ea137",null);e["default"]=o.exports},c893:function(t,e,n){"use strict";n.r(e);var a=n("0184"),i=n("723a");for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("f39b");var r=n("2877"),o=Object(r["a"])(i["default"],a["render"],a["staticRenderFns"],!1,null,"1289c7a2",null);e["default"]=o.exports},e9dc:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0,n("b0c0");var a=function(){var t=this,e=t._self._c;return e("kdx-content-bar",{scopedSlots:t._u([{key:"btn",fn:function(){return[e("Button",{staticClass:"primary-long",attrs:{disabled:t.noManagePerm},on:{click:t.handleSave}},[t._v("保存 ")])]},proxy:!0}])},[e("div",{staticClass:"channel-register"},[e("Form",{ref:"form",attrs:{"label-width":180,model:t.form,rules:t.rules}},[e("div",{staticClass:"item-box"},[e("div",{staticClass:"form-title-box"},[e("kdx-form-title",{attrs:{hasMargin:!1}},[t._v("授权登录")]),e("kdx-hint-alert",{staticClass:"hint-tip",attrs:{"show-icon":!1}},[t._v("用户访问商城时，是否需要授权/登录后才可进行流程商城。")]),e("form-item",{attrs:{label:"强制授权登录："}},[e("RadioGroup",{model:{value:t.model.coerce_auth,callback:function(e){t.$set(t.model,"coerce_auth",e)},expression:"model.coerce_auth"}},[e("Radio",{attrs:{label:1}},[t._v("开启")]),e("Radio",{attrs:{label:0}},[t._v("关闭")])],1),e("kdx-hint-text",[t._v("系统默认关闭强制授权登录，当触发加入购物车、立即购买、提交表单、领取优惠券时需要获取用户用户登录信息。 "),e("kdx-hint-tooltip",{attrs:{type:"image",image:n("9da5")}})],1),e("kdx-hint-text",[t._v("开启强制授权登录时，用户访问商城必须授权后才可进行商城浏览及下单操作。 "),e("kdx-hint-tooltip",{attrs:{type:"image",image:n("148cd")}})],1),"1"==t.model.coerce_auth?e("div",{staticClass:"nest-box"},[e("form-item",{staticClass:"channel-item",attrs:{label:"适用渠道：","label-width":120,prop:"channels"}},[e("CheckboxGroup",{model:{value:t.form.channels,callback:function(e){t.$set(t.form,"channels",e)},expression:"form.channels"}},t._l(t.filterChannel,(function(n){return e("Checkbox",{key:n.key,attrs:{label:n.key}},[t._v(t._s(n.name)+" ")])})),1),e("kdx-hint-text",[t._v(" 因微信小程序用户登录规范要求不能强制弹窗要求登录，小程序开启此功能可能会被封号，暂不支持微信小程序。 ")])],1)],1):t._e()],1),e("form-item",{attrs:{label:"手机浏览器H5 登录方式："}},[e("RadioGroup",{model:{value:t.model.h5_login_method,callback:function(e){t.$set(t.model,"h5_login_method",e)},expression:"model.h5_login_method"}},[e("Radio",{attrs:{label:1}},[t._v("短信验证码登录 "),e("kdx-hint-tooltip",{attrs:{type:"image",image:n("bd1d")}}),t._v(" > ")],1),e("Radio",{attrs:{label:0}},[t._v("账号密码登录 "),e("kdx-hint-tooltip",{attrs:{type:"image",image:n("27b2")}}),t._v(" > ")],1)],1),e("kdx-hint-text",[t._v("手机浏览器H5用户登录时默认登录方式")])],1)],1)]),e("div",{staticClass:"item-box"},[e("div",{staticClass:"form-title-box"},[e("kdx-form-title",{attrs:{hasMargin:!1},scopedSlots:t._u([{key:"text",fn:function(){return[t._v(" （适用于全渠道账号统一）使用全网渠道商城，强烈推荐绑定手机号 ")]},proxy:!0}])},[t._v(" 绑定手机号 ")]),e("kdx-hint-alert",{staticStyle:{margin:"10px 0 30px 0"}},[e("p",{staticClass:"register-text"},[t._v("提示：")]),e("p",{staticClass:"register-text"},[t._v(" 买家通过微信授权登录商城后，引导买家绑定手机号，识别买家唯一身份，解决买家在微信（公众号和小程序）等不同渠道账号不同的问题 ")]),e("p",{staticClass:"register-text"},[t._v("需要开启消息通知功能。")]),e("Button",{attrs:{type:"text"},on:{click:t.routePage}},[t._v("【立即开启】 ")])],1)],1),e("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"绑定类型：",prop:"bind_method","label-width":120}},[e("RadioGroup",{staticStyle:{"margin-bottom":"-10px",width:"100%"},model:{value:t.model.bind_method,callback:function(e){t.$set(t.model,"bind_method",e)},expression:"model.bind_method"}},[e("div",{staticClass:"inventory-settings"},[e("Radio",{attrs:{label:2,disabled:t.noManagePerm}},[e("span",[t._v("强制绑定")]),e("remind-label",{attrs:{title:"推荐"}})],1),e("kdx-hint-text",[e("span",[t._v("买家进入商城授权后，必须进行绑定手机号成功后才可访问商城")]),e("kdx-hint-tooltip",{attrs:{type:"image",image:n("c39a")}})],1),e("div",{staticClass:"nest-box"},[e("form-item",{attrs:{label:"","label-width":0,prop:"scenes"}},[e("CheckboxGroup",{model:{value:t.form.scenes,callback:function(e){t.$set(t.form,"scenes",e)},expression:"form.scenes"}},t._l(t.filterScenes,(function(n){return e("Checkbox",{key:n.key,attrs:{label:n.key}},[t._v(t._s(n.name)+" ")])})),1)],1)],1)],1),e("div",{staticClass:"inventory-settings"},[e("Radio",{attrs:{label:1,disabled:t.noManagePerm}},[e("span",[t._v("手动绑定")])]),e("kdx-hint-text",[e("span",[t._v("买家通过授权登录商城后，需要用户在个人中心主动操作绑定手机号")]),e("kdx-hint-tooltip",{attrs:{type:"image",image:n("45b9")}})],1)],1)])],1)],1),e("div",{staticClass:"item-box"},[e("kdx-form-title",{scopedSlots:t._u([{key:"text",fn:function(){return[t._v(" （需配置微信开放平台） ")]},proxy:!0}])},[t._v(" 微信账号体系 ")]),e("div",{staticClass:"title-box"},[e("div",{staticClass:"title"},[e("span",{staticClass:"number"},[t._v("01")]),e("span",[t._v("需要同时开启微信小程序渠道 、开启微信公众号渠道")])]),e("div",{staticClass:"text"},[t._v(" 同时开启时，用户可进行多渠道访问商城。 ")])]),e("div",{staticClass:"title-box"},[e("div",{staticClass:"title"},[e("span",{staticClass:"number"},[t._v("02")]),e("span",[t._v("在微信开放平台进行绑定配置")])]),e("div",{staticClass:"btn"},[e("Button",{attrs:{type:"success"},on:{click:t.openConfig}},[t._v("立即配置 ")]),e("Button",{staticClass:"default-success",on:{click:t.openGuide}},[t._v("配置引导 ")])],1),e("div",{staticClass:"text"},[t._v(" 未配置开放平台前，同一个微信生成的不同会员，配置开放平台后也无法统一账号，只能通过手机号进行绑定。 ")]),e("div",{staticClass:"text"},[t._v(" 注：未配置开发平台前，同一个微信生成一个会员时，配置开放平台后生成另一个会员时会自动执行微信账号统一，识别买家唯一微信身份。 ")])])],1)])],1),e("Guide-modal",{ref:"guide_modal"})],1)};e.render=a;var i=[];e.staticRenderFns=i},efae:function(t,e,n){t.exports=n.p+"static/dist/shop/img/weixin1.png"},f39b:function(t,e,n){"use strict";n("a451")}}]);