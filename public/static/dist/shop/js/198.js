(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[198],{"1ce0":function(e,t,n){var a=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("4e82"),n("b64b"),n("d3b7"),n("159b"),n("498a"),n("ac1f"),n("841c"),n("b0c0");var o=a(n("c7eb")),r=a(n("1da1")),s=a(n("ade3")),c=a(n("5530")),i=n("2f62"),u=n("950b"),d=n("c79a"),l=a(n("f54f")),p={computed:(0,c.default)((0,c.default)((0,c.default)({},(0,i.mapGetters)("decorate",["getModal","getAllModalName","getPageItems"])),(0,i.mapState)("decorate",{pageList:function(e){return e.pageList},topItem:function(e){return e.topItem},currentModal:function(e){return e.currentModal},onlyOne:function(e){return e.onlyOneComponent}})),{},{pageItems:function(){var e=this.getPageItems(this.$route.params.page),t=Object.keys(e).sort((function(e,t){return(0,u.groupInfo)(e).yIndex-(0,u.groupInfo)(t).yIndex})),n={};return t.forEach((function(t){n[(0,u.groupInfo)(t).yIndex]=e[t]})),n}}),watch:{search:{immediate:!0,handler:function(){var e=this;this.search.trim()?function(){var t=e.pageItems,n={},a=function(a){t[a].forEach((function(t,o){(t.type.indexOf(e.search)>-1||t.name.indexOf(e.search)>-1)&&(n[a]?n[a][o]=t:n[a]=(0,s.default)({},o,t))}))};for(var o in t)a(o);e.showComponents=n}():this.showComponents=this.pageItems,this.noResult=Object.keys(this.showComponents).length}},pageItems:{immediate:!0,handler:function(){var e=this.pageItems;this.showComponents=this.pageItems,1==this.onlyOne&&this.clickBtn(e[5][0],"global")}}},data:function(){return{noResult:!1,search:"",showComponents:{},openIndex:["1","2","3","4","5","6"],permsChecker:{}}},created:function(){this.permsChecker=(0,l.default)()},methods:(0,c.default)((0,c.default)({hasItem:function(e,t,n){var a=-1;return e.forEach((function(e,o){e[n]==t[n]&&(a=o)})),a},clickBtn:function(e,t){var n=this;return(0,r.default)((0,o.default)().mark((function a(){var r,s,c,i,l;return(0,o.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=(0,u.getModal)(e.type),!r.istop||!n.topItem.length){a.next=9;break}if(s=n.hasItem(n.topItem,r,"id"),c="",s>-1?c="此元素最多允许添加1个":"followbar"!=r.id&&(1==n.topItem.length&&"followbar"!=n.topItem[0].id||n.topItem.length>1)&&(s=0,c="已有顶部固定元素，请删除后添加"),!c){a.next=9;break}return n.$Message["error"]({background:!0,content:c}),n.changeFocus({item:n.topItem[s],pageId:n.$route.params.page}),a.abrupt("return");case 9:if(e.groupType=t,!r.max){a.next=17;break}if(i=0,n.pageList.forEach((function(e){e.id==r.id&&(i+=1,l=e)})),!(i>=r.max)){a.next=17;break}return n.$Message["error"]({background:!0,content:"此元素最多允许添加".concat(r.max,"个")}),n.changeFocus({item:l,pageId:n.$route.params.page}),a.abrupt("return");case 17:n.addModal({list:e,pageId:n.$route.params.page}).then((function(e){var t=e[0];if(t){var n=!0;"diymenu"==t.id&&(n=!1),(0,d.scrollTo)(t,n)}}));case 18:case"end":return a.stop()}}),a)})))()}},(0,i.mapActions)("decorate",["addModal"])),(0,i.mapMutations)("decorate",["changeFocus"]))};t.default=p},"238d":function(e,t,n){"use strict";n.r(t);var a=n("1ce0"),o=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=o.a},"4dd0":function(e,t,n){},"89d4e":function(e,t,n){"use strict";var a=n("d54b");n.o(a,"render")&&n.d(t,"render",(function(){return a["render"]})),n.o(a,"staticRenderFns")&&n.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"92d1":function(e,t,n){"use strict";n("4dd0")},d54b:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,n("ac1f"),n("841c"),n("b0c0");var a=function(){var e=this,t=e._self._c;return e.onlyOne?e._e():t("div",{staticClass:"oper-panel",staticStyle:{overflow:"auto"}},[t("Input",{staticClass:"oper-panel-search",attrs:{prefix:"md-search",placeholder:"搜索组件名称 模糊搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t("Collapse",{attrs:{simple:""},model:{value:e.openIndex,callback:function(t){e.openIndex=t},expression:"openIndex"}},e._l(e.pageItems,(function(a,o){return t("Panel",{directives:[{name:"show",rawName:"v-show",value:e.showComponents[o],expression:"showComponents[key]"}],key:o,attrs:{name:o,"hide-arrow":""}},[t("i",{staticClass:"ivu-icon icon-full-right iconfont"}),e._v(" "+e._s(a[0].groupName)+" "),t("div",{staticClass:"buttonGroup",attrs:{slot:"content"},slot:"content"},e._l(a,(function(a,r){return t("Button",{directives:[{name:"show",rawName:"v-show",value:e.showComponents[o]&&e.showComponents[o][r]&&!1!==a.show&&!0===e.permsChecker.cachePerms[a.type].showOperBtn,expression:"showComponents[key]&&showComponents[key][index]&&item.show!==false&&permsChecker.cachePerms[item.type].showOperBtn===true"}],key:r,staticClass:"oper-btn",attrs:{type:"primary"},on:{click:function(t){return e.clickBtn(a,o)}}},[a.svg?t("img",{staticClass:"btn-svg",attrs:{src:n("590d")("./".concat(a.svg,".svg")),alt:""}}):t("i",{staticClass:"btn-icon",class:a.icon,style:{color:a.color}}),e._v(" "+e._s(a.name)+" ")])})),1)])})),1),t("p",{directives:[{name:"show",rawName:"v-show",value:!e.noResult,expression:"!noResult"}],staticClass:"no-result"},[t("i",{staticClass:"icon-fenxiao-leijiyongjin- iconfont"}),t("span",[e._v("暂无结果")])])],1)};t.render=a;var o=[];t.staticRenderFns=o},f85f:function(e,t,n){"use strict";n.r(t);var a=n("89d4e"),o=n("238d");for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n("92d1");var s=n("2877"),c=Object(s["a"])(o["default"],a["render"],a["staticRenderFns"],!1,null,"24db67dc",null);t["default"]=c.exports}}]);