(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[135],{"0b1e4":function(t,e,n){"use strict";n("6d4a")},"2b92":function(t,e,n){"use strict";var a=n("f311");n.o(a,"render")&&n.d(e,"render",(function(){return a["render"]})),n.o(a,"staticRenderFns")&&n.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"430f":function(t,e,n){var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("ac1f"),n("841c"),n("14d9");var i=a(n("5530")),r=a(n("4b9c")),s={name:"index",components:{SearchHeader:r.default},data:function(){var t=this;this.$createElement;return{loading:!1,data:[],total:0,columns:[{title:"活动名称",key:"activity_name",minWidth:160},{title:"活动时间",slot:"date",minWidth:200},{title:"停止时间",key:"stop_time",minWidth:170,render:function(e,n){return e("div",[t.getStopTime(n.row)])}},{title:"累计签到人数",key:"sign_person_count",minWidth:120,render:function(e,n){return e("div",[t.signTotalNum(n.row.sign_person_count)])}},{title:"总签到次数",key:"sign_count",minWidth:100,render:function(e,n){return e("div",[t.signTotalNum(n.row.sign_count)])}},{title:"奖励领取情况",slot:"rewards",minWidth:140},{title:"活动状态",slot:"status",minWidth:90},{title:"操作",key:"action",minWidth:140,render:function(e,n){return e("div",{class:"action"},[e("Button",{attrs:{type:"text"},on:{click:function(){t.handleView(n.row.id,"view")}}},["查看"]),e("Button",{attrs:{type:"text",disabled:"1"!=n.row.status&&"0"!=n.row.status||t.noManagePerm},on:{click:function(){t.handleEdit(n.row.id,"edit")}}},["编辑"]),e("Button",{attrs:{type:"text",disabled:t.noManagePerm},on:{click:function(){t.handleView(n.row.id,"copy")}}},["复制"]),e("Button",{attrs:{type:"text",disabled:"1"!=n.row.status||t.noManagePerm},on:{click:function(){t.handleStop(n.row.id)}}},["停止"]),e("Button",{attrs:{type:"text",disabled:t.noManagePerm},on:{click:function(){t.handleDelete(n.row)}}},["删除"])])}}],page:{pageSize:10,pageNumber:1},search:{}}},computed:{noManagePerm:function(){return!this.$getPermMap("creditSign.list.manage")}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0;var e=(0,i.default)((0,i.default)({},this.search),{},{pagesize:this.page.pageSize,page:this.page.pageNumber});this.$api.creditSignApi.creditSignList(e).then((function(e){t.loading=!1,0===e.error&&(t.data=e.list,t.total=e.total)}))},handleSearch:function(t){this.search=(0,i.default)((0,i.default)({},this.search),t),this.refreshTable()},changePage:function(t){this.page=t,this.getList()},handleView:function(t,e){this.$router.push({path:"/creditSign/manage/add",query:{id:t,type:e}})},handleEdit:function(t,e){this.$router.push({path:"/creditSign/manage/add",query:{id:t,type:e}})},handleStop:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确认要停该活动吗？停止后不可重新开启",onOk:function(){e.stopActivity(t)},onCancel:function(){}})},stopActivity:function(t){var e=this;this.$api.creditSignApi.stopActivity({id:t}).then((function(t){0===t.error&&(e.refreshTable(),e.$Message.success("操作成功"))}))},handleDelete:function(t){var e=this;this.$Modal.confirm({title:"确认删除",content:"确定要删除该活动？",onOk:function(){e.deleteActivity(t.id)},onCancel:function(){}})},deleteActivity:function(t){var e=this;this.$api.creditSignApi.deleteActivity({id:t}).then((function(t){0===t.error&&(e.refreshTable(),e.$Message.success("删除成功"))}))},handleActivityData:function(t){this.$router.push({path:"/performanceAward/award/index",query:{title:t}})},refreshTable:function(){this.page={pageSize:10,pageNumber:1},this.$refs["page"].reset(),this.getList()},getTime:function(t){return"0000-00-00 00:00:00"===t?"-":t},getStopTime:function(t){return 0==t.status||1==t.status||"0000-00-00 00:00:00"===t.stop_time?"-":t.stop_time},signTotalNum:function(t){return t||"-"}}};e.default=s},"4b9c":function(t,e,n){"use strict";n.r(e);var a=n("2b92"),i=n("dd3e");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var s=n("2877"),o=Object(s["a"])(i["default"],a["render"],a["staticRenderFns"],!1,null,"fc5e15ca",null);e["default"]=o.exports},"5fe5":function(t,e,n){"use strict";var a=n("f3f3");n.o(a,"render")&&n.d(e,"render",(function(){return a["render"]})),n.o(a,"staticRenderFns")&&n.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"6d4a":function(t,e,n){},"7a26":function(t,e,n){"use strict";n.r(e);var a=n("430f"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},b638:function(t,e,n){var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("5530"));n("14d9");var r={data:function(){return{model:{title:"",status:"all",start_time:"",end_time:""},date:[],statusList:[{value:"all",label:"全部"},{value:"1",label:"进行中"},{value:"0",label:"未开始"},{value:"-1",label:"停止"},{value:"-2",label:"手动停止"}],level:[{id:"all",name:"全部"}]}},computed:{noManagePerm:function(){return!this.$getPermMap("creditSign.list.manage")}},created:function(){},methods:{addActivity:function(){this.$router.push({path:"/creditSign/manage/add",query:{type:"add"}})},changeDate:function(t){this.model.start_time=t[0],this.model.end_time=t[1]},handleSearch:function(){var t=(0,i.default)((0,i.default)({},this.model),{},{status:"all"===this.model.status?"":this.model.status});this.$emit("on-search",t)},handleReset:function(){this.reset(),this.handleSearch()},reset:function(){this.model={activity_name:"",status:"all",start_time:"",end_time:""},this.date=[]}}};e.default=r},d777:function(t,e,n){"use strict";n.r(e);var a=n("5fe5"),i=n("7a26");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("0b1e4");var s=n("2877"),o=Object(s["a"])(i["default"],a["render"],a["staticRenderFns"],!1,null,"f1075c80",null);e["default"]=o.exports},dd3e:function(t,e,n){"use strict";n.r(e);var a=n("b638"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},f311:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var n=function(){var t=this,e=t._self._c;return e("kdx-header-bar",{scopedSlots:t._u([{key:"header",fn:function(){return[e("Button",{attrs:{type:"primary",disabled:t.noManagePerm},on:{click:t.addActivity}},[t._v("+添加活动")])]},proxy:!0}])},[e("Form",{ref:"form",attrs:{model:t.model,"label-width":100,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[e("FormItem",{attrs:{label:"活动名称："}},[e("i-input",{staticClass:"width-340",attrs:{type:"text",placeholder:"活动名称"},on:{"on-enter":t.handleSearch},model:{value:t.model.activity_name,callback:function(e){t.$set(t.model,"activity_name",e)},expression:"model.activity_name"}})],1),e("FormItem",{attrs:{label:"活动状态："}},[e("Select",{staticClass:"width-160",model:{value:t.model.status,callback:function(e){t.$set(t.model,"status",e)},expression:"model.status"}},t._l(t.statusList,(function(n){return e("Option",{key:n.value,attrs:{value:n.value}},[t._v(" "+t._s(n.label)+" ")])})),1)],1),e("FormItem",{attrs:{label:"活动时间："}},[e("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"活动时间",editable:!1},on:{"on-change":t.changeDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),e("div",{staticClass:"ivu-form-item-btn"},[e("Button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),e("Button",{attrs:{type:"text"},on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1)};e.render=n;var a=[];e.staticRenderFns=a},f3f3:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"spell-group-list"},[e("search-header",{ref:"search_header",on:{"on-search":t.handleSearch}}),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-list"},[e("Table",{ref:"table",attrs:{columns:t.columns,data:t.data},scopedSlots:t._u([{key:"date",fn:function(n){var a=n.row;return[e("div",{staticClass:"time"},[t._v("起："+t._s(t.getTime(a.start_time)))]),e("div",{staticClass:"time"},[t._v("止："+t._s(t.getTime(a.end_time)))])]}},{key:"status",fn:function(n){var a=n.row;return[1==a.status?e("kdx-status-text",{attrs:{type:"success"}},[t._v("进行中")]):t._e(),-1==a.status?e("kdx-status-text",{attrs:{type:"danger"}},[t._v("已停止")]):t._e(),-2==a.status?e("kdx-status-text",{attrs:{type:"danger"}},[t._v("手动停止")]):t._e(),-3==a.status?e("kdx-status-text",{attrs:{type:"danger"}},[t._v("已失效")]):t._e(),0==a.status?e("kdx-status-text",{attrs:{type:"warning"}},[t._v("未开始")]):t._e()]}},{key:"rewards",fn:function(n){var a=n.row;return["0"!=a.status?e("div",[t._v("积分："+t._s(a.credit_num>0?"".concat(a.credit_num,"个"):"-"))]):t._e(),"0"!=a.status?e("div",[t._v("优惠券："+t._s(a.coupon_num>0?"".concat(a.coupon_num,"张"):"-"))]):e("div",[t._v("-")]),e("div")]}}])}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.data.length>0,expression:"data.length > 0"}],staticClass:"footer-page"},[e("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.changePage}})],1)],1)],1)};e.render=n;var a=[];e.staticRenderFns=a}}]);