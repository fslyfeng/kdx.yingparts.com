(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"00ee":function(e,t,s){var r=s("b622"),i=r("toStringTag"),n={};n[i]="z",e.exports="[object z]"===String(n)},"2ba4":function(e,t,s){var r=s("40d5"),i=Function.prototype,n=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(n):function(){return a.apply(n,arguments)})},"3bbe":function(e,t,s){var r=s("1626"),i=String,n=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw n("Can't set "+i(e)+" as a prototype")}},"4daf":function(e,t,s){},"577e":function(e,t,s){var r=s("f5df"),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},"6d2b":function(e,t,s){"use strict";s("4daf")},7156:function(e,t,s){var r=s("1626"),i=s("861d"),n=s("d2bb");e.exports=function(e,t,s){var a,o;return n&&r(a=t.constructor)&&a!==s&&i(o=a.prototype)&&o!==s.prototype&&n(e,o),e}},"942d":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"address-box"},[t("div",{staticClass:"address-title"},[e._v(" 地址管理 ")]),t("ul",{staticClass:"address-lsit"},[e._l(e.addressList,(function(s,r){return t("li",{key:r},[t("div",{staticClass:"name line1"},[e._v(e._s(s.name))]),t("div",{staticClass:"phone"},[e._v(e._s(s.mobile))]),t("div",{staticClass:"text line4"},[e._v(e._s(s.province)+e._s(s.city)+e._s(s.area)+e._s(s.address))]),t("div",{staticClass:"edit-box"},["1"!=s.is_default?t("span",{on:{click:function(t){return e.editAddressDefault(s)}}},[e._v("设为默认地址")]):e._e(),t("span",{on:{click:function(t){return e.editAddress(s)}}},[e._v("修改")]),t("span",{on:{click:function(t){return e.deleteAddress(s)}}},[e._v("删除")])]),"1"==s.is_default?t("div",{staticClass:"default"},[e._v("默认")]):e._e()])})),t("li",{staticClass:"address-add flex",on:{click:e.editAddress}},[t("div",[e._v(" 添加新地址 ")])])],2),t("Modal",{attrs:{title:e.addTitle,loading:!0,width:"700","footer-hide":"","class-name":"diy-modal"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[e.modalShow1?t("div",{staticClass:"add-box"},[t("Form",{ref:"form",attrs:{model:e.model,rules:e.rules,inline:""}},[t("div",{staticClass:"flex",staticStyle:{"justify-content":"space-between"}},[t("FormItem",{staticStyle:{width:"320px"},attrs:{prop:"name"}},[t("Input",{staticClass:"width-430",attrs:{placeholder:"姓名"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),t("FormItem",{staticStyle:{width:"320px"},attrs:{prop:"mobile"}},[t("Input",{staticClass:"width-430",attrs:{placeholder:"手机号"},model:{value:e.model.mobile,callback:function(t){e.$set(e.model,"mobile",t)},expression:"model.mobile"}})],1)],1),t("FormItem",{staticStyle:{width:"660px"},attrs:{prop:"selectedAddress"}},[t("Cascader",{staticClass:"width-330",attrs:{placeholder:"请选择省/市/区",data:e.addressData},model:{value:e.model.selectedAddress,callback:function(t){e.$set(e.model,"selectedAddress",t)},expression:"model.selectedAddress"}})],1),t("FormItem",{staticStyle:{width:"660px"},attrs:{prop:"detail"}},[t("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入详细地址"},model:{value:e.model.detail,callback:function(t){e.$set(e.model,"detail",t)},expression:"model.detail"}})],1),t("Checkbox",{model:{value:e.model.single,callback:function(t){e.$set(e.model,"single",t)},expression:"model.single"}},[e._v("设为默认")])],1),t("div",{staticClass:"form-footer"},[t("Button",{on:{click:e.cancel}},[e._v("取消")]),t("Button",{attrs:{type:"error"},on:{click:e.ok}},[e._v("确认")])],1)],1):e._e()])],1)},i=[],n=(s("d9e2"),s("fab2")),a=s("2f62"),o=s("b26e");let d={id:"",name:"",mobile:"",selectedAddress:[],detail:"",single:!1};var c={name:"address",data(){const e=(e,t,s)=>{""===t?s(new Error("请输入手机号")):/^1[3456789]\d{9}$/.test(t)?s():s(new Error("请输入正确的手机号!"))};return{modalShow:!1,modalShow1:!1,addTitle:"新增地址",addressData:[],addressList:[],model:{id:"",name:"",mobile:"",selectedAddress:[],detail:"",single:!1},location:"",rules:{name:[{required:!0,message:"请输入收件人姓名"}],mobile:[{validator:e,required:!0,trigger:"blur"}],selectedAddress:[{required:!0,message:"所属区域必选"}],detail:[{required:!0,message:"详细地址必填"}]}}},created(){this.getUserAddressList(),this.initForm(),this.getAddress()},methods:{...Object(a["b"])("common",["setAddress"]),deleteAddress(e){n["a"].deleteAddress({id:e.id},{hideSuccessTip:!0,success:e=>{0==e.error&&(this.$Message.success("删除成功"),this.getUserAddressList())}})},getUserAddressList(){n["a"].getAddress({pageSize:99},{hideSuccessTip:!0,success:e=>{0==e.error&&(this.addressList=e.list.list)}})},ok(){this.$refs["form"].validate(e=>{if(e){let e=this.dataMap("add",this.model),t="createAddress";"编辑收货地址"==this.addTitle&&(t="saveAddress"),n["a"][t](e,{hideSuccessTip:!0,success:e=>{this.modalShow=!1,this.initForm(),0==e.error&&(this.$Message.success("保存成功"),this.getUserAddressList())}})}})},cancel(){this.modalShow=!1,this.$nextTick(()=>{this.initForm()})},initForm(){this.model=JSON.parse(JSON.stringify(d)),setTimeout(()=>{this.modalShow1=!1},200)},editAddress(e){e.id?this.addTitle="编辑收货地址":this.addTitle="新增收货地址",this.modalShow1=!0,this.modalShow=!0;let t=this.dataMap("edit",e);this.model=t},editAddressDefault(e){let t=JSON.parse(JSON.stringify(e));t.is_default=1,n["a"].saveAddress(t,{hideSuccessTip:!0,success:e=>{0==e.error&&(this.$Message.success("修改成功"),this.getUserAddressList())}})},dataMap(e="edit",t){return"edit"==e?{name:t.name,mobile:t.mobile,selectedAddress:[t.province,t.city,t.area],detail:t.address,single:"1"==t.is_default,id:t.id||""}:"add"==e?{address:t.detail,area:t.selectedAddress[2],city:t.selectedAddress[1],id:t.id||"",is_default:t.single?"1":"0",mobile:t.mobile,name:t.name,province:t.selectedAddress[0]}:void 0},getAddress(){o["a"].getAddress({hideSuccessTip:!0,success:e=>{0==e.error&&(this.formatAddress(e.list),this.addressData=e.list,this.$store.commit("common/setAddress",this.addressList))}})},formatAddress(e){e.forEach(e=>{e.id=e.code_id,e.value=e.name,e.label=e.name,e.children=e.child||[],delete e.child,e.children.length>0&&(Object.assign(e,{expand:!1,expand_left:!1,expand_right:!1,add:!1,all_add:!1,show:!0}),this.formatAddress(e.children))})}}},l=c,u=(s("6d2b"),s("2877")),f=Object(u["a"])(l,r,i,!1,null,"5c49bfe7",null);t["default"]=f.exports},ab36:function(e,t,s){var r=s("861d"),i=s("9112");e.exports=function(e,t){r(t)&&"cause"in t&&i(e,"cause",t.cause)}},aeb0:function(e,t,s){var r=s("9bf2").f;e.exports=function(e,t,s){s in e||r(e,s,{configurable:!0,get:function(){return t[s]},set:function(e){t[s]=e}})}},b980:function(e,t,s){var r=s("d039"),i=s("5c6c");e.exports=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)}))},c770:function(e,t,s){var r=s("e330"),i=Error,n=r("".replace),a=function(e){return String(i(e).stack)}("zxcasd"),o=/\n\s*at [^:]*:[^\n]*/,d=o.test(a);e.exports=function(e,t){if(d&&"string"==typeof e&&!i.prepareStackTrace)while(t--)e=n(e,o,"");return e}},d2bb:function(e,t,s){var r=s("e330"),i=s("825a"),n=s("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,s={};try{e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(s,[]),t=s instanceof Array}catch(a){}return function(s,r){return i(s),n(r),t?e(s,r):s.__proto__=r,s}}():void 0)},d9e2:function(e,t,s){var r=s("23e7"),i=s("da84"),n=s("2ba4"),a=s("e5cb"),o="WebAssembly",d=i[o],c=7!==Error("e",{cause:7}).cause,l=function(e,t){var s={};s[e]=a(e,t,c),r({global:!0,constructor:!0,arity:1,forced:c},s)},u=function(e,t){if(d&&d[e]){var s={};s[e]=a(o+"."+e,t,c),r({target:o,stat:!0,constructor:!0,arity:1,forced:c},s)}};l("Error",(function(e){return function(t){return n(e,this,arguments)}})),l("EvalError",(function(e){return function(t){return n(e,this,arguments)}})),l("RangeError",(function(e){return function(t){return n(e,this,arguments)}})),l("ReferenceError",(function(e){return function(t){return n(e,this,arguments)}})),l("SyntaxError",(function(e){return function(t){return n(e,this,arguments)}})),l("TypeError",(function(e){return function(t){return n(e,this,arguments)}})),l("URIError",(function(e){return function(t){return n(e,this,arguments)}})),u("CompileError",(function(e){return function(t){return n(e,this,arguments)}})),u("LinkError",(function(e){return function(t){return n(e,this,arguments)}})),u("RuntimeError",(function(e){return function(t){return n(e,this,arguments)}}))},e391:function(e,t,s){var r=s("577e");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},e5cb:function(e,t,s){"use strict";var r=s("d066"),i=s("1a2d"),n=s("9112"),a=s("3a9b"),o=s("d2bb"),d=s("e893"),c=s("aeb0"),l=s("7156"),u=s("e391"),f=s("ab36"),p=s("c770"),m=s("b980"),h=s("83ab"),b=s("c430");e.exports=function(e,t,s,v){var g="stackTraceLimit",y=v?2:1,_=e.split("."),A=_[_.length-1],x=r.apply(null,_);if(x){var S=x.prototype;if(!b&&i(S,"cause")&&delete S.cause,!s)return x;var w=r("Error"),k=t((function(e,t){var s=u(v?t:e,void 0),r=v?new x(e):new x;return void 0!==s&&n(r,"message",s),m&&n(r,"stack",p(r.stack,2)),this&&a(S,this)&&l(r,this,k),arguments.length>y&&f(r,arguments[y]),r}));if(k.prototype=S,"Error"!==A?o?o(k,w):d(k,w,{name:!0}):h&&g in x&&(c(k,x,g),c(k,x,"prepareStackTrace")),d(k,x),!b)try{S.name!==A&&n(S,"name",A),S.constructor=k}catch(E){}return k}}},f5df:function(e,t,s){var r=s("00ee"),i=s("1626"),n=s("c6b6"),a=s("b622"),o=a("toStringTag"),d=Object,c="Arguments"==n(function(){return arguments}()),l=function(e,t){try{return e[t]}catch(s){}};e.exports=r?n:function(e){var t,s,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(s=l(t=d(e),o))?s:c?n(t):"Object"==(r=n(t))&&i(t.callee)?"Arguments":r}}}]);