(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{"3a10":function(e,t,s){"use strict";var i=s("4020");const a={getComment:(e,t)=>i["a"].get("/order/comment/list",e,t),confirm:(e,t)=>i["a"].post("/order/create/confirm",e,t),create:(e,t)=>i["a"].post("/order/create/index",e,t),allOrderList:(e,t)=>i["a"].get("/order/list/all",e,t),payOrderList:(e,t)=>i["a"].get("/order/list/pay",e,t),sendOrderList:(e,t)=>i["a"].get("/order/list/send",e,t),pickOrderList:(e,t)=>i["a"].get("/order/list/pick",e,t),finishOrderList:(e,t)=>i["a"].get("/order/list/finish",e,t),refundOrderList:(e,t)=>i["a"].get("/order/refund/list",e,t),orderDetail:(e,t)=>i["a"].get("/order/detail/index",e,t),orderPayList:(e,t)=>i["a"].get("/pay/index",e,t),orderPay:(e,t)=>i["a"].post("/pay/index/pay",e,t),orderPayCheck:(e,t)=>i["a"].post("/pay/index/check",e,t),orderGetTotal:e=>i["a"].post("/order/list/get-total",{},e),orderCancel:(e,t)=>i["a"].post("/order/op/cancel",e,t),orderDelete:(e,t)=>i["a"].post("/order/op/delete",e,t),orderFinish:(e,t)=>i["a"].post("/order/op/finish",e,t),getExpress:(e,t)=>i["a"].get("/order/detail/get-express",e,t),orderRefund:(e,t)=>i["a"].get("/order/refund",e,t),refundSubmit:(e,t)=>i["a"].post("/order/refund/submit",e,t),refundDetail:(e,t)=>i["a"].get("/order/refund/detail",e,t),refundCancel:(e,t)=>i["a"].get("/order/refund/cancel",e,t),getCommentList:(e,t)=>i["a"].get("/order/comment/wait-list",e,t),getCommentGoods:(e,t)=>i["a"].get("/order/comment/write-comment",e,t),submitComment:(e,t)=>i["a"].post("/order/comment/write-comment",e,t)};t["a"]=a},"4aa7":function(e,t,s){},8231:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("Container",[t("div",{staticClass:"breadcrumd-css"},[t("Breadcrumbs",{attrs:{list:e.list}})],1),t("div",{staticStyle:{background:"#ffffff"}},[t("div",{staticClass:"goods-info"},[t("ul",{staticClass:"goods"},[t("li",{staticClass:"flex title"},[t("div",[e._v("商品信息")]),t("div",[e._v("购买件数")]),t("div",[e._v("实付款")])]),t("div",{staticClass:"goosItem"},[t("li",{staticClass:"flex"},[t("div",{staticClass:"flex",staticStyle:{"justify-content":"flex-start"}},[t("div",{staticClass:"goods-img"},[t("img",{attrs:{src:e.$utils.mediaUrl(e.goods_info.thumb)}})]),t("div",{staticClass:"goods-msg",staticStyle:{"text-align":"left"}},[t("p",{staticClass:"line2"},[e._v(e._s(e.goods_info.title))]),t("p",{staticClass:"info"},[e._v(" "+e._s(e.goods_info.option_title||"默认"))])])]),t("div",{staticClass:"goods-msg"},[t("span",{staticClass:"cart-num"},[e._v(e._s(e.goods_info.total))])]),t("div",[e._v("￥"+e._s(e.goods_info.price))])])])])])]),t("div",{staticClass:"refund-box"},[t("div",{staticClass:"box"},[t("div",{staticClass:"box-item flex"},[t("div",{staticClass:"box-title"},[e._v("评分")]),t("div",{staticClass:"rate"},[t("Rate",{model:{value:e.valueCustomText,callback:function(t){e.valueCustomText=t},expression:"valueCustomText"}},[t("span",{staticStyle:{color:"#f5a623"}},[e._v(e._s(e.valueCustomText))])])],1)]),t("div",{staticClass:"box-item flex"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.refundRemark,expression:"refundRemark"}],staticClass:"textarea",attrs:{placeholder:"宝贝满足你的期待吗？快来评论",maxlength:"100"},domProps:{value:e.refundRemark},on:{input:function(t){t.target.composing||(e.refundRemark=t.target.value)}}})]),t("div",{staticClass:"box-item flex",staticStyle:{"margin-top":"20px"}},[t("div",{staticClass:"box-title"},[e._v("快来晒图")]),t("div",{staticClass:"flex",staticStyle:{"margin-left":"30px"}},e._l(e.uploadList,(function(s,i){return t("div",{key:i,staticClass:"demo-upload-list",staticStyle:{width:"86px",height:"86px"}},["finished"===s.status?[t("div",{staticStyle:{width:"86px",height:"86px"}},[t("img",{staticStyle:{width:"86px",height:"auto",display:"block"},attrs:{src:e.$utils.mediaUrl(s.response.path)}})]),t("div",{staticClass:"demo-upload-list-cover"},[t("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(t){return e.handleView(s.response.path)}}}),t("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){return e.handleRemove(s)}}})],1)]:[s.showProgress?t("Progress",{attrs:{percent:s.percentage,"hide-info":""}}):e._e()]],2)})),0),e.defaultList.length<4?t("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"86px"},attrs:{"show-upload-list":!1,"default-file-list":e.defaultList,"on-success":e.handleSuccess,format:["jpg","jpeg","png"],"max-size":5120,data:{type:10},"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,headers:e.headers,multiple:"",type:"drag",action:e.action}},[t("div",{staticStyle:{width:"86px",height:"86px","line-height":"86px"}},[t("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]):e._e()],1)])]),t("div",{staticClass:"flex",staticStyle:{"justify-content":"flex-end","background-color":"#ffffff",padding:"20px"}},[t("Button",{attrs:{size:"large",type:"error"},on:{click:e.submit}},[e._v("发布评价")])],1),t("Modal",{attrs:{title:"预览"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?t("img",{staticStyle:{width:"100%"},attrs:{src:e.$utils.mediaUrl(e.imgName)}}):e._e()])],1)},a=[],r=s("3a10"),o={name:"refund",data(){return{list:[{name:"首页",path:"/"},{name:"我的订单",path:"/member/order"},{name:"商品评价"}],refundRemark:"",goods_info:[],refund_info:"",refund_price:{},refund_type:{},defaultList:[],imgName:"",visible:!1,refundImgList:[],uploadList:[],valueCustomText:0}},created(){this.getCommentData()},methods:{submit(){if(0===this.valueCustomText)return void this.$Message.error("请选择评价等级");if(""==this.refundRemark||this.refundRemark.length<=0)return void this.$Message.error("请填写商品评价");let e=[];this.uploadList.forEach(t=>{e.push(t.response.path)}),r["a"].submitComment({order_goods_id:this.$route.query.id,level:this.valueCustomText,content:""==this.refundRemark||this.refundRemark.length<=0?"此用户没有填写评价":this.refundRemark,images:e},{hideSuccessTip:!0,success:e=>{0==e.error&&(this.$Message.success("评价成功"),this.$route.query.back?setTimeout(()=>{this.$router.go(-2)},1200):setTimeout(()=>{this.$router.go(-1)},1200))}})},getCommentData(){this.$route.query.id&&r["a"].getCommentGoods({order_goods_id:this.$route.query.id},{hideSuccessTip:!0,success:e=>{0==e.error&&(this.goods_info=e.goods)}})},handleView(e){this.imgName=e,this.visible=!0},handleRemove(e){const t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1)},handleSuccess(e,t,s){console.log(e,t),-1==e.error&&(this.$Message.error(e.message),this.uploadList.length--),0===e.error&&console.log(s,"上传后")},handleFormatError(e){this.$Message.warning("格式错误:请检查文件"+e.name+" 是否是jpg、jpeg、png格式")},handleMaxSize(e){this.$Message.warning("文件超出指定大小:"+e.name+"最大不超过5M.")},handleBeforeUpload(e){console.log(e);const t=this.uploadList.length<3;return t||this.$Message.warning("最多可以上传3张图片"),t}},computed:{action(){let e="/h5/api/utility/attachment/upload";return e},headers(){let e=JSON.parse(localStorage.getItem("userSessionId")),t={"Session-Id":e.session_id,"Client-Type":70};return t}},mounted(){this.uploadList=this.$refs.upload.fileList}},d=o,l=(s("d42f"),s("2877")),n=Object(l["a"])(d,i,a,!1,null,"0716ae69",null);t["default"]=n.exports},d42f:function(e,t,s){"use strict";s("4aa7")}}]);