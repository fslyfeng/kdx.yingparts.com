(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[88],{"155e":function(t,e,o){"use strict";o.r(e);var n=o("8ffe"),i=o("e00a");for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("2716");var s,r=o("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"13d8bf66",null,!1,n["a"],s);e["default"]=c.exports},"1d24":function(t,e,o){"use strict";var n;o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("wx-open-subscribe",{staticStyle:{position:"absolute",width:"100%",height:"100%",opacity:"0","z-index":"100"},style:t.subStyle,attrs:{id:"wechatSubscribe",template:t.templates.join(",")},on:{success:function(e){arguments[0]=e=t.$handleEvent(e),t.wechatSubscribeSuccess.apply(void 0,arguments)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.wechatSubscribeError.apply(void 0,arguments)}}},[o("script",{attrs:{type:"text/wxtag-template"}},[t._v('<style scoped>\n            .subscribe-btn {\n                width: 100%;\n                display: block;\n                height: 42px;\n                border-radius: 24px\n            }\n        </style>\n        <button class="subscribe-btn" ></button>')])])},a=[]},2716:function(t,e,o){"use strict";var n=o("e161"),i=o.n(n);i.a},"39ec":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={props:{templates:{type:Array,default:function(){return[]}},radius:{type:String,default:"24px"},width:{type:String,default:"100%"},height:{type:String,default:"100%"},top:{type:String,default:"0"},left:{type:String,default:"0"},subStyle:{type:String,default:""}},methods:{wechatSubscribeSuccess:function(){this.$emit("success")},wechatSubscribeError:function(){this.$emit("error")}}};e.default=o},"3b4a":function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 开店星新零售管理系统\r\n * @description 基于Yii2+Vue2.0+uniapp研发，H5+小程序+公众号全渠道覆盖，功能完善开箱即用，框架成熟易扩展二开\r\n * @author 青岛开店星信息技术有限公司\r\n * @link https://www.kaidianxing.com\r\n * @copyright Copyright (c) 2020-2022 Qingdao ShopStar Information Technology Co., Ltd.\r\n * @copyright 版权归青岛开店星信息技术有限公司所有\r\n * @warning Unauthorized deletion of copyright information is prohibited.\r\n * @warning 未经许可禁止私自删除版权信息\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */[data-v-13d8bf66] uni-video{width:100%}.content[data-v-13d8bf66]{padding:%?48?% %?24?% %?32?%;position:relative;background-color:#fff;min-height:100vh}.content img.bg[data-v-13d8bf66]{position:absolute;width:100%;top:0;left:0}.content .content-info[data-v-13d8bf66]{background-color:#fff;border-radius:%?12?%;box-shadow:0 0 10px rgba(0,0,0,.25);position:relative;min-height:calc(100vh - %?80?%)}.content .content-info .top[data-v-13d8bf66]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding-top:%?32?%;padding-left:%?24?%;padding-right:%?24?%;padding-bottom:%?48?%;border-bottom:%?4?% dashed #e6e7eb;position:relative}.content .content-info .top .price[data-v-13d8bf66]{font-size:%?100?%;line-height:%?140?%;font-weight:700;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .content-info .top .price span[data-v-13d8bf66]{font-size:%?32?%;line-height:1}.content .content-info .top .name[data-v-13d8bf66]{font-weight:700;font-size:%?40?%;line-height:%?56?%;color:#212121;margin-top:%?16?%}.content .content-info .top .desc[data-v-13d8bf66]{font-size:%?32?%;line-height:%?44?%;color:#212121;margin-top:%?8?%;margin-bottom:%?8?%}.content .content-info .top .time[data-v-13d8bf66]{font-size:%?24?%;line-height:%?34?%;color:#969696}.content .content-info .top .btn[data-v-13d8bf66]{margin-top:%?32?%;font-size:%?28?%;line-height:%?40?%;color:#fff;background:#ff3c29;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;height:%?80?%;border-radius:%?40?%;width:100%}.content .content-info .top .dotList[data-v-13d8bf66]{position:absolute;bottom:%?-18?%;left:0;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .content-info .top .dotList .dot[data-v-13d8bf66]{width:%?32?%;height:%?32?%;border-radius:50%;background-color:#fff}.content .content-info .top .dotList .dot[data-v-13d8bf66]:nth-child(1){-webkit-transform:translateX(%?-16?%);transform:translateX(%?-16?%);box-shadow:-5px 0 10px rgba(0,0,0,.1) inset}.content .content-info .top .dotList .dot[data-v-13d8bf66]:nth-child(2){-webkit-transform:translateX(%?16?%);transform:translateX(%?16?%);box-shadow:5px 0 10px rgba(0,0,0,.1) inset}.content .content-info .bottom[data-v-13d8bf66]{padding-left:%?24?%;padding-right:%?24?%;padding-bottom:%?32?%}.content .content-info .bottom .bottom-box .bottom-box-title[data-v-13d8bf66]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding-top:%?48?%;padding-bottom:%?32?%}.content .content-info .bottom .bottom-box .bottom-box-title .dot[data-v-13d8bf66]{width:%?12?%;height:%?12?%;border-radius:50%;margin-right:%?24?%;background:#ff3c29}.content .content-info .bottom .bottom-box .bottom-box-title .text[data-v-13d8bf66]{font-weight:700;font-size:%?32?%;line-height:%?44?%;color:#212121}.content .content-info .bottom .bottom-box .bottom-box-title .text span[data-v-13d8bf66]{font-size:%?24?%;font-weight:400}.content .content-info .bottom .bottom-box .money-integral[data-v-13d8bf66]{padding-left:%?36?%;font-size:%?24?%;line-height:%?34?%;color:#212121}.content .content-info .bottom .bottom-box .money-integral li[data-v-13d8bf66]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-bottom:%?16?%}.content .content-info .bottom .bottom-box .money-integral li .left[data-v-13d8bf66]{font-weight:700;width:%?160?%;text-align:right;-webkit-flex-shrink:0;flex-shrink:0}.content .content-info .bottom .bottom-box .money-integral li .right[data-v-13d8bf66]{color:#ff3c29}.content .content-info .bottom .bottom-box .money-integral li[data-v-13d8bf66]:last-child{margin-bottom:0}.content .content-info .bottom .bottom-box .receive-restrictions[data-v-13d8bf66]{padding-left:%?36?%;font-size:%?24?%;line-height:%?34?%;color:#212121}.content .content-info .bottom .bottom-box .receive-restrictions li[data-v-13d8bf66]{display:-webkit-box;display:-webkit-flex;display:flex;margin-bottom:%?16?%}.content .content-info .bottom .bottom-box .receive-restrictions li[data-v-13d8bf66]:last-child{margin-bottom:0}.content .content-info .bottom .bottom-box .receive-restrictions li .left[data-v-13d8bf66]{font-weight:700;width:%?160?%;text-align:right;-webkit-flex-shrink:0;flex-shrink:0;white-space:nowrap}.content .content-info .bottom .bottom-box .use-restrictions[data-v-13d8bf66]{padding-left:%?36?%;font-size:%?24?%;line-height:%?34?%;color:#212121;display:-webkit-box;display:-webkit-flex;display:flex}.content .content-info .bottom .bottom-box .use-restrictions li[data-v-13d8bf66]{width:%?180?%;margin-right:%?16?%}.content .content-info .bottom .bottom-box .use-restrictions li .img[data-v-13d8bf66]{width:%?180?%;height:%?180?%;border-radius:%?12?%;margin-bottom:%?16?%;overflow:hidden;position:relative;background-repeat:no-repeat;background-size:contain}.content .content-info .bottom .bottom-box .use-restrictions li .img img[data-v-13d8bf66]{width:100%;height:100%}.content .content-info .bottom .bottom-box .use-restrictions li .img .bg[data-v-13d8bf66]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#fff;text-align:center;font-size:%?28?%;line-height:%?40?%}.content .content-info .bottom .bottom-box .use-restrictions li[data-v-13d8bf66]:last-child{margin-right:0}.content .content-info .bottom .bottom-box .use-restrictions-limit3[data-v-13d8bf66]{padding-left:%?36?%;font-size:%?24?%;line-height:%?34?%;color:#212121}.content .content-info .bottom .bottom-box .use-restrictions-limit3 li[data-v-13d8bf66]{display:-webkit-box;display:-webkit-flex;display:flex;margin-bottom:%?16?%}.content .content-info .bottom .bottom-box .use-restrictions-limit3 li[data-v-13d8bf66]:last-child{margin-bottom:0}.content .content-info .bottom .bottom-box .use-restrictions-limit3 li .left[data-v-13d8bf66]{font-weight:700;width:%?160?%;text-align:right;-webkit-flex-shrink:0;flex-shrink:0;white-space:nowrap}.content .content-info .bottom .bottom-box .use-restrictions-limit3 li .right[data-v-13d8bf66]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .content-info .bottom .bottom-box .use-restrictions-limit3 li .right span[data-v-13d8bf66]{background-color:#f5f5f5;padding:%?8?% %?16?%;margin-right:%?8?%;margin-bottom:%?8?%;border-radius:%?4?%}.content .content-info .bottom .bottom-box .use-restrictions-limit3 li .right span[data-v-13d8bf66]:last-child{margin-right:0}.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66]{padding-left:%?36?%;font-size:%?24?%}.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] .nodata{color:#212121}.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] .nodata uni-view{font-size:%?24?%}.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] img{width:100%}.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] ul{display:block;list-style-type:disc;-webkit-margin-before:1em;margin-block-start:1em;-webkit-margin-after:1em;margin-block-end:1em;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:0;margin-inline-end:0;-webkit-padding-start:40px;padding-inline-start:40px}.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] ul li{display:list-item;text-align:-webkit-match-parent;list-style-type:disc}.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] ol{display:block;list-style-type:disc;-webkit-margin-before:1em;margin-block-start:1em;-webkit-margin-after:1em;margin-block-end:1em;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:0;margin-inline-end:0;-webkit-padding-start:40px;padding-inline-start:40px}.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] ol li{display:list-item;text-align:-webkit-match-parent;list-style-type:decimal}.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] uni-image{width:100%!important}.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h1,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h1 span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h2,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h2 span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h3,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h3 span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h4,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h4 span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h5,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h5 span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h6,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h6 span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] strong{font-weight:700}.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h1 span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h1 em,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h1 span span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h1 span em,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h2 span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h2 em,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h2 span span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h2 span em,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h3 span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h3 em,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h3 span span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h3 span em,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h4 span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h4 em,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h4 span span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h4 span em,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h5 span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h5 em,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h5 span span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h5 span em,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h6 span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h6 em,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h6 span span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] h6 span em,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] strong span,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] strong em{font-weight:700}.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] em,\r\n.content .content-info .bottom .bottom-box .use-description[data-v-13d8bf66] em span{font-style:italic}.content .content-info .bottom .bottom-box .no[data-v-13d8bf66]{padding-left:%?36?%;font-size:%?24?%;line-height:%?34?%;color:#212121}.sub-coupon-wrap[data-v-13d8bf66]{border:1px solid red;left:0;z-index:10000}',""]),t.exports=e},"5b806":function(t,e,o){"use strict";o.r(e);var n=o("1d24"),i=o("f31b");for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(a);var s,r=o("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=c.exports},"8ffe":function(t,e,o){"use strict";var n;o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("page-box",[o("v-uni-view",{staticClass:"content"},[o("img",{staticClass:"bg",attrs:{mode:"widthFix",src:t.$utils.staticMediaUrl("member/coupon-detail-bg.png"),alt:""}}),t.requestFlag?o("div",{staticClass:"content-info"},[o("div",{staticClass:"top"},[o("div",{staticClass:"price uni-color-primary"},["1"===t.couponData.coupon_sale_type?o("span",{staticClass:"unit",staticStyle:{"font-size":"48rpx",transform:"translateY(20rpx)"}},[t._v("￥")]):t._e(),t._v(t._s(parseFloat(t.couponData.discount_price))),"2"===t.couponData.coupon_sale_type?o("span",{staticClass:"unit",staticStyle:{transform:"translateY(24rpx)"}},[t._v("折")]):t._e()]),o("div",{staticClass:"name"},[t._v(t._s(t.couponData.coupon_name))]),o("div",{staticClass:"desc"},[t._v(t._s(t.couponData.content))]),o("div",{staticClass:"time"},[t._v("有效期："+t._s("0"===t.couponData.time_limit?t.couponData.start_time+"~"+t.couponData.end_time:"0"===t.couponData.limit_day?"无限制":"即领取日内"+t.couponData.limit_day+"天有效"))]),"1"===t.couponData.is_free?o("div",{staticStyle:{width:"100%","margin-top":"32rpx",position:"relative"}},[o("btn",{attrs:{type:"do",size:"middle"},on:{"btn-click":function(e){arguments[0]=e=t.$handleEvent(e),t.getCouponForMsg.apply(void 0,arguments)}}},[t._v("立即领取")]),t.showSubscribe&&t.subTemplateId.length>0?o("subscribe",{staticClass:"sub-coupon-wrap",attrs:{templates:t.subTemplateId},on:{success:function(e){arguments[0]=e=t.$handleEvent(e),t.success.apply(void 0,arguments)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.error.apply(void 0,arguments)}}}):t._e()],1):o("div",{staticClass:"btn",staticStyle:{position:"relative"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCouponForMsg.apply(void 0,arguments)}}},[0!==parseFloat(t.couponData.credit)?o("span",[t._v(t._s(parseFloat(t.couponData.credit))+t._s(t.credit_text))]):t._e(),0!==parseFloat(t.couponData.credit)&&0!==parseFloat(t.couponData.balance)?o("span",[t._v("+")]):t._e(),0!==parseFloat(t.couponData.balance)?o("span",[t._v(t._s(parseFloat(t.couponData.balance))+"元")]):t._e(),t.showSubscribe&&t.subTemplateId.length>0?o("subscribe",{staticClass:"sub-coupon-wrap",attrs:{templates:t.subTemplateId},on:{success:function(e){arguments[0]=e=t.$handleEvent(e),t.success.apply(void 0,arguments)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.error.apply(void 0,arguments)}}}):t._e()],1),o("ul",{staticClass:"dotList"},[o("li",{staticClass:"dot"}),o("li",{staticClass:"dot"})])]),o("div",{staticClass:"bottom"},["0"===t.couponData.is_free?o("div",{staticClass:"bottom-box"},[o("div",{staticClass:"bottom-box-title"},[o("div",{staticClass:"dot "}),o("div",{staticClass:"text"},[t._v("所需金额与"+t._s(t.credit_text))])]),o("ul",{staticClass:"money-integral"},[0!==parseFloat(t.couponData.balance)?o("li",[o("div",{staticClass:"left"},[t._v("金额：")]),o("div",{staticClass:"right"},[t._v(t._s(parseFloat(t.couponData.balance))+"元")])]):t._e(),0!==parseFloat(t.couponData.credit)?o("li",[o("div",{staticClass:"left"},[t._v(t._s(t.credit_text)+"：")]),o("div",{staticClass:"right"},[t._v("消耗"+t._s(parseFloat(t.couponData.credit))+t._s(t.credit_text))])]):t._e()])]):t._e(),o("div",{staticClass:"bottom-box"},[o("div",{staticClass:"bottom-box-title"},[o("div",{staticClass:"dot"}),o("div",{staticClass:"text"},[t._v("领取限制")])]),o("ul",{staticClass:"receive-restrictions"},[o("li",[o("div",{staticClass:"left"},[t._v("领取人限制：")]),o("div",{staticClass:"right"},[t._v(t._s(t.limit_member))])]),o("li",[o("div",{staticClass:"left"},[t._v("领取张数：")]),o("div",{staticClass:"right"},[t._v(t._s(t.limit_text))])]),"1"===t.couponData.is_free?o("li",[o("div",{staticClass:"left"},[t._v("领取方式：")]),o("div",{staticClass:"right"},[t._v("免费领取")])]):t._e()])]),o("div",{staticClass:"bottom-box"},[o("div",{staticClass:"bottom-box-title"},[o("div",{staticClass:"dot"}),o("div",{staticClass:"text"},[t._v("使用限制"),"1"===t.couponData.goods_limit?o("span",[t._v("（允许以下"+t._s(t.couponData.goods.length)+"个商品使用）")]):t._e(),"2"===t.couponData.goods_limit?o("span",[t._v("（不允许以下"+t._s(t.couponData.goods.length)+"个商品使用）")]):t._e(),"3"===t.couponData.goods_limit?o("span",[t._v("（允许以下分类使用）")]):t._e()])]),"0"!==t.couponData.goods_limit&&"3"!==t.couponData.goods_limit?o("ul",{staticClass:"use-restrictions"},[t._l(t.couponData.goods,(function(e,n){return[n<3?o("li",{key:n+"_0",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.jumpGoodsDetail(e)}}},[o("div",{staticClass:"img",style:{"background-image":"url("+t.$utils.staticMediaUrl("decorate/goods_col2.png")+")"}},[o("img",{attrs:{src:t.$utils.mediaUrl(e.thumb),alt:""}}),2===n&&t.couponData.goods.length>3?o("div",{staticClass:"bg"},[o("div",{staticClass:"box",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.jumpGoodsList.apply(void 0,arguments)}}},[o("div",{staticClass:"num"},[t._v("+"+t._s(t.couponData.goods.length))]),o("div",{staticClass:"see"},[t._v("查看更多")])])]):t._e()]),o("div",{staticClass:"text"},[t._v(t._s(t._f("formatText")(e.title)))])]):t._e()]}))],2):"3"===t.couponData.goods_limit?o("ul",{staticClass:"use-restrictions-limit3"},[o("li",[o("div",{staticClass:"left"},[t._v("分类名称：")]),o("div",{staticClass:"right"},t._l(t.couponData.goods,(function(e,n){return o("span",{key:n,staticClass:"cate-item",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.jumpCategoryGoodsList(e.id)}}},[t._v(t._s(e.name))])})),0)])]):"0"===t.couponData.goods_limit?o("div",{staticClass:"no"},[t._v("无")]):t._e()]),o("div",{staticClass:"bottom-box"},[o("div",{staticClass:"bottom-box-title"},[o("div",{staticClass:"dot"}),o("div",{staticClass:"text"},[t._v("使用说明")])]),t.couponData.default_description?o("ul",{staticClass:"use-description"},["2"===t.couponData.default_description?o("li",[o("div",{domProps:{innerHTML:t._s(t.formatHtml(t.couponData.description))}})]):o("li",[o("div",{domProps:{innerHTML:t._s(t.formatHtml(t.couponData.default_description))}})])]):o("div",{staticClass:"no"},[t._v("无")])])])]):t._e(),o("pay-picker",{ref:"payPicker",attrs:{payList:t.payList},on:{closePicker:function(e){arguments[0]=e=t.$handleEvent(e),t.closePicker.apply(void 0,arguments)},confirmPay:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmPay.apply(void 0,arguments)}}}),o("rr-modal",{attrs:{title:t.modalTitle,cancelText:t.cancelText,okText:t.okText,showOkBtn:t.showOkBtn},on:{handlerOK:function(e){arguments[0]=e=t.$handleEvent(e),t.handlerOK.apply(void 0,arguments)},handlerCancel:function(e){arguments[0]=e=t.$handleEvent(e),t.handlerCancel.apply(void 0,arguments)}},model:{value:t.modalShowFlag,callback:function(e){t.modalShowFlag=e},expression:"modalShowFlag"}})],1)],1)},a=[]},"9cb4":function(t,e,o){var n=o("4ea4");o("8e6e"),o("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("a481");var i=n(o("3835"));o("ac6a"),o("ffc1");var a=n(o("ade3"));o("96cf");var s=n(o("1da1")),r=n(o("5a96")),c=o("a696"),d=n(o("a64f")),l=o("a28b"),p=o("325c"),u=n(o("5b806"));function b(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function f(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?b(Object(o),!0).forEach((function(e){(0,a.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var m={mixins:[d.default],components:{payPicker:r.default,Subscribe:u.default},data:function(){return{is_credit_shop:0,modalShowFlag:!1,modalType:"pay",modalTitle:"确定购买优惠券吗？",cancelText:"取消",okText:"确定",showOkBtn:!0,couponId:"",requestFlag:!1,couponData:{limit_member:[]},payList:[],payType:"",orderId:"",payParams:"",linkReceive:"",subTemplateId:[],showSubscribe:!0,credit_shop:{}}},filters:{formatText:function(t){return t&&t.length>12?"".concat(t.slice(0,12),"..."):t}},created:function(){var t=this;if((0,p.is_weixin)()){var e,o=null===(e=this.$store.state.setting)||void 0===e?void 0:e.noticeTemId,n=["buyer_coupon_send","coupon_expire_notice"];o&&n.length&&n.map((function(e){var n;o[e]&&(null===(n=t.subTemplateId)||void 0===n||n.push(o[e]))}))}},computed:{is_weixin:function(){return this.$utils.is_weixin()},credit_text:function(){return this.$store.state.setting.systemSetting.credit_text||"积分"},balance_text:function(){return this.$store.state.setting.systemSetting.balance_text||"余额"},recharge_state:function(){return this.$store.state.setting.systemSetting.recharge_state},return_url:function(){var t="";return t=this.is_weixin?"".concat(l.config.wap_url,"/kdxOthers/paySuccess"):"".concat(l.config.wap_url,"/kdxMember/coupon/paySuccess/index?id=").concat(this.couponId),t},limit_text:function(){return this.is_credit_shop?0===+this.credit_shop.goods_limit_type?"不限制":1===+this.credit_shop.goods_limit_type?"".concat(this.credit_shop.goods_limit_num,"张/人"):"每".concat(this.credit_shop.goods_limit_day,"天").concat(this.credit_shop.goods_limit_num,"张/人"):"0"===this.couponData.get_max_type?"不限制":"".concat(this.couponData.get_max,"张/人")},limit_member:function(){if(this.is_credit_shop){var t=+this.credit_shop.member_level_limit_type,e=+this.credit_shop.member_group_limit_type,o="",n="";return t?o=1===t?this.credit_shop.member_level_name.join("、"):"".concat(this.credit_shop.member_level_name.join("、"),"不可购买"):e?n=1===e?this.credit_shop.member_group_name.join("、"):"".concat(this.credit_shop.member_group_name.join("、"),"不可购买"):o="不限制","".concat(o," ").concat(n)}return 0===this.couponData.limit_member.length?"不限制":this.couponData.limit_member.join("、")}},mounted:function(){var t=(0,s.default)(regeneratorRuntime.mark((function t(){var e,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.couponId=this.$Route.query.id,this.is_credit_shop=(null===(e=this.$Route.query)||void 0===e?void 0:e.is_credit_shop)||0,this.linkReceive=this.$Route.query.linkReceive,!this.linkReceive||"1"!==this.linkReceive){t.next=13;break}return t.next=6,this.$store.dispatch("login/checkLogin");case 6:if(o=t.sent,o){t.next=10;break}return this.getCouponDetail(),t.abrupt("return",this.$store.commit("login/setModal",!0));case 10:this.getCoupon(),t.next=14;break;case 13:this.getCouponDetail();case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getCouponDetail:function(){var t=this,e={id:this.couponId};this.is_credit_shop&&(e.is_credit_shop=1),this.$api.memberApi.getCouponDetail(e).then((function(e){0===e.error?(e.data.limit_member="0"===e.data.limit_member?[]:e.data.limit_member,t.couponData=f({},e.data),t.is_credit_shop&&(t.credit_shop=e.data.credit_shop,t.couponData.balance=e.data.credit_shop.min_price,t.couponData.credit=e.data.credit_shop.min_price_credit)):t.$toast(e.message),t.requestFlag=!0}))},getCoupon:function(){var t=(0,s.default)(regeneratorRuntime.mark((function t(){var e,o,n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("login/checkLogin");case 2:if(e=t.sent,e){t.next=5;break}return t.abrupt("return",this.$store.commit("login/setModal",!0));case 5:o={id:this.couponId},n=this.sessionStorage.getItem("article_id"),n&&(o.article_id=n),this.$api.memberApi.getCoupon(o).then((function(t){0===t.error?i.jumpCouponPaySuccess():(i.$toast(t.message),i.linkReceive&&"1"===i.linkReceive&&i.getCouponDetail())}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),buyCoupon:function(){var t=(0,s.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("login/checkLogin");case 2:if(e=t.sent,e){t.next=5;break}return t.abrupt("return",this.$store.commit("login/setModal",!0));case 5:if(!this.is_credit_shop){t.next=8;break}return this.createCouponOrder(),t.abrupt("return");case 8:this.modalType="pay",this.modalTitle="确定购买优惠券吗？",this.cancelText="取消",this.okText="确定",this.showOkBtn=!0,this.modalShowFlag=!0;case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handlerOK:function(){var t=(0,s.default)(regeneratorRuntime.mark((function t(){var e,o,n,i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.modalShowFlag=!1,"pay"!==this.modalType){t.next=21;break}return t.next=4,this.getCouponPayType();case 4:if(e=t.sent,o=e.need_pay,this.payList=e.payList,0!==o){t.next=11;break}this.jumpCouponPaySuccess(),t.next=19;break;case 11:if(1!==o){t.next=19;break}if(0!==(null===(n=this.payList)||void 0===n?void 0:n.length)){t.next=15;break}return this.$toast("未开启支付方式"),t.abrupt("return");case 15:if(1!==(null===(i=this.payList)||void 0===i?void 0:i.length)){t.next=18;break}return this.confirmPay(null===(a=this.payList)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.type),t.abrupt("return");case 18:this.$refs["payPicker"].showPayPicker();case 19:t.next=22;break;case 21:"recharge"===this.modalType&&this.$Router.auto({path:"/kdxMember/recharge/index"});case 22:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handlerCancel:function(){this.modalShowFlag=!1},getCouponPayType:function(){var t=this;return new Promise((function(e,o){var n={id:t.couponId},a=t.sessionStorage.getItem("article_id");a&&(n.article_id=a),t.$api.memberApi.getCouponPayType(n).then((function(o){if(0===o.error)if(1===o.need_pay){for(var n=[],a=0,s=Object.entries(o.pay_list);a<s.length;a++){var r=(0,i.default)(s[a],1),c=r[0];1==o.pay_list[c].enable&&n.push({type:c})}t.orderId=o.order_id,e({payList:n,need_pay:o.need_pay})}else 0===o.need_pay&&e({payList:[],need_pay:o.need_pay});else t.$toast(o.message)}))}))},closePicker:function(){},confirmPay:function(t){this.payType=t,this.payCoupon()},payCoupon:function(t){var e=this,o={};o["return_url"]=this.return_url,this.$api.memberApi.payCoupon(f({order_id:this.orderId,pay_type:this.payType},o),{errorToast:!1}).then(function(){var t=(0,s.default)(regeneratorRuntime.mark((function t(o){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==o.error){t.next=17;break}if(e.$refs["payPicker"].closePicker(),"alipay"!=e.payType){t.next=6;break}(0,c.wapAliPay)({url:o.data,order_id:e.orderId,couponId:e.couponId,pageFrom:"coupunPay"}),t.next=15;break;case 6:if("wechat"!=e.payType){t.next=14;break}return n="",t.next=10,(0,c.wapWechatPay)(f({},o.data));case 10:n=t.sent,"ok"===n&&setTimeout((function(){e.checkPayStatus()}),1e3),t.next=15;break;case 14:"balance"==e.payType?setTimeout((function(){e.jumpCouponPaySuccess()}),1e3):e.payType;case 15:t.next=18;break;case 17:211258===o.error&&"balance"==e.payType?(e.$refs["payPicker"].closePicker(),e.modalType="recharge",e.modalTitle="对不起，您的".concat(e.balance_text,"不足请立即进行充值"),"1"===e.recharge_state?(e.cancelText="取消支付",e.okText="立即充值",e.showOkBtn=!0):(e.cancelText="确认",e.okText="",e.showOkBtn=!1),e.modalShowFlag=!0):e.$toast(o.message);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},checkPayStatus:function(){var t=this,e={id:this.orderId,pay_type:this.payType};this.$api.memberApi.checkCouponPayStatus(e).then((function(e){0==e.error?(uni.hideLoading(),t.$toast("支付成功"),setTimeout((function(){t.jumpCouponPaySuccess()}),1e3)):setTimeout((function(){t.checkPayStatus()}),2e3)}))},jumpCouponPaySuccess:function(){this.$Router.replace({path:"/kdxMember/coupon/paySuccess/index",query:{id:this.couponId}})},jumpGoodsDetail:function(t){if("3"!==this.couponData.goods_limit){var e="/kdxGoods/detail/index";this.$Router.auto({path:e,query:{goods_id:t.id}})}},jumpCategoryGoodsList:function(t){this.$Router.auto({path:"/kdxGoods/goodList/index",query:{category_id:t}})},jumpGoodsList:function(){if("3"!==this.couponData.goods_limit){var t=this.couponData.goods.map((function(t){return{goods:t}}));this.$store.commit("coupon/setCouponGoodsList",t);var e="/kdxMember/coupon/goods/index";this.$Router.auto({path:e})}},formatHtml:function(t){return t},createCouponOrder:function(){if(!this.credit_shop.perm.buy)return this.$message("您暂时没有购买权限!");if(0!==+this.credit_shop.credit_shop_stock){var t={goods_id:this.credit_shop.id,option_id:0,total:1,type:"-1",credit_good_type:this.credit_shop.type,plugin:"creditShop"};this.$Router.auto({path:"/kdxOrder/create",query:t})}else this.$message("商品已售罄")},getCouponForMsg:function(){(0,p.is_weixin)()?(this.showSubscribe=!0,0==this.subTemplateId.length&&("1"==this.couponData.is_free?this.getCoupon():this.buyCoupon())):"1"==this.couponData.is_free?this.getCoupon():this.buyCoupon()},success:function(){this.showSubscribe=!1,"1"==this.couponData.is_free?this.getCoupon():this.buyCoupon()},error:function(){this.showSubscribe=!1,"1"==this.couponData.is_free?this.getCoupon():this.buyCoupon()}}};e.default=m},a696:function(t,e,o){(function(t){var n=o("4ea4");o("8e6e"),o("ac6a"),o("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.requestOrderPayment=l,e.requestPayment=d,e.wapAliPay=u,e.wapWechatPay=p,o("a481");var i=n(o("ade3")),a=o("a18c"),s=o("325c");function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function c(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){(0,i.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function d(e){return new Promise((function(o){var n={provider:e.provider};t.log("支付参数--------",n),uni.requestPayment(c(c({},n),{},{success:function(e){t.log(e,"支付success返回结果+++++++++")},fail:function(e){o("fail"),uni.hideLoading(),uni.showToast({title:"支付失败",icon:"none",duration:2e3}),t.log("支付报错信息-----------",e)}}))}))}function l(e){return new Promise((function(o){var n={timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign};e.orderInfo&&(n.orderInfo=e.orderInfo),t.log("支付参数--------requestOrderPayment",n),t.log("paymentData.orderInfo",e.orderInfo),wx.requestOrderPayment(c(c({},n),{},{success:function(e){t.log(e,"支付success返回结果+++++++++requestOrderPayment")},fail:function(e){o("fail"),uni.hideLoading(),uni.showToast({title:"支付失败",icon:"none",duration:2e3}),t.log("支付报错信息-----------requestOrderPayment",e)}}))}))}function p(t){return new Promise((function(e){function o(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp?t.timeStamp:t.timestamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},(function(t){"get_brand_wcpay_request:ok"==t.err_msg?e("ok"):"get_brand_wcpay_request:cancel"==t.err_msg?(e("cancle"),uni.showToast({title:"取消支付",icon:"none"})):(e("fail"),uni.showToast({title:"支付失败",icon:"none"}))}))}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",o,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",o),document.attachEvent("onWeixinJSBridgeReady",o)):o()}))}function u(t){var e=(0,s.is_weixin)();e?a.router.replace({path:"/kdxOrder/alipay",query:{url_alipay:t.url,id:Array.isArray(t.order_id)?t.order_id.join(","):t.order_id,couponId:t.couponId||"",pageFrom:t.pageFrom||"",dispatch_type:t.dispatch_type,orderID:Array.isArray(t.order_id)?1:0}}):location.href=t.url}}).call(this,o("5a52")["default"])},e00a:function(t,e,o){"use strict";o.r(e);var n=o("9cb4"),i=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},e161:function(t,e,o){var n=o("3b4a");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=o("4f06").default;i("fd128002",n,!0,{sourceMap:!1,shadowMode:!1})},f31b:function(t,e,o){"use strict";o.r(e);var n=o("39ec"),i=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},ffc1:function(t,e,o){var n=o("5ca1"),i=o("504c")(!0);n(n.S,"Object",{entries:function(t){return i(t)}})}}]);